"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[7843],{2123:(e,t,n)=>{n.d(t,{O:()=>s,h:()=>l});var r=n(2292),a=n(76271),i=n(6833),o=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),s=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.f2.POST,url:a.h.getState().config.endpoints.guests};return o(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},l=function(e){var t={headers:{"Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.f2.DELETE,url:a.h.getState().config.endpoints.guestsList+"/"+e};return o(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},17370:(e,t,n)=>{n.d(t,{M:()=>o});var r=n(96124),a=n(76271),i=n(6833),o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{"Content-Type":"application/json"},method:i.f2.GET,url:a.h.getState().config.endpoints.guestsList},n=(0,r.Z)(e?t:null),o=n.data,s=n.error;return{data:o,error:s,isLoading:!s&&!o,isValidating:n.isValidating,mutate:n.mutate}}},27843:(e,t,n)=>{n.r(t),n.d(t,{default:()=>en});var r=n(55931),a=n(17901),i=n(55007),o=n(25134),s=n(15997),l=n(60486),u=n(90302),c=n(40838),d=n(43974),m=n(51021),p=n(63264),f=n(75120),v=n(29314),g=n(77742),h=n(38818),b=n(21257),y=n(73269),E=n(38463),S=n(58613),I=n(6833),w=n(82406),U=n(78132),C=n(47513),O=n(44194),R=n(10479),A=n(59673),k=n(47245),T=n(26154),L=n(47625),N=n(37077),P=n(92e3),_=n(92479),x=n(98855),z=n(20305),M=n(73965),Z=n(41534),j=n(15513),W=n(29851),D=n(82555),F=n(51835),V=n.n(F),H=n(27975),Q=n.n(H),G=n(55900),K=n.n(G),B=n(21555),$=n.n(B),X=n(3621),Y=n.n(X),q=n(5062),J=n.n(q),ee=n(10050),te={};te.styleTagTransform=J(),te.setAttributes=$(),te.insert=K().bind(null,"head"),te.domAPI=Q(),te.insertStyleElement=Y();V()(ee.Z,te);ee.Z&&ee.Z.locals&&ee.Z.locals;const ne=function(e){var t=e.selectedFilters,n=e.onChange,r=e["data-componentid"],a=void 0===r?"account-status-filter-dropdown":r,i=(0,R.$)().t;return O.createElement(x.Z,{className:"account-status-filter-dropdown","data-componentid":a},O.createElement(M.Z,{fullWidth:!0},O.createElement(W.Z,{className:"account-status-select-input",multiple:!0,value:t,onChange:function(e){var t=e.target.value;n("string"==typeof t?t.split(","):t)},renderValue:function(){return O.createElement(x.Z,{className:"dropdown-label-container","data-componentid":"".concat(a,"-label")},i("users:advancedSearch.accountStatusFilter.label"),t.length>0&&O.createElement(_.Z,{className:"status-count-badge",badgeContent:t.length,"data-componentid":"".concat(a,"-label-badge")}))},"data-componentid":"".concat(a,"-select-input"),displayEmpty:!0},D.i4.map((function(e){return O.createElement(j.Z,{key:e.key,value:e.key,"data-componentid":"".concat(a,"-option-").concat(e.key)},O.createElement(z.Z,{checked:t.indexOf(e.key.toString())>-1,"data-componentid":"".concat(a,"-checkbox-").concat(e.key)}),O.createElement(Z.Z,{primary:i(e.text)}))})))))};var re=n(17370),ae=n(12638),ie=n(51907),oe=n(92283),se=n(66796),le=n(2123);function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var de=function(e){var t,n,r=e.guestUsersList,a=e.getGuestUsersList,o=e.isGuestUsersRequestLoading,l=e.invitationStatusOption,u=e.searchQuery,c=e.onSearchQueryClear,d=e.userTypeSelection,m=e["data-componentid"],p=(0,R.$)().t,f=(0,k.I0)(),v=ue((0,O.useState)(!1),2),g=v[0],h=v[1],b=ue((0,O.useState)(void 0),2),y=b[0],E=b[1],S=ue((0,O.useState)(!1),2),C=S[0],A=S[1],T=ue((0,O.useState)(void 0),2),L=T[0],N=T[1],P=ue((0,O.useState)(!1),2),_=P[0],x=P[1],z=(0,k.v9)((function(e){return e.config.ui.features})),M=(0,i.EV)(null==z||null===(t=z.users)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),Z=function(e){x(!0),d===oe.rb.EXTERNAL?function(e){return(0,le.h)(e).then((function(){f((0,w.V_)({description:p("invite:notifications.deleteInvite.success.description"),level:I.QU.SUCCESS,message:p("invite:notifications.deleteInvite.success.message")})),a()})).catch((function(e){var t,n,r,a,i,o,s;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?f((0,w.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:p("invite:notifications.deleteInvite.error.description"),level:I.QU.ERROR,message:null!==(o=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==o?o:p("invite:notifications.deleteInvite.error.message")})):f((0,w.V_)({description:p("invite:notifications.deleteInvite.genericError.description"),level:I.QU.ERROR,message:p("invite:notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){x(!1),h(!1),a()})):function(e){return(0,ie.UF)(e).then((function(){f((0,w.V_)({description:p("invite:notifications.deleteInvite.success.description"),level:I.QU.SUCCESS,message:p("invite:notifications.deleteInvite.success.message")})),a()})).catch((function(e){var t,n,r,a,i,o,s;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?f((0,w.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:p("invite:notifications.deleteInvite.error.description"),level:I.QU.ERROR,message:null!==(o=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==o?o:p("invite:notifications.deleteInvite.error.message")})):f((0,w.V_)({description:p("invite:notifications.deleteInvite.genericError.description"),level:I.QU.ERROR,message:p("invite:notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){x(!1),h(!1),a()}))},j=function(e){x(!0),function(e){return(0,ie.c_)(e).then((function(){f((0,w.V_)({description:p("invite:notifications.resendInvite.success.description"),level:I.QU.SUCCESS,message:p("invite:notifications.resendInvite.success.message")}))})).catch((function(e){var t,n,r,a,i,o,s;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?f((0,w.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:p("invite:notifications.resendInvite.error.description"),level:I.QU.ERROR,message:null!==(o=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==o?o:p("invite:notifications.resendInvite.error.message")})):f((0,w.V_)({description:p("invite:notifications.resendInvite.genericError.description"),level:I.QU.ERROR,message:p("invite:notifications.resendInvite.genericError.message")}))}))}(e).finally((function(){x(!1),A(!1),a()}))},W=function(){return u&&0===(null==r?void 0:r.length)?O.createElement(U.$J,{action:O.createElement(U.Qj,{onClick:c},p("invite:placeholder.emptySearchResultPlaceholder.clearButton")),image:(0,s.jF)().emptySearch,imageSize:"tiny",title:p("invite:placeholder.emptySearchResultPlaceholder.title"),subtitle:[p("invite:placeholder.emptySearchResultPlaceholder.subTitle.0",{query:u}),p("invite:placeholder.emptySearchResultPlaceholder.subTitle.1")]}):0===(null==r?void 0:r.length)?l===se.XC.EXPIRED?O.createElement(U.$J,{image:(0,s.jF)().newList,imageSize:"tiny",subtitle:[d===oe.rb.EXTERNAL?p("parentOrgInvitations:emptyPlaceholder.noExpiredInvitations"):p("parentOrgInvitations:emptyPlaceholder.noCollaboratorUserInvitations")]}):O.createElement(U.$J,{image:(0,s.jF)().newList,imageSize:"tiny",subtitle:[d===oe.rb.EXTERNAL?p("parentOrgInvitations:emptyPlaceholder.noPendingInvitations"):"There are no collaborator users with pending invitations at the moment."]}):O.createElement(U.$J,{image:(0,s.jF)().newList,imageSize:"tiny",subtitle:[p("parentOrgInvitations:emptyPlaceholder.noInvitations")]})};return O.createElement(O.Fragment,null,O.createElement(U.wQ,{showSearch:!0,isLoading:o,loadingStateOptions:{count:5,imageType:"circular"},placeholders:W(),actions:[{hidden:function(){return d===oe.rb.EXTERNAL||!M},icon:function(){return"redo alternate"},onClick:function(e,t){N(t),A(!0)},popupText:function(){return"resend"},renderer:"semantic-icon"},{"data-componentid":"".concat(m,"-users-list-item-delete-invitation-button"),hidden:function(){return!M},icon:function(){return"trash alternate"},onClick:function(e,t){E(t),h(!0)},popupText:function(){return"delete"},renderer:"semantic-icon"}],data:r,columns:(n=[{allowToggleVisibility:!1,dataIndex:"email",id:"email",key:0,render:function(e){return O.createElement(ae.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(m,"-item-image")},O.createElement(U.Yt,{"data-componentid":"".concat(m,"-item-image-inner"),name:e.email,size:"mini",image:e.email,spaced:"right"}),O.createElement(ae.Z.Content,null,d===oe.rb.EXTERNAL?null==e?void 0:e.username:null==e?void 0:e.email))},title:"User"},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:1,render:function(e){var t=e.status;return O.createElement(ae.Z,{as:"h6","data-componentid":"".concat(m,"-invite-status")},O.createElement(ae.Z.Content,null,O.createElement(ae.Z.Subheader,null,t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())))},textAlign:"left",title:"Invitation Status"},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:3,textAlign:"right",title:""}],n),onRowClick:function(){return null},showHeader:!1,transparent:!o&&null!==W()}),g&&O.createElement(U.cV,{primaryActionLoading:_,"data-componentid":"".concat(m,"-confirmation-modal"),onClose:function(){return h(!1)},type:"negative",open:g,assertion:y.email,assertionHint:p("invite:confirmationModal.deleteInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return h(!1)},onPrimaryActionClick:function(){return Z(y.id)},closeOnDimmerClick:!1},O.createElement(U.cV.Header,{"data-componentid":"".concat(m,"-confirmation-modal-header")},p("invite:confirmationModal.deleteInvite.header")),O.createElement(U.cV.Message,{"data-componentid":"".concat(m,"-confirmation-modal-message"),attached:!0,negative:!0},p("invite:confirmationModal.deleteInvite.message")),O.createElement(U.cV.Content,{"data-componentid":"".concat(m,"-confirmation-modal-content")},p("invite:confirmationModal.deleteInvite.content"))),C&&O.createElement(U.cV,{primaryActionLoading:_,"data-componentid":"".concat(m,"-confirmation-modal"),onClose:function(){return A(!1)},type:"warning",open:C,assertion:L.email,assertionHint:p("invite:confirmationModal.resendInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return A(!1)},onPrimaryActionClick:function(){return j(L.id)},closeOnDimmerClick:!1},O.createElement(U.cV.Header,{"data-componentid":"".concat(m,"-confirmation-modal-header")},p("invite:confirmationModal.resendInvite.header")),O.createElement(U.cV.Message,{"data-componentid":"".concat(m,"-confirmation-modal-message"),attached:!0,warning:!0},p("invite:confirmationModal.resendInvite.message")),O.createElement(U.cV.Content,{"data-componentid":"".concat(m,"-confirmation-modal-content")},p("invite:confirmationModal.resendInvite.content"))))},me=n(41355),pe=n(74411),fe=n(48704),ve=n(86105),ge=n(16590),he=n(50699),be=n(13932),ye=n(78779),Ee=n(22669);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||Oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){if(e){if("string"==typeof e)return Re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ae=function(e){var t,n,r,a,o=e.advancedSearch,d=e.defaultListItemLimit,m=e.onUserDelete,p=e.isLoading,f=e.featureConfig,v=e.onColumnSelectionChange,g=e.onListItemClick,h=e.onSearchQueryClear,y=e.searchQuery,E=e.selection,C=e.showListItemActions,A=e.showMetaContent,L=e.userMetaListContent,_=e.usersList,x=e.isReadOnlyUserStore,z=e["data-testid"],M=(0,R.$)().t,Z=(0,k.I0)(),j=(0,b.z)().isSubOrganization,W=(0,S.Z)().readOnlyUserStoreNamesList,D=Ce((0,O.useState)(!1),2),F=D[0],V=D[1],H=Ce((0,O.useState)(void 0),2),Q=H[0],G=H[1],K=Ce((0,O.useState)(!1),2),B=K[0],$=K[1],X=(0,k.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.providedUsername})),Y=(0,k.v9)((function(e){return e.auth.isPrivilegedUser})),q=!(null!=f&&null!==(t=f.users)&&void 0!==t&&null!==(t=t.disabledFeatures)&&void 0!==t&&t.includes(oe._F.FEATURE_DICTIONARY.get("USER_SHARED_PROFILES"))),J=(0,i.EV)(null==f||null===(n=f.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),ee=(0,i.EV)(null==f||null===(r=f.users)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.delete),te=function(e){c.m.push(l.$.getPaths().get("USER_EDIT").replace(":id",e))},ne=function(){return y?O.createElement(U.$J,{action:O.createElement(U.Qj,{onClick:h},M("users:usersList.search.emptyResultPlaceholder.clearButton")),image:(0,s.jF)().emptySearch,imageSize:"tiny",title:M("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[M("users:usersList.search.emptyResultPlaceholder.subTitle.2"),M("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}):(0,he.Z)(_)||0===_.totalResults?O.createElement(U.$J,{"data-testid":"".concat(z,"-empty-placeholder"),image:(0,s.jF)().newList,imageSize:"tiny",title:M(x?"users:usersList.list.emptyResultPlaceholder.emptyUsers":"users:usersList.list.emptyResultPlaceholder.title"),subtitle:x?[M("users:usersList.list.emptyResultPlaceholder.subTitle.0")]:[M("users:usersList.list.emptyResultPlaceholder.subTitle.0"),M("users:usersList.list.emptyResultPlaceholder.subTitle.1"),M("users:usersList.list.emptyResultPlaceholder.subTitle.2")]}):null};return O.createElement(O.Fragment,null,O.createElement(U.wQ,{className:"users-table",externalSearch:o,isLoading:p,loadingStateOptions:{count:null!=d?d:u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"},actions:function(){if(C){var e=[{"data-componentid":"users-list-item-edit-button","data-testid":"users-list-item-edit-button",hidden:function(){return!(0,ve.cr)(null==f?void 0:f.users,oe._F.FEATURE_DICTIONARY.get("USER_READ"))},icon:function(e){var t,n,r,a=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:fe.w.primaryUserstoreName;return!J||!(0,ve.cr)(null==f?void 0:f.users,oe._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=W&&W.includes(a.toString())||!q&&null!==(r=e[me.k.scim.systemSchema])&&void 0!==r&&r.managedOrg?"eye":"pencil alternate"},onClick:function(e,t){return te(null==t?void 0:t.id)},popupText:function(e){var t,n,r,a=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:fe.w.primaryUserstoreName;return!J||!(0,ve.cr)(null==f?void 0:f.users,oe._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=W&&W.includes(a.toString())||!q&&null!==(r=e[me.k.scim.systemSchema])&&void 0!==r&&r.managedOrg?M("common:view"):M("common:edit")},renderer:"semantic-icon"}];return e.push({"data-componentid":"users-list-item-delete-button","data-testid":"users-list-item-delete-button",hidden:function(e){var t,n,r,a,i,o,s=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:fe.w.primaryUserstoreName;return!(!j()||null===(r=e[null===me.k||void 0===me.k||null===(a=me.k.scim)||void 0===a?void 0:a.systemSchema])||void 0===r||!r.sharedType||(null===(i=e[null===me.k||void 0===me.k||null===(o=me.k.scim)||void 0===o?void 0:o.systemSchema])||void 0===i?void 0:i.sharedType)==oe.P2.INVITED)||(!(0,ve.cr)(null==f?void 0:f.users,oe._F.FEATURE_DICTIONARY.get("USER_DELETE"))||!ee||(null==W?void 0:W.includes(s.toString()))||X===(0,ve.WX)(null==e?void 0:e.userName)&&Y)},icon:function(){return"trash alternate"},onClick:function(e,t){V(!0),G(t)},popupText:function(){return M("users:usersList.list.iconPopups.delete")},renderer:"semantic-icon"}),e}}(),columns:function(){var e=[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,r,a,i=(0,ve.WX)(null==e?void 0:e.userName),o=Ee.QH.resolveUserListSubheader(e),s=void 0===(null===(t=e.name)||void 0===t?void 0:t.familyName)&&void 0===(null===(n=e.name)||void 0===n?void 0:n.givenName);return O.createElement(ae.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(z,"-item-heading")},O.createElement(U.Yt,{"data-componentid":"users-list-item-image",name:Ee.QH.resolveAvatarUsername(e),size:"mini",image:e.profileUrl,spaced:"right","data-hj-suppress":""}),function(e){var t,n,r,a,i,o,s="true"===(null===(t=e[pe.x.userProfileSchema])||void 0===t?void 0:t.accountLocked)||!0===(null===(n=e[pe.x.userProfileSchema])||void 0===n?void 0:n.accountLocked),l="true"===(null===(r=e[pe.x.userProfileSchema])||void 0===r?void 0:r.accountDisabled)||!0===(null===(a=e[pe.x.userProfileSchema])||void 0===a?void 0:a.accountDisabled),u=null===(i=e[pe.x.userProfileSchema])||void 0===i?void 0:i.lockedReason,c=null!==(o=oe.Dk[u])&&void 0!==o?o:oe.Dk.DEFAULT;return l?O.createElement(U.GI,{trigger:O.createElement(T.Z,{className:"disabled-icon",size:"small"},O.createElement(be.r,null)),content:M("user:profile.accountDisabled"),inverted:!0}):s?O.createElement(U.GI,{trigger:O.createElement(T.Z,{className:"locked-icon",size:"small"},O.createElement(ye.r,null)),content:M(c),inverted:!0}):null}(e),O.createElement(ae.Z.Content,{className:"pl-0"},O.createElement("div",null,i,(null===pe.x||void 0===pe.x?void 0:pe.x.disableManagedByColumn)&&(null===(r=e[null===me.k||void 0===me.k||null===(a=me.k.scim)||void 0===a?void 0:a.systemSchema])||void 0===r?void 0:r.managedOrg)&&O.createElement(N.Z,{size:"mini",className:"client-id-label"},M("parentOrgInvitations:invitedUserLabel"))),!s&&O.createElement(ae.Z.Subheader,{"data-componentid":"".concat(z,"-item-sub-heading")},o)))},title:"User"}];if(!pe.x.disableManagedByColumn&&e.push({allowToggleVisibility:!1,dataIndex:"idpType",id:"idpType",key:"idpType",render:function(e){return function(e){var t,n,r,a,i;if(null!==(t=e[null===me.k||void 0===me.k||null===(n=me.k.scim)||void 0===n?void 0:n.systemSchema])&&void 0!==t&&t.managedOrg)return oe._F.MANAGED_BY_PARENT_TEXT;var o=(null==e||null===(r=e.userName)||void 0===r?void 0:r.split("/").length)>1?null==e||null===(a=e.userName)||void 0===a||null===(a=a.split("/")[0])||void 0===a?void 0:a.toUpperCase():fe.w.primaryUserstoreName,s=null===(i=e[me.k.scim.systemSchema])||void 0===i?void 0:i.idpType;return s?s.split("/").length>1?null!=W&&W.includes(o.toString())?s.split("/")[1]+"-remote":s.split("/")[1]:s:"N/A"}(e)},title:O.createElement(O.Fragment,null,O.createElement("div",{className:"header-with-popup"},O.createElement("span",null,M("extensions:manage.users.list.columns.idpType")),O.createElement(U.GI,{trigger:O.createElement("div",{className:"inline"},O.createElement(T.Z,{disabled:!0,name:"info circle",className:"link pointing pl-1"})),content:M("extensions:manage.users.list.popups.content.idpTypeContent"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0})))}),e.push({allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:""}),!A||!L)return e;var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Oe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(L.entries());try{for(r.s();!(t=r.n()).done;){var a=Ce(t.value,2),i=a[0],o=a[1];if("name"!==i&&"emails"!==i&&"profileUrl"!==i&&""!==o){var s={allowToggleVisibility:!0,dataIndex:o,id:i,key:i,title:o};"meta.lastModified"===i&&(s=we(we({},s),{},{render:function(e){var t;return ge.CommonUtils.humanizeDateDifference(null==e||null===(t=e.meta)||void 0===t?void 0:t.lastModified)}})),"userName"===i&&(s=we(we({},s),{},{render:function(e){return(0,ve.WX)(null==e?void 0:e.userName)}})),n.push(s)}}}catch(l){r.e(l)}finally{r.f()}return n.unshift(e[0]),n.push(e[1]),n}(),data:null==_?void 0:_.Resources,onColumnSelectionChange:v,onRowClick:function(e,t){te(null==t?void 0:t.id),g&&g(e,t)},placeholders:ne(),selectable:E,showHeader:!0,transparent:!p&&null!==ne(),"data-testid":z}),O.createElement(U.cV,{primaryActionLoading:B,"data-testid":"".concat(z,"-confirmation-modal"),"data-componentid":"".concat(z,"-confirmation-modal"),onClose:function(){return V(!1)},type:"negative",open:F,assertionHint:M("user:deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){V(!1)},onPrimaryActionClick:function(){var e;$(!0),(e=null==Q?void 0:Q.id,(0,P.h8)(e).then((function(e){204===e.status?Z((0,w.V_)({description:M("users:notifications.deleteUser.success.description"),level:I.QU.SUCCESS,message:M("users:notifications.deleteUser.success.message")})):202===e.status&&Z((0,w.V_)({description:M("users:notifications.deleteUserPendingApproval.success.description"),level:I.QU.WARNING,message:M("users:notifications.deleteUserPendingApproval.success.message")})),m()})).catch((function(e){if(e.response&&e.response.data){var t=M("users:notifications.deleteUser.genericError.description");return e.response.data.description?t=e.response.data.description:e.response.data.detail&&(t=e.response.data.detail),void Z((0,w.V_)({description:t,level:I.QU.ERROR,message:M("users:notifications.deleteUser.error.message")}))}}))).finally((function(){$(!1),G(void 0),V(!1)}))},closeOnDimmerClick:!1},O.createElement(U.cV.Header,{"data-testid":"".concat(z,"-confirmation-modal-header"),"data-componentid":"".concat(z,"-confirmation-modal-header")},M("user:deleteUser.confirmationModal.header")),O.createElement(U.cV.Message,{"data-testid":"".concat(z,"-confirmation-modal-message"),attached:!0,negative:!0},M("user:deleteUser.confirmationModal.message")),O.createElement(U.cV.Content,{"data-testid":"".concat(z,"-confirmation-modal-content"),"data-componentid":"".concat(z,"-confirmation-modal-content")},Q&&null!==(a=Q[me.k.scim.systemSchema])&&void 0!==a&&a.userSourceId?M("user:deleteJITUser.confirmationModal.content"):M("user:deleteUser.confirmationModal.content"))))};Ae.defaultProps={selection:!0,showListItemActions:!0,showMetaContent:!0};var ke=n(81908),Te=n(52514),Le=n(5315),Ne=n(87172),Pe=n(82861),_e=n(96236),xe=n(8976),ze=n(77139),Me=n(6894),Ze=n(12380),je=n(12252),We=n(17028),De=n(917),Fe=n(54274),Ve=n(39203),He=n(29494),Qe=n(33839),Ge=n(76004),Ke=n.n(Ge),Be=n(64157),$e=n(89141),Xe=n(10909),Ye=n(77757),qe=n(78768),Je=n(6643),et=n(15551),tt=n(39976),nt=n(65471);function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var it=function(e){var t=e.responseList,n=e.isLoading,r=e.bulkResponseSummary,a=e.hasError,i=e.successAlert,l=e["data-componentid"],c=rt((0,O.useState)(!1),2),d=c[0],m=c[1],p=rt((0,O.useState)(""),2),f=p[0],v=p[1],g=rt((0,O.useState)(oe.IC.ALL),2),h=g[0],b=g[1],y=rt((0,O.useState)([]),2),E=y[0],S=y[1],I=rt((0,O.useState)(oe.tr.USER_CREATION),2),w=I[0],C=I[1],k=rt((0,O.useState)(0),2),T=k[0],P=k[1],_=(0,R.$)().t,x=r.failedUserCreation+r.successUserCreation,z=r.failedUserAssignment+r.successUserAssignment,M=u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,Z=[{key:0,text:"All",value:oe.IC.ALL},{key:1,text:_("user:modals.bulkImportUserWizard.wizardSummary.tableStatus.success"),value:oe.IC.SUCCESS},{key:2,text:_("user:modals.bulkImportUserWizard.wizardSummary.tableStatus.failed"),value:oe.IC.FAILED}],j=[{key:0,text:_("user:modals.bulkImportUserWizard.wizardSummary.responseOperationType.userCreation"),value:oe.tr.USER_CREATION},{key:1,text:_("user:modals.bulkImportUserWizard.wizardSummary.responseOperationType.roleAssignment"),value:oe.tr.ROLE_ASSIGNMENT}];(0,O.useEffect)((function(){W()}),[t]),(0,O.useEffect)((function(){Q(),b(oe.IC.ALL),W()}),[w]);var W=function(){var e=t.filter((function(e){return e.operationType===w}));S(e)};(0,O.useEffect)((function(){!function(){var e=null==t?void 0:t.filter((function(e){return(null==e?void 0:e.operationType)===w}));if(f&&""!==f){var n=rt(f.split(" "),3),r=n[1],a=n[2];e=e.filter((function(e){var t,n,i;if(h!==oe.IC.ALL&&e.statusCode!==h)return!1;switch(r){case"sw":return null===(t=e.resourceIdentifier)||void 0===t?void 0:t.startsWith(a);case"ew":return null===(n=e.resourceIdentifier)||void 0===n?void 0:n.endsWith(a);case"co":return null===(i=e.resourceIdentifier)||void 0===i?void 0:i.includes(a);case"eq":return e.resourceIdentifier===a;default:return!1}}))}h!==oe.IC.ALL&&(e=e.filter((function(e){return e.statusCode===h&&e.operationType===w}))),S(e)}()}),[f,h]);var D,F,V,H,Q=function(){m(!d),v("")},G=function(e,t){var n=j.find((function(e){return e.key===t}));n&&(C(n.value),P(t))},K=w===oe.tr.USER_CREATION?[{key:0,text:_("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"}]:[{key:1,text:_("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),value:"roleName"}];return O.createElement(O.Fragment,null,O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},n||a?null:0===r.failedUserCreation&&0===r.failedUserAssignment?null!=i?i:O.createElement(Ne.Z,{severity:"success","data-componentid":"".concat(l,"-success-alert")},O.createElement(et.Z,{"data-componentid":"".concat(l,"-success-alert-title")},_("user:modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.message")),_("user:modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.description")):O.createElement(Ne.Z,{severity:"error","data-componentid":"".concat(l,"-error-alert")},O.createElement(et.Z,{"data-componentid":"".concat(l,"-error-alert-title")},_("user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.message")),0!==r.failedUserCreation&&O.createElement("li",null,O.createElement(A.c,{i18nKey:"user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.userCreation",tOptions:{failedUserCreationCount:r.failedUserCreation}},"Issues encountered in",O.createElement("b",null,r.failedUserCreation," user creations"),".")),0!==r.failedUserAssignment&&O.createElement("li",null,O.createElement(A.c,{i18nKey:"user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.groupAssignment",tOptions:{failedUserAssignmentCount:r.failedUserAssignment}},"Issues encountered in",O.createElement("b",null,r.failedUserAssignment," group assignments"),". Users in the affected groups were created but not assigned. Please navigate to User Management section to review  and assign groups to the users."))))),O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},O.createElement(nt.Z,{value:T,onChange:G,"component-id":"".concat(l,"-operation-type-tab")},j.map((function(e){return O.createElement(tt.Z,{key:e.key,label:O.createElement("div",{className:"beta-feature-tab-item"},O.createElement(ze.Z,{sx:{fontWeight:500}},e.text)),"data-componentid":"".concat(l,"-").concat(e.value,"-tab")})}))))),O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},O.createElement(U.PS,{advancedSearch:O.createElement(o.n,{onFilter:function(e){v(e),e||W()},filterAttributeOptions:K,filterAttributePlaceholder:w===oe.tr.USER_CREATION?_("users:advancedSearch.form.dropdown.filterAttributeOptions.username"):_("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),filterConditionsPlaceholder:_("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:_("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:w===oe.tr.USER_CREATION?_("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByUsername"):_("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByGroup"),defaultSearchAttribute:"resourceName",defaultSearchOperator:"co",triggerClearQuery:d,"data-testid":"".concat(l,"-advanced-search"),"data-componentid":"".concat(l,"-advanced-search")}),rightActionPanel:O.createElement(O.Fragment,null,O.createElement(L.Z,{"data-testid":"".concat(l,"-filter-status-dropdown"),"data-componentid":"".concat(l,"-filter-status-dropdown"),selection:!0,options:Z,onChange:function(e,t){var n=t.value;b(n),m(!d)},value:h,disabled:(D=w===oe.tr.USER_CREATION,F=w===oe.tr.ROLE_ASSIGNMENT,V=0===r.failedUserCreation||0===r.successUserCreation,H=0===r.failedUserAssignment||0===r.successUserAssignment,D&&V||F&&H)})),showPagination:!1,showTopActionPanel:!0,totalPages:Math.ceil(x/M),totalListSize:x,isLoading:n,listItemLimit:u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,"data-testid":"".concat(l,"-list-layout"),"data-componentid":"".concat(l,"-list-layout"),onPageChange:function(){return null},disableRightActionPanel:!1},O.createElement(ze.Z,{variant:"body2",style:{textAlign:"right"}},w===oe.tr.USER_CREATION?_("user:modals.bulkImportUserWizard.wizardSummary.totalUserCreationCount")+" : "+x:_("user:modals.bulkImportUserWizard.wizardSummary.totalUserAssignmentCount")+" : "+z),O.createElement(U.wQ,{className:"addon-field-wrapper",isLoading:n,actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"resourceIdentifier",id:"resourceIdentifier",key:"resourceIdentifier",render:function(e){return O.createElement(ae.Z,{as:"h6","data-componentid":"".concat(l,"-username-item-heading")},O.createElement(ae.Z.Content,null,e.resourceIdentifier))},title:_("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.username")},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return O.createElement(ae.Z,{as:"h6","data-componentid":"".concat(l,"-status-item-heading")},O.createElement(ae.Z.Content,null,O.createElement(N.Z,{"data-componentid":"".concat(l,"-bulk-label"),content:e.status,size:"small",color:e.statusCode===oe.IC.SUCCESS?"green":"red",className:"group-label"})))},title:_("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.status")},{allowToggleVisibility:!1,dataIndex:"message",id:"message",key:"message",render:function(e){return O.createElement(ae.Z,{as:"h6","data-componentid":"".concat(l,"-status-item-heading")},O.createElement(ae.Z.Content,null,e.message))},title:_("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.message")}],data:E,onColumnSelectionChange:function(){return null},onRowClick:function(){return null},placeholders:O.createElement(U.$J,{"data-testid":"".concat(l,"-empty-search-result"),"data-componentid":"".concat(l,"-empty-search-result"),action:f?O.createElement(U.Qj,{onClick:Q},_("users:usersList.search.emptyResultPlaceholder.clearButton")):null,image:(0,s.jF)().emptySearch,imageSize:"tiny",title:_("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[_("users:usersList.search.emptyResultPlaceholder.subTitle.0",{query:f||h}),_("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}),transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(l,"-data-table"),"data-componentid":"".concat(l,"-data-table"),loadingStateOptions:{count:u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"}})))))};function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},st.apply(null,arguments)}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ot(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ot(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dt(e){return function(e){if(Array.isArray(e))return bt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ht(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ht(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function pt(){pt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new T(r||[]);return a(o,"_invoke",{value:O(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var m="suspendedStart",p="suspendedYield",f="executing",v="completed",g={};function h(){}function b(){}function y(){}var E={};u(E,o,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(L([])));I&&I!==n&&r.call(I,o)&&(E=I);var w=y.prototype=h.prototype=Object.create(E);function U(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,i,o,s){var l=d(e[a],e,i);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==ot(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function O(t,n,r){var a=m;return function(i,o){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var l=R(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=f;var u=d(t,n,r);if("normal"===u.type){if(a=r.done?v:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function R(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ot(t)+" is not iterable")}return b.prototype=y,a(w,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:b,configurable:!0}),b.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},U(C.prototype),u(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new C(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},U(w),u(w,l,"Generator"),u(w,o,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return s.type="throw",s.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function ft(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function vt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ft(i,r,a,o,s,"next",e)}function s(e){ft(i,r,a,o,s,"throw",e)}o(void 0)}))}}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||ht(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){if(e){if("string"==typeof e)return bt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(e,t):void 0}}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}it.defaultProps={isLoading:!1,responseList:[]};var yt="identity/askPassword",Et="Data validation error",St="TIMEOUT_ERROR",It="addresses#home",wt="addresses",Ut="bulkId",Ct=function(e){var t=e.closeWizard,n=e.userstore,a=e["data-componentid"],i=(0,R.$)().t,o=(0,b.z)().isSubOrganization,u=(0,De.Z)().UIConfig,d=(0,S.Z)(),m=d.isLoading,f=d.isUserStoreReadOnly,v=d.userStoresList,g=(0,k.I0)(),h=gt((0,O.useState)(null),2),y=h[0],C=h[1],N=gt((0,O.useState)(),2),_=N[0],z=N[1],M=gt((0,O.useState)(!1),2),Z=M[0],j=M[1],W=gt((0,O.useState)(!1),2),D=W[0],F=W[1],V=gt((0,O.useState)(!1),2),H=V[0],Q=V[1],G=gt((0,O.useState)([]),2),K=G[0],B=G[1],$=gt((0,O.useState)([]),2),X=$[0],Y=$[1],q=gt((0,O.useState)(!1),2),J=q[0],ee=q[1],te=gt((0,O.useState)(!1),2),ne=te[0],re=te[1],ae=gt((0,O.useState)(Ot),2),ie=ae[0],le=ae[1],ue=gt((0,O.useState)(Ot),2),ce=ue[0],de=ue[1],me=gt((0,O.useState)(se.Wv.MANUAL),2),pe=me[0],fe=me[1],ve=gt((0,O.useState)(),2),ge=ve[0],he=ve[1],be=gt((0,O.useState)(!1),2),ye=be[0],Ee=be[1],Se=gt((0,O.useState)(""),2),Ie=Se[0],we=Se[1],Ue=gt((0,O.useState)(),2),Ce=Ue[0],Oe=Ue[1],Re=gt((0,U.IK)({"data-componentid":"".concat(a,"-alert")}),3),Ae=Re[0],ke=Re[1],Ge=Re[2],et=gt((0,U.IK)({"data-componentid":"".concat(a,"-manual-invite-alert")}),3),tt=et[0],nt=et[1],rt=et[2],at=gt((0,O.useState)([]),2),ot=at[0],lt=at[1],ft=gt((0,O.useState)(null!=n?n:p.wO.primaryUserstoreName),2),ht=ft[0],bt=ft[1],Ct=gt((0,O.useState)(!1),2),Rt=Ct[0],At=Ct[1],kt=(0,Qe.Wf)().data,Tt=(0,U.fQ)().getLink,Lt=(0,Je.t$)(kt),Nt="true"===(null==Lt?void 0:Lt.enableValidator),Pt=(0,k.v9)((function(e){return e.config.ui.features.bulkUserImport.fileImportTimeout})),_t=(0,k.v9)((function(e){return e.config.ui.features.bulkUserImport.userLimit})),xt=(0,k.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),zt=(0,O.useMemo)((function(){return new U.Wc(void 0,p.x8.bulkUserImportLimit.fileSize*U.Wc.KILOBYTE,_t||p.x8.bulkUserImportLimit.userCount)}),[_t]),Mt=[],Zt=(0,Ve.Ug)(null,null,null,ht,"members"),jt=Zt.data,Wt=Zt.error,Dt=(0,Ze.Z)({"exclude-identity-claims":!0,filter:null,limit:null,offset:null,sort:null}),Ft=Dt.data,Vt=Dt.error,Ht=Dt.isLoading;(0,O.useEffect)((function(){Vt&&g((0,w.V_)({description:i("claims:local.notifications.getClaims.genericError.description"),level:I.QU.ERROR,message:i("claims:local.notifications.getClaims.genericError.message")}))}),[Vt]),(0,O.useEffect)((function(){var e,t,n,r,a,o;Wt&&g((0,w.V_)({description:null!==(e=null!==(t=null==Wt||null===(n=Wt.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:null==Wt||null===(r=Wt.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)&&void 0!==e?e:i("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:I.QU.ERROR,message:null!==(a=null==Wt||null===(o=Wt.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)&&void 0!==a?a:i("console:manage.features.groups.notifications.fetchGroups.genericError.message")}))}),[Wt]),(0,O.useEffect)((function(){var e=[{key:-1,text:p.wO.primaryUserstoreName,value:p.wO.primaryUserstoreName}];(null==v?void 0:v.length)>0&&v.forEach((function(t,n){var r=f(t.name);!t.enabled||r||!Bt(t)||null!=xt&&xt.includes(null==t?void 0:t.name)||e.push({key:n,text:t.name,value:t.name})})),lt(e)}),[m,v]);var Qt=(0,He.Z)(n.toLowerCase()).data,Gt=(0,O.useMemo)((function(){var e;if(Qt)return null==Qt||null===(e=Qt.properties)||void 0===e||null===(e=e.find((function(e){return e.name===E.y8.UsernameRegEx})))||void 0===e?void 0:e.value}),[Qt]),Kt=(0,O.useMemo)((function(){if(Ft&&!Ht){var e=null==Ft?void 0:Ft.find((function(e){return(null==e?void 0:e[je.QN.CLAIM_URI_ATTRIBUTE_KEY])===je.QN.EMAIL_CLAIM_URI}));return null==e?void 0:e.regEx}}),[Ft]),Bt=function(e){var t;return!(null!==(t=e.properties)&&void 0!==t&&t.some((function(e){var t,n;return[E.u4.USER_STORE_PROPERTY_BULK_IMPORT_SUPPORTED.toLowerCase(),E.u4.USER_STORE_PROPERTY_IS_BULK_IMPORT_SUPPORTED.toLowerCase()].includes(null==e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase())&&"false"===(null==e||null===(n=e.value)||void 0===n?void 0:n.toLowerCase())})))},$t=function(){return null===p.x8||void 0===p.x8||!p.x8.enableBulkImportSecondaryUserStore||(ot?0===(null==ot?void 0:ot.length)||1===(null==ot?void 0:ot.length)&&(null===(e=ot[0])||void 0===e?void 0:e.value)===n:void 0);var e},Xt=function(){var e=vt(pt().mark((function e(){var t,n,r;return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Ve.hI)(ht);case 3:return n=e.sent,r=null==n||null===(t=n.data)||void 0===t||null===(t=t.Resources)||void 0===t?void 0:t.reduce((function(e,t){return e[null==t?void 0:t.displayName.toLowerCase()]={displayName:null==t?void 0:t.displayName,id:null==t?void 0:t.id,members:[]},e}),{}),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),j(!0),g((0,w.V_)({description:i("users:notifications.bulkImportUser.submit.genericError.description"),level:I.QU.ERROR,message:i("users:notifications.bulkImportUser.submit.genericError.message")}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(0,O.useEffect)((function(){fe(Nt&&null!==p.x8&&void 0!==p.x8&&p.x8.enableUsernameValidation?se.Wv.META_FILE:se.Wv.MANUAL)}),[Nt]);var Yt,qt=function(){var e=vt(pt().mark((function e(){var t,n,r,a,o,s,l,u,c,d,m;return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.prev=1,e.next=4,(0,Me.Pq)();case 4:t=e.sent,n=null==t?void 0:t.Resources,a=mt(n);try{for(a.s();!(o=a.n()).done;)"User"===(null==(s=o.value)?void 0:s.id)&&(l=null==s?void 0:s.schemaExtensions,(r=l.map((function(e){return e.schema}))).push(null==s?void 0:s.schema))}catch(p){a.e(p)}finally{a.f()}return e.next=10,(0,Me.jp)({});case 10:return u=e.sent,c=u.filter((function(e){return r.includes(e.dialectURI)})),e.abrupt("return",c);case 15:e.prev=15,e.t0=e.catch(1),j(!0),g((0,w.V_)({description:(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d||null===(d=d.data)||void 0===d?void 0:d.description)||i("claims:dialects.notifications.fetchDialects.genericError.description"),level:I.QU.ERROR,message:(null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(m=m.data)||void 0===m?void 0:m.message)||i("claims:dialects.notifications.fetchDialects.genericError.message")}));case 19:return e.prev=19,Q(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),Jt=function(){var e=vt(pt().mark((function e(){var t,n,r,a,o,s;return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push((0,Me.gR)(e.id,null))})),e.prev=5,Q(!0),e.next=9,Ke().all(n);case 9:return r=e.sent,a=[],r.forEach((function(e){var t=e.map((function(e){return{attributeName:null==e?void 0:e.mappedLocalClaimURI.replace(oe._F.WSO2_LOCAL_CLAIM_DIALECT+"/","").toLowerCase(),mappedLocalClaimURI:null==e?void 0:e.mappedLocalClaimURI,mappedSCIMAttributeURI:null==e?void 0:e.claimURI,mappedSCIMClaimDialectURI:null==e?void 0:e.claimDialectURI}}));a.push.apply(a,dt(t))})),e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(5),j(!0),g((0,w.V_)({description:(null===(o=e.t0[0])||void 0===o||null===(o=o.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description)||i("claims:dialects.notifications.fetchExternalClaims.genericError.description"),level:I.QU.ERROR,message:(null===(s=e.t0[0])||void 0===s||null===(s=s.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)||i("claims:dialects.notifications.fetchExternalClaims.genericError.message")}));case 19:return e.prev=19,Q(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),en=function(e){return 0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},tn=function(e){return 0===e.length},nn=function(e){return!e||""===e.trim()},rn=function(e){ke({description:i("users:notifications.bulkImportUser.validation.".concat(e.descriptionKey),e.descriptionValues||{}),level:I.QU.ERROR,message:i("users:notifications.bulkImportUser.validation.".concat(e.messageKey))})},an=function(e,t){var n,r=e.headers,a=e.items,i=Nt?Object.values(oe.NS):[oe.NS.USERNAME],o=function(e,t){return t.filter((function(t){return!e.some((function(e){return e.toLowerCase()===t.toLowerCase()}))}))}(r,i),s=(n=r.reduce((function(e,t){var n=t.toLowerCase();return e[n]=(e[n]||0)+1,e}),{}),Object.keys(n).filter((function(e){return n[e]>1}))),l=Object.values(oe.GU),u=function(e,t){return e.filter((function(e){return t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(r,l),c=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(r,t),d=function(e){return e.map((function(e,t){return nn(e)?t:-1})).filter((function(e){return-1!==e}))}(r);return!!function(e){var t,n=mt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!r.check())return rn(r.error),!1}}catch(a){n.e(a)}finally{n.f()}return!0}([{check:function(){return!(tn(r)||tn(a))},error:{descriptionKey:"emptyRowError.description",messageKey:"emptyRowError.message"}},{check:function(){return a.every((function(e){return e.length===r.length}))},error:{descriptionKey:"columnMismatchError.description",messageKey:"columnMismatchError.message"}},{check:function(){return 0===d.length},error:{descriptionKey:"emptyHeaderError.description",messageKey:"emptyHeaderError.message"}},{check:function(){return 0===o.length},error:{descriptionKey:"missingRequiredHeaderError.description",descriptionValues:{headers:en(o)},messageKey:"missingRequiredHeaderError.message"}},{check:function(){return 0===u.length},error:{descriptionKey:"blockedHeaderError.description",descriptionValues:{headers:en(u)},messageKey:"blockedHeaderError.message"}},{check:function(){return 0===s.length},error:{descriptionKey:"duplicateHeaderError.description",descriptionValues:{headers:en(s)},messageKey:"duplicateHeaderError.message"}},{check:function(){return 0===c.length},error:{descriptionKey:"invalidHeaderError.description",descriptionValues:{headers:en(c)},messageKey:"invalidHeaderError.message"}}])},on=function(e,t){var n=e.map((function(e){return t.find((function(t){return e.toLowerCase()===t.attributeName.toLowerCase()}))})).filter(Boolean);return n.push(t.find((function(e){return e.attributeName.toLowerCase()===yt.toLowerCase()}))),n},sn=function(e){j(!0),rn({descriptionKey:"emptyDataField.description",descriptionValues:{dataField:e},messageKey:"emptyDataField.message"})},ln=function(e,t,n){var r,a={},o=new Set([oe._F.SCIM2_USER_SCHEMA]),s="",l=mt(t);try{var u=function(){var t=r.value,l=t.mappedSCIMAttributeURI.replace("".concat(t.mappedSCIMClaimDialectURI,":"),""),u=e[n.indexOf(t.attributeName.toLowerCase())],c=l.includes("#");if(t.attributeName===oe._F.ROLES||t.attributeName===oe._F.GROUPS)return 0;if(l===oe.NS.USERNAME){if(s=u,nn(u))throw sn(t.attributeName),new Error(Et);return a[oe.NS.USERNAME]=ht&&ht.toLowerCase()!==(null===E.pH||void 0===E.pH?void 0:E.pH.toLowerCase())?"".concat(ht,"/").concat(u):u,0}if(t.attributeName===oe.NS.EMAILADDRESS){if(!Nt)return 0;if(nn(u))throw sn(t.attributeName),new Error(Et);if(!Ht&&!Fe.w.validateInputAgainstRegEx(u,Kt))throw ke({description:i("user:forms.addUserForm.inputs.email.validations.invalid"),level:I.QU.ERROR,message:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage")}),new Error(Et)}if(t.attributeName.toLowerCase()===yt.toLowerCase())return a[t.mappedSCIMClaimDialectURI]=ut(ut({},a[t.mappedSCIMClaimDialectURI]||{}),{},ct({},l,"true")),0;var d=Object.values(oe.DD).find((function(e){return l.includes(e)}));if(!c&&d){var m=l.includes(d+".")?{type:l.split(".")[1],value:u}:{primary:!0,value:u};return a[d]=a[d]||[],a[d].push(m),0}if(l.includes(It))return a[wt]=a[wt]||[],a[wt].push(ct({type:"home"},l.replace("".concat(It,"."),""),u)),0;o.add(t.mappedSCIMClaimDialectURI);var p=c?l.split("#")[0]:l;if(!p.includes(".")){var f=t.mappedSCIMClaimDialectURI===oe._F.SCIM2_USER_SCHEMA?a:a[t.mappedSCIMClaimDialectURI]||(a[t.mappedSCIMClaimDialectURI]={});return f[p]=c?(f[p]||[]).concat(u):u,0}if(p.includes(".")){var v=gt(p.split("."),2),g=v[0],h=v[1],b=t.mappedSCIMClaimDialectURI===oe._F.SCIM2_USER_SCHEMA?a:a[t.mappedSCIMClaimDialectURI]||(a[t.mappedSCIMClaimDialectURI]={});return c?b[g]=(b[g]||[]).concat(ct({},h,u)):(b[g]||(b[g]={}),b[g][h]=u),0}};for(l.s();!(r=l.n()).done;)u()}catch(c){l.e(c)}finally{l.f()}return Nt||(a[oe.DD.Emails]=[{primary:!0,value:s}]),ut({schema:Array.from(o)},a)},un=function(e,t,n,r){var a=(0,qe.Z)(),i="".concat(Ut,":").concat(e[n.indexOf(oe.NS.USERNAME.toLowerCase())],":").concat(a),o=e[n.indexOf(oe.NS.USERNAME.toLowerCase())],s=ut({},r);if(n.includes(oe._F.GROUPS)){var l=e[n.indexOf(oe._F.GROUPS)].split("|");dt(new Set(l)).forEach((function(e){if(!nn(e)){var t=ht&&ht.toLowerCase()!==(null===E.pH||void 0===E.pH?void 0:E.pH.toLowerCase())?"".concat(ht,"/").concat(e):e;if(!(t.toLowerCase()in r))throw rn({descriptionKey:"invalidGroup.description",descriptionValues:{group:t},messageKey:"invalidGroup.message"}),new Error(Et);s=cn(t,{display:o,value:"bulkId:".concat(i)},s)}}))}var u={bulkId:i,data:ln(e,t,n),method:I.f2.POST,path:oe._F.SCIM_USER_PATH};return{newGroupMemberAssociations:s,userOperation:u}},cn=function(e,t,n){var r=ut({},n),a=r[e.toLowerCase()];return r[e.toLowerCase()]=ut(ut({},a),{},{members:Array.from(new Set([].concat(dt(a.members),[t])))}),r},dn=function(e){var t=(0,qe.Z)();return Object.values(e).filter((function(e){return e.members.length>0})).map((function(e){return{bulkId:"".concat(Ut,":").concat(e.displayName,":").concat(t),data:{Operations:[{op:"add",value:{members:e.members.map((function(e){return{display:e.display,value:e.value}}))}}]},method:I.f2.PATCH,path:"".concat(oe._F.SCIM_GROUP_PATH,"/").concat(e.id)}}))},mn=function(){var e=vt(pt().mark((function e(t){var n,r,a,i,o,s,l,u,c,d;return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.headers.map((function(e){return e.toLowerCase()})),r=_.items,a=on(n,t),e.next=5,Xt();case 5:for(i=e.sent,o=[],s=[],l=0;l<r.length;l++)u=r[l],c=un(u,a,n,i),o.push(c.userOperation),i=c.newGroupMemberAssociations;return n.includes(oe._F.GROUPS)&&(s=dn(i)),d=o.concat(s),e.abrupt("return",{Operations:d,failOnErrors:0,schemas:[oe._F.BULK_REQUEST_SCHEMA]});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pn=function(){var e=[],t=[],n=(0,qe.Z)();return null==ge||ge.map((function(r){var a=ct({emails:[{primary:!0,value:r}],schemas:["urn:ietf:params:scim:schemas:core:2.0:User","urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"],userName:ht.toLowerCase()!==(null===E.pH||void 0===E.pH?void 0:E.pH.toLowerCase())?"".concat(ht,"/").concat(r):r},oe._F.SYSTEMSCHEMA,{askPassword:"true"}),i={bulkId:"bulkId:".concat(r,":").concat(n),data:a,method:I.f2.POST,path:oe._F.SCIM_USER_PATH},o={display:r,value:"bulkId:bulkId:".concat(r,":").concat(n)};t.push(o),e.push(i)})),null==Ce||Ce.map((function(r){var a={Operations:[{op:"add",value:{members:t}}]},i={bulkId:"bulkId:".concat(null==r?void 0:r.displayName,":").concat(n),data:a,method:I.f2.PATCH,path:"".concat(oe._F.SCIM_GROUP_PATH,"/").concat(null==r?void 0:r.id)};e.push(i)})),{Operations:e,failOnErrors:0,schemas:[oe._F.BULK_REQUEST_SCHEMA]}},fn=function(){var e=vt(pt().mark((function e(){var t,n,r;return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pn(),e.prev=1,e.next=4,(0,P.er)(t);case 4:if(n=e.sent,re(!0),200===n.status){e.next=8;break}throw new Error("Failed to import users.");case 8:r=n.data.Operations.map(hn),Y(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),j(!0),nt({description:i("users:notifications.bulkImportUser.submit.genericError.description"),level:I.QU.ERROR,message:i("users:notifications.bulkImportUser.submit.genericError.message")});case 16:return e.prev=16,F(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(){return e.apply(this,arguments)}}(),vn=function(){var e=vt(pt().mark((function e(){var t,n,r,a,o,s,l;return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.prev=1,e.next=4,Jt();case 4:if(t=e.sent,n=t.map((function(e){return e.attributeName})),an(_,n)){e.next=10;break}return j(!0),F(!1),e.abrupt("return");case 10:return e.next=12,mn(t);case 12:return r=e.sent,ee(!0),a=(0,P.er)(r),o=new Promise((function(e,t){setTimeout((function(){return t(new Error(St))}),Pt||6e4)})),e.next=18,Promise.race([a,o]);case 18:if(200===(s=e.sent).status){e.next=21;break}throw new Error("Failed to import users.");case 21:l=s.data.Operations.map(gn),B(l),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),j(!0),e.t0.message===St?(At(!0),ke({description:i("users:notifications.bulkImportUser.timeOut.description"),level:I.QU.WARNING,message:i("users:notifications.bulkImportUser.timeOut.message")})):e.t0.message!==Et&&ke({description:i("users:notifications.bulkImportUser.submit.genericError.description"),level:I.QU.ERROR,message:i("users:notifications.bulkImportUser.submit.genericError.message")});case 29:return e.prev=29,Q(!1),F(!1),e.finish(29);case 33:case"end":return e.stop()}}),e,null,[[1,25,29,33]])})));return function(){return e.apply(this,arguments)}}(),gn=function(e){var t,n,r=null==e?void 0:e.bulkId.split(":")[1],a=null==e||null===(t=e.status)||void 0===t?void 0:t.code,o=oe.tr.USER_CREATION,s=i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),l={};(null==e?void 0:e.method)===I.f2.POST?l={201:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(n=e.response)&&void 0!==n&&n.includes(oe._F.USERNAME_REGEX_ERROR_CODE)?i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===I.f2.PATCH&&(o=oe.tr.ROLE_ASSIGNMENT,l={200:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:r}),400:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:r}),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:r})});le((function(t){var n=(null==e?void 0:e.method)===I.f2.PATCH&&200===a?t.successUserAssignment+1:t.successUserAssignment,r=(null==e?void 0:e.method)===I.f2.PATCH&&200!==a?t.failedUserAssignment+1:t.failedUserAssignment,i=(null==e?void 0:e.method)!==I.f2.POST||201!==a&&202!==a?t.successUserCreation:t.successUserCreation+1,o=(null==e?void 0:e.method)===I.f2.POST&&201!==a&&202!==a?t.failedUserCreation+1:t.failedUserCreation;return ut(ut({},t),{},{failedUserAssignment:r,failedUserCreation:o,successUserAssignment:n,successUserCreation:i})}));var u=oe.IC.FAILED;return 201!==a&&202!==a&&200!==a||(u=oe.IC.SUCCESS),{message:l[a]||s,operationType:o,resourceIdentifier:r,status:bn(a),statusCode:u}},hn=function(e){var t,n,r=null==e?void 0:e.bulkId.split(":")[1],a=null==e||null===(t=e.status)||void 0===t?void 0:t.code,o=oe.tr.USER_CREATION,s=i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),l={};(null==e?void 0:e.method)===I.f2.POST?l={201:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(n=e.response)&&void 0!==n&&n.includes(oe._F.USERNAME_REGEX_ERROR_CODE)?i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===I.f2.PATCH&&(o=oe.tr.ROLE_ASSIGNMENT,l={200:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:r}),400:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:r}),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:r})});de((function(t){var n=(null==e?void 0:e.method)===I.f2.PATCH&&200===a?t.successUserAssignment+1:t.successUserAssignment,r=(null==e?void 0:e.method)===I.f2.PATCH&&200!==a?t.failedUserAssignment+1:t.failedUserAssignment,i=(null==e?void 0:e.method)!==I.f2.POST||201!==a&&202!==a?t.successUserCreation:t.successUserCreation+1,o=(null==e?void 0:e.method)===I.f2.POST&&201!==a&&202!==a?t.failedUserCreation+1:t.failedUserCreation;return ut(ut({},t),{},{failedUserAssignment:r,failedUserCreation:o,successUserAssignment:n,successUserCreation:i})}));var u=oe.IC.FAILED;return 201!==a&&202!==a&&200!==a||(u=oe.IC.SUCCESS),{message:l[a]||s,operationType:o,resourceIdentifier:r,status:bn(a),statusCode:u}},bn=function(e){return i(201===e||200===e?"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.success":202===e?"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.warning":"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.failed")},yn=function(){return O.createElement(Ye.Z.Field,{required:!0},O.createElement(_e.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"spacing-bottom","data-componentid":"".concat(a,"-userstore-label")},i("user:forms.addUserForm.inputs.domain.label")),O.createElement(L.Z,{className:"mt-2",fluid:!0,selection:!0,labeled:!0,options:ot,loading:!1,"data-testid":"".concat(a,"-userstore-dropdown"),"data-componentid":"".concat(a,"-userstore-dropdown"),name:"userstore",disabled:!1,readOnly:!1,value:ht,onChange:function(e,t){bt(t.value.toString())},tabIndex:1,maxLength:60}))},En=function(){return c.m.push(l.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",je.QN.SCIM))};return O.createElement(We.wv,{"data-testid":a,"data-componentid":a,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},O.createElement(We.wv.MainPanel,null,O.createElement(We.wv.Header,{className:"wizard-header"},i("user:modals.bulkImportUserWizard.title"),O.createElement(U.X6,{as:"h6"},i("user:modals.bulkImportUserWizard.subTitle"),O.createElement(U.eb,{link:Tt("manage.users.bulkUsers.learnMore")},i("common:learnMore")))),O.createElement(We.wv.Content,{className:"content-container"},O.createElement($e.Z,null,O.createElement(O.Fragment,null,O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,null,O.createElement(U.v0,{icon:"mail",content:i("user:modals.bulkImportUserWizard.wizardSummary.inviteEmailInfo"),hideDefaultIcon:!0})))),O.createElement($e.Z.Row,null,O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},O.createElement(Xe.Z.Group,{size:"large",labeled:!0,basic:!0},Object.values(se.Wv).map((function(e,t){return O.createElement(O.Fragment,null,O.createElement(U.GI,{trigger:O.createElement("div",{className:"inline-button"},O.createElement(Xe.Z,{disabled:Nt&&e===se.Wv.MANUAL&&(null===p.x8||void 0===p.x8?void 0:p.x8.enableUsernameValidation),"data-componentid":"".concat(a,"-").concat(e,"-tab-option"),key:t,active:pe===e,className:"multiple-users-config-mode-wizard-tab",content:Je.QH.resolveMultipleInvitesDisplayName(e),onClick:function(t){t.preventDefault(),fe(e)}})),content:i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.disabledHint"),size:"mini",wide:!0,disabled:e===se.Wv.META_FILE||!Nt||!(null!==p.x8&&void 0!==p.x8&&p.x8.enableUsernameValidation),"data-componentid":"".concat(a,"-disabled-hint")}))}))))),pe==se.Wv.MANUAL?O.createElement(O.Fragment,null,tt&&O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},rt)),ne?O.createElement(O.Fragment,null,tt&&O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},rt)),O.createElement(it,{isLoading:D,"data-componentid":"".concat(a,"-manual-response-list"),hasError:Z,responseList:X,bulkResponseSummary:ce,successAlert:O.createElement(Ne.Z,{severity:"success","data-componentid":"".concat(a,"-success-alert")},O.createElement(Le.Z,{"data-componentid":"".concat(a,"-success-alert-title")},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.message")),i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.description"))})):O.createElement(O.Fragment,null,!(null!==p.x8&&void 0!==p.x8&&p.x8.enableBulkImportSecondaryUserStore)&&O.createElement($e.Z.Row,{columns:1,className:"mb-0 pb-0"},O.createElement($e.Z.Column,{mobile:16},O.createElement(Ne.Z,{severity:"info"},O.createElement(A.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.userstoreMessage",tOptions:{userstore:(0,Be.Z)(n)}},"The created users will be added to the ",O.createElement("b",null,(0,Be.Z)(n))," user store.")))),!$t()&&O.createElement($e.Z.Row,{columns:1,className:"mb-0 pb-0"},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},yn())),O.createElement(Te.Z,{size:"small",limitTags:p.x8.bulkUserImportLimit.inviteEmails,fullWidth:!0,multiple:!0,id:"tags-filled",options:Mt.map((function(e){return e})),defaultValue:[],freeSolo:!0,renderTags:function(e,t){return e.map((function(e,n){return O.createElement(r.Z,st({key:n,size:"small",sx:{marginLeft:1},className:"oxygen-chip-beta",label:e},t({index:n})))}))},renderInput:function(e){return O.createElement(O.Fragment,null,O.createElement(_e.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(a,"-emails-label")},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsLabel")),O.createElement(xe.Z,st({id:"tags-filled",margin:"normal",error:ye,helperText:ye&&Ie,InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsPlaceholder"),"data-componentid":"".concat(a,"-email-input")})))},onChange:function(e,t){var n;he(t),n=t,(null!=u&&u.enableEmailDomain&&!Ht?Fe.w.validateInputAgainstRegEx(n[n.length-1],Gt)&&Fe.w.validateInputAgainstRegEx(n[n.length-1],Kt):Fe.w.validateInputAgainstRegEx(n[n.length-1],Kt))||(Ee(!0),we(i("users:guestUsers.fields.username.validations.regExViolation")),n.pop())},onInputChange:function(){Ee(!1)}}),O.createElement(U.kW,null,i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),O.createElement(Te.Z,{size:"small",multiple:!0,fullWidth:!0,disablePortal:!0,id:"combo-box-demo",options:null!==(Yt=null==jt?void 0:jt.Resources)&&void 0!==Yt?Yt:[],getOptionLabel:function(e){return null==e?void 0:e.displayName},renderOption:function(e,t){return O.createElement(x.Z,st({component:"li"},e),O.createElement(ze.Z,{sx:{fontWeight:500}},null==t?void 0:t.displayName))},renderInput:function(e){return O.createElement(O.Fragment,null,O.createElement(_e.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(a,"-roles-label")},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsLabel")),O.createElement(xe.Z,st({id:"tags-filled",margin:"normal",InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsPlaceholder"),"data-componentid":"".concat(a,"-roles-input")})))},onChange:function(e,t){Oe(t)},renderTags:function(e,t){return e.map((function(e,n){return O.createElement(r.Z,st({key:n,size:"small",className:"oxygen-chip-beta",label:O.createElement("label",null,null==e?void 0:e.displayName)},t({index:n})))}))}}))):pe===se.Wv.META_FILE?J?O.createElement(O.Fragment,null,Ae&&O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},Ge)),!Rt&&O.createElement(it,{isLoading:D,"data-componentid":"".concat(a,"-response-list"),hasError:Z,responseList:K,bulkResponseSummary:ie})):O.createElement(O.Fragment,null,Ae&&O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},Ge)),!(null!==p.x8&&void 0!==p.x8&&p.x8.enableBulkImportSecondaryUserStore)&&O.createElement($e.Z.Row,{columns:1,className:"mb-0 pb-0"},O.createElement($e.Z.Column,{mobile:16},O.createElement(Ne.Z,{severity:"info"},O.createElement(A.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.userstoreMessage",tOptions:{userstore:(0,Be.Z)(n)}},"The created users will be added to the ",O.createElement("b",null,(0,Be.Z)(n))," user store.")))),!H&&!$t()&&O.createElement($e.Z.Row,{columns:1,className:"mb-0 pb-0"},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},yn())),O.createElement($e.Z.Row,{columns:1,className:"pt-0"},O.createElement($e.Z.Column,{mobile:16},O.createElement(U.GB,{key:1,fileStrategy:zt,file:y,onChange:function(e){C(e.file),z(e.serialized),ke(null),j(!1)},uploadButtonText:"Upload CSV File",dropzoneText:"Drag and drop a CSV file here.","data-testid":"".concat(a,"-form-wizard-csv-file-picker"),"data-componentid":"".concat(a,"-form-wizard-csv-file-picker"),icon:(0,s._5)().uploadPlaceholder,placeholderIcon:O.createElement(T.Z,{name:"file code",size:"huge"}),normalizeStateOnRemoveOperations:!0,emptyFileError:!1,hidePasteOption:!0}))),O.createElement(U.kW,null,i("user:modals.bulkImportUserWizard.wizardSummary.fileBased.hint"))):void 0)),O.createElement(We.wv.Actions,null,O.createElement($e.Z,null,pe==se.Wv.MANUAL?O.createElement($e.Z.Row,{column:1},O.createElement($e.Z.Column,{mobile:8,tablet:8,computer:8},O.createElement(U.Qj,{"data-testid":"".concat(a,"-close-button"),"data-componentid":"".concat(a,"-close-button"),floated:"left",onClick:function(){t(),re(!1)},disabled:D},i("common:close"))),!ne||D?O.createElement($e.Z.Column,{mobile:8,tablet:8,computer:8},O.createElement(U.KM,{"data-testid":"".concat(a,"-invite-button"),"data-componentid":"".concat(a,"-invite-button"),floated:"right",onClick:fn,loading:D,disabled:H||D||Z||!ge||0===(null==ge?void 0:ge.length)},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.primaryButton"))):null):O.createElement($e.Z.Row,{column:1},O.createElement($e.Z.Column,{mobile:8,tablet:8,computer:8},O.createElement(U.Qj,{"data-testid":"".concat(a,"-cancel-button"),"data-componentid":"".concat(a,"-cancel-button"),floated:"left",onClick:function(){t(),ee(!1)},disabled:D},i("common:close"))),!J||D?O.createElement($e.Z.Column,{mobile:8,tablet:8,computer:8},O.createElement(U.KM,{"data-testid":"".concat(a,"-finish-button"),"data-componentid":"".concat(a,"-finish-button"),floated:"right",onClick:vn,loading:D,disabled:H||D||Z||!y},i("user:modals.bulkImportUserWizard.buttons.import"))):null)))),O.createElement(We.wv.SidePanel,null,O.createElement(We.wv.Header,{className:"wizard-header help-panel-header muted"},O.createElement("div",{className:"help-panel-header-text"},i("applications:wizards.minimalAppCreationWizard.help.heading"))),O.createElement(We.wv.Content,null,O.createElement(O.Suspense,{fallback:O.createElement(U.pO,null)},O.createElement(U.X6,{as:"h5"},i("user:modals.bulkImportUserWizard.sidePanel.manual")),O.createElement("p",null,i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),O.createElement(Pe.Z,null),O.createElement(U.X6,{as:"h5"},i("user:modals.bulkImportUserWizard.sidePanel.fileBased")),O.createElement("p",null,i("user:modals.bulkImportUserWizard.wizardSummary.fileBased.hint")),O.createElement(U.X6,{as:"h6"},i("user:modals.bulkImportUserWizard.sidePanel.fileFormatTitle")),O.createElement("p",null,o()?O.createElement(A.c,{i18nKey:"user:modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to",O.createElement("b",null,"local attribute")," names."):O.createElement(A.c,{i18nKey:"user:modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to local ",O.createElement(U.rU,{onClick:En},"attribute names"),".")),O.createElement("p",null," ",i("user:modals.bulkImportUserWizard.sidePanel.fileFormatSampleHeading")),O.createElement("p",null,Nt?O.createElement("code",null,"username,givenname,emailaddress,groups",O.createElement("br",null),"user1,john,john@test.com,group1|group2",O.createElement("br",null),"user2,jake,jake@test.com,group2",O.createElement("br",null),"user3,jane,jane@test.com,group1",O.createElement("br",null)):O.createElement("code",null,"username,givenname,groups",O.createElement("br",null),"user1,john,group1|group2",O.createElement("br",null),"user2,jake,group2",O.createElement("br",null),"user3,jane,group1",O.createElement("br",null)))))))},Ot={failedUserAssignment:0,failedUserCreation:0,successUserAssignment:0,successUserCreation:0},Rt=n(47018),At=n(79438),kt=n(22557),Tt=n.n(kt),Lt=n(43392),Nt={};Nt.styleTagTransform=J(),Nt.setAttributes=$(),Nt.insert=K().bind(null,"head"),Nt.domAPI=Q(),Nt.insertStyleElement=Y();V()(Lt.Z,Nt);Lt.Z&&Lt.Z.locals&&Lt.Z.locals;function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pt.apply(null,arguments)}var _t=function(e){var t=e.onSubmit,n=e["data-componentid"],a=(0,R.$)().t,i=(0,Ve.Ug)(null,null,null,null===fe.w||void 0===fe.w?void 0:fe.w.primaryUserstoreName,"members",!0).data,o=(0,O.useMemo)((function(){var e;return(0,he.Z)(null==i?void 0:i.Resources)?[]:null==i||null===(e=i.Resources)||void 0===e?void 0:e.map((function(e){return{group:e,key:e.id,label:e.displayName}}))}),[i]);return O.createElement(At.vy,{initialValues:null,keepDirtyOnReinitialize:!0,"data-componentid":"".concat(n,"-external-form"),onSubmit:t,validate:function(e){var t={groups:void 0,username:void 0};return e.username||(t.username=a("parentOrgInvitations:addUserWizard.username.validations.required")),t},render:function(e){var t=e.handleSubmit;return O.createElement("form",{id:oe._F.INVITE_PARENT_ORG_USER_FORM_ID,onSubmit:t,className:"invite-parent-org-user-form"},O.createElement(U.v0,{type:"info",className:"add-user-info",content:a("parentOrgInvitations:addUserWizard.hint")}),O.createElement(At.SE,{fullWidth:!0,ariaLabel:"Usernames field","data-componentid":"".concat(n,"-external-form-username-input"),label:a("parentOrgInvitations:addUserWizard.username.label"),name:"username",placeholder:a("parentOrgInvitations:addUserWizard.username.placeholder"),required:!0,helperText:O.createElement(U.kW,null,O.createElement(ze.Z,{variant:"inherit"},a("parentOrgInvitations:addUserWizard.username.hint"))),component:At.KQ,options:[],renderTags:function(e,t){return e.map((function(e,n){return O.createElement(r.Z,Pt({key:n,size:"small",sx:{marginLeft:1},className:"oxygen-chip-beta",label:e},t({index:n})))}))},filterOptions:function(e,t){var n=t.inputValue;return""!==n?["".concat(n)]:[]},renderOption:function(e,t){return O.createElement("li",Pt({},e,{className:Tt()("press-enter-prompt",e.className)}),t,O.createElement("p",null,O.createElement(A.c,{i18nKey:"common:pressEnterPrompt"},"Press ",O.createElement("kbd",null,"Enter")," to select")))},multipleValues:!0,freeSolo:!0}),O.createElement(At.SE,{fullWidth:!0,multipleValues:!0,ariaLabel:"Groups field","data-componentid":"".concat(n,"-form-groups-field"),name:"groups",label:a("parentOrgInvitations:addUserWizard.groups.label"),helperText:O.createElement(U.kW,null,O.createElement(ze.Z,{variant:"inherit"},a("parentOrgInvitations:addUserWizard.groups.hint"))),placeholder:a("parentOrgInvitations:addUserWizard.groups.placeholder"),component:At.KQ,options:o,renderTags:function(e,t){return e.map((function(e,n){return O.createElement(r.Z,Pt({key:n,size:"medium",label:e.label},t({index:n})))}))}}))}})};_t.defaultProps={"data-componentid":"invite-parent-org-user"};var xt=n(69005);function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=zt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e){return function(e){if(Array.isArray(e))return Vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||Ft(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){if(e){if("string"==typeof e)return Vt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vt(e,t):void 0}}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ht=function(e){var t=e.response,n=e.isLoading,r=e.hasError,a=e["data-componentid"],i=(0,R.$)().t,o=Dt((0,O.useState)([]),2),l=o[0],c=o[1],d=Dt((0,O.useState)({failedCount:0,successCount:0,totalCount:0}),2),m=d[0],p=d[1];(0,O.useEffect)((function(){t&&(null==t?void 0:t.length)>0&&t.map((function(e){var t=i("invite:notifications.sendInvite.success.message");if(e.result.errorCode)switch(e.result.errorCode){case xt.jI.ERROR_CODE_USER_NOT_FOUND:t=i("user:modals.inviteParentUserWizard.tableMessages.userNotFound");break;case xt.jI.ERROR_CODE_ACTIVE_INVITATION_EXISTS:t=i("user:modals.inviteParentUserWizard.tableMessages.activeInvitationExists");break;case xt.jI.ERROR_CODE_INVITED_USER_EMAIL_NOT_FOUND:t=i("user:modals.inviteParentUserWizard.tableMessages.userEmailNotFound");break;case xt.jI.ERROR_CODE_USER_ALREADY_EXISTS_INVITED_ORGANIZATION:t=i("user:modals.inviteParentUserWizard.tableMessages.userAlreadyExist")}c((function(n){return[].concat(Wt(n),[{message:t,status:e.result.status,username:e.username}])})),e.result.status===xt.YV.SUCCESS?p((function(e){return Zt(Zt({},e),{},{successCount:e.successCount+1,totalCount:e.totalCount+1})})):p((function(e){return Zt(Zt({},e),{},{failedCount:e.failedCount+1,totalCount:e.totalCount+1})}))}))}),[t]);return O.createElement($e.Z,null,O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},n||r?null:0===(null==m?void 0:m.failedCount)?O.createElement(Ne.Z,{severity:"success","data-componentid":"".concat(a,"-success-alert")},O.createElement(et.Z,{"data-componentid":"".concat(a,"-success-alert-title")},i("user:modals.inviteParentUserWizard.successAlert.message")),i("user:modals.inviteParentUserWizard.successAlert.description")):O.createElement(Ne.Z,{severity:"error","data-componentid":"".concat(a,"-error-alert")},O.createElement(et.Z,{"data-componentid":"".concat(a,"-error-alert-title")},i("user:modals.inviteParentUserWizard.errorAlert.message")),O.createElement(A.c,{i18nKey:"user:modals.inviteParentUserWizard.errorAlert.description",tOptions:{failedCount:null==m?void 0:m.failedCount}},"An error occurred while inviting ",null==m?void 0:m.failedCount," user(s)..")))),O.createElement($e.Z.Row,{columns:1},O.createElement($e.Z.Column,{mobile:16,tablet:16,computer:16},O.createElement(ze.Z,{variant:"body2",style:{textAlign:"right"}},i("user:modals.inviteParentUserWizard.totalInvitations")+" : "+(null==m?void 0:m.totalCount)),O.createElement(U.wQ,{className:"addon-field-wrapper",isLoading:n,actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"resourceIdentifier",id:"resourceIdentifier",key:"resourceIdentifier",render:function(e){return O.createElement(ae.Z,{as:"h6","data-componentid":"".concat(a,"-username-item-heading")},O.createElement(ae.Z.Content,null,e.username))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.username")},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return O.createElement(ae.Z,{as:"h6","data-componentid":"".concat(a,"-status-item-heading")},O.createElement(ae.Z.Content,null,O.createElement(N.Z,{"data-componentid":"".concat(a,"-bulk-label"),content:e.status,size:"small",color:e.status===xt.YV.SUCCESS?"green":"red",className:"group-label"})))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.status")},{allowToggleVisibility:!1,dataIndex:"message",id:"message",key:"message",render:function(e){return O.createElement(ae.Z,{as:"h6","data-componentid":"".concat(a,"-status-item-heading")},O.createElement(ae.Z.Content,null,e.message))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.message")}],data:l,onColumnSelectionChange:function(){return null},onRowClick:function(){return null},placeholders:O.createElement(U.$J,{"data-testid":"".concat(a,"-empty-search-result"),"data-componentid":"".concat(a,"-empty-search-result"),image:(0,s.jF)().emptySearch,imageSize:"tiny",title:i("users:usersList.search.emptyResultPlaceholder.title"),subtitle:""}),transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(a,"-data-table"),"data-componentid":"".concat(a,"-data-table"),loadingStateOptions:{count:u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"}}))))};function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Ht.defaultProps={"data-componentid":"parent-invite-response-list",hasError:!1,isLoading:!1,response:[]};var Kt=function(e){var t=e.closeWizard,n=e.onUserInviteSuccess,r=e["data-componentid"],a=(0,R.$)().t,i=Qt((0,O.useState)(!1),2),o=i[0],s=i[1],l=Qt((0,O.useState)(!1),2),u=l[0],c=l[1],d=Qt((0,U.IK)(),3),m=d[0],p=d[1],f=d[2],v=Qt((0,O.useState)([]),2),g=v[0],h=v[1];return O.createElement(Rt.Z,{"data-componentid":r,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},O.createElement(Rt.Z.Header,{className:"wizard-header"},a("parentOrgInvitations:addUserWizard.heading"),O.createElement(U.X6,{as:"h6"},a("parentOrgInvitations:addUserWizard.description"))),O.createElement(Rt.Z.Content,{className:"content-container",scrolling:!0},m&&f,(null==g?void 0:g.length)>0?O.createElement(Ht,{response:g,isLoading:o}):O.createElement(_t,{onSubmit:function(e){var t,r={groups:null==e||null===(t=e.groups)||void 0===t?void 0:t.map((function(e){return e.group.id})),usernames:null==e?void 0:e.username};p(null),s(!0),(0,le.O)(r).then((function(e){var t=null==e?void 0:e.data;h(t),n()})).catch((function(e){!function(e){var t,n,r,i;if(null!=e&&e.response&&401!==(null==e||null===(t=e.response)||void 0===t?void 0:t.status))if(403===(null==e||null===(n=e.response)||void 0===n?void 0:n.status)&&(null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.code)===oe._F.ERROR_COLLABORATOR_USER_LIMIT_REACHED)p({description:a("extensions:manage.invite.notifications.sendInvite.limitReachError.description"),level:I.QU.ERROR,message:a("extensions:manage.invite.notifications.sendInvite.limitReachError.message")});else if(null!=e&&null!==(i=e.response)&&void 0!==i&&null!==(i=i.data)&&void 0!==i&&i.description){var o;p({description:a("invite:notifications.sendInvite.error.description",{description:null==e||null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description}),level:I.QU.ERROR,message:a("invite:notifications.sendInvite.error.message")})}else p({description:a("invite:notifications.sendInvite.genericError.description"),level:I.QU.ERROR,message:a("invite:notifications.sendInvite.genericError.message")});else p({description:a("invite:notifications.sendInvite.error.description"),level:I.QU.ERROR,message:a("invite:notifications.sendInvite.error.message")})}(e)})).finally((function(){c(!0),s(!1)}))},"data-componentid":"".concat(r,"-form")})),O.createElement(Rt.Z.Actions,null,O.createElement($e.Z,null,O.createElement($e.Z.Row,{column:2},O.createElement($e.Z.Column,{mobile:8},O.createElement(U.Qj,{"data-componentid":"".concat(r,"-cancel-button"),floated:"left",onClick:function(){t()}},a(u?"common:close":"common:cancel"))),!g||(null==g?void 0:g.length)<1&&O.createElement($e.Z.Column,{mobile:8,tablet:8,computer:8},O.createElement(U.KM,{"data-componentid":"".concat(r,"-finish-button"),floated:"right",onClick:function(){document.getElementById(oe._F.INVITE_PARENT_ORG_USER_FORM_ID).dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0}))},loading:o,disabled:o},a("extensions:manage.features.user.addUser.invite")))))))},Bt=n(45711),$t={};$t.styleTagTransform=J(),$t.setAttributes=$(),$t.insert=K().bind(null,"head"),$t.domAPI=Q(),$t.insertStyleElement=Y();V()(Bt.Z,$t);Bt.Z&&Bt.Z.locals&&Bt.Z.locals;function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xt.apply(null,arguments)}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Jt=function(e){var t,n,_,x,z=e["data-testid"],M=e["data-componentid"],Z=(0,R.$)().t,j=(0,U.fQ)().getLink,W=(0,k.I0)(),D=null===(t=window.AppUtils)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.showStatusLabelForNewAuthzRuntimeFeatures,F=(0,i.Ac)(f.Z.SAAS_FEATURES_IDENTIFIER),V=(0,b.z)().isSubOrganization,H=(0,S.Z)(),Q=H.isLoading,G=H.isUserStoreReadOnly,K=H.mutateUserStoreList,B=H.readOnlyUserStoreNamesList,$=H.userStoresList,X=(0,k.v9)((function(e){return e.config.ui.features})),Y=(0,i.EV)(null==X||null===(n=X.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.create),q=(0,i.EV)(null==X||null===(_=X.bulkUserImport)||void 0===_||null===(_=_.scopes)||void 0===_?void 0:_.create),J=(0,i.EV)(null==X||null===(x=X.guestUser)||void 0===x||null===(x=x.scopes)||void 0===x?void 0:x.create),ee=(0,g.Z)(h.Z.INVITED_USER_REGISTRATION).data,te=Yt((0,O.useState)(""),2),ae=te[0],ie=te[1],le=Yt((0,O.useState)(1),2),ue=le[0],ce=le[1],me=Yt((0,O.useState)(0),2),pe=me[0],fe=me[1],ve=Yt((0,O.useState)(u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),ge=ve[0],he=ve[1],be=Yt((0,O.useState)(!1),2),ye=be[0],Se=be[1],Ie=Yt((0,O.useState)(!1),2),we=Ie[0],Ue=Ie[1],Ce=Yt((0,O.useState)(!1),2),Oe=Ce[0],Re=Ce[1],Te=Yt((0,O.useState)(void 0),2),Le=Te[0],Ne=Te[1],Pe=Yt((0,O.useState)(void 0),2),_e=Pe[0],xe=Pe[1],ze=Yt((0,O.useState)(void 0),2),Me=ze[0],Ze=ze[1],je=Yt((0,O.useState)(oe.sk.USER),1)[0],We=Yt((0,O.useState)(),2),De=We[0],Fe=We[1],Ve=Yt((0,O.useState)(m.wO.primaryUserstoreName),2),He=Ve[0],Qe=Ve[1],Ge=Yt((0,O.useState)(se.XC.PENDING),2),Ke=Ge[0],Be=Ge[1],$e=Yt((0,O.useState)(!1),1)[0],Xe=Yt((0,O.useState)(!1),2),Ye=Xe[0],qe=Xe[1],Je=Yt((0,O.useState)([]),2),et=Je[0],tt=Je[1],nt=Yt((0,O.useState)([]),2),rt=nt[0],at=nt[1],it=Yt((0,O.useState)(!1),2),ot=it[0],st=it[1],lt=Yt((0,O.useState)(!1),2),ut=lt[0],ct=lt[1],dt=Yt((0,O.useState)(!1),2),mt=dt[0],pt=dt[1],ft=Yt((0,O.useState)(u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),vt=ft[0],gt=ft[1],ht=Yt((0,O.useState)(1),2),bt=ht[0],yt=ht[1],Et=(0,k.v9)((function(e){return e.config.ui.flowExecution.enableLegacyFlows})),St=(0,k.v9)((function(e){var t;return null==e||null===(t=e.profile)||void 0===t?void 0:t.profileSchemas})),It=(0,k.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),wt=Yt((0,O.useState)([]),2),Ut=wt[0],Ot=wt[1],Rt=d.l.getInstance(),At=[{key:2,text:Z("parentOrgInvitations:searchdropdown.pendingLabel"),value:"Pending"},{key:3,text:Z("parentOrgInvitations:searchdropdown.expiredLabel"),value:"Expired"}],kt=ge+1,Tt=oe._F.GROUPS_AND_ROLES_ATTRIBUTE,Lt=(0,re.M)(V()),Nt=Lt.data,Pt=Lt.isLoading,_t=Lt.mutate,xt=(0,y.yA)(F===i.iK.ENABLED&&!V()).data,zt=(0,O.useMemo)((function(){var e=""===ae?null:ae;if(Ut.length>0){var t=Ut.map((function(e){var t=oe.i4.find((function(t){return t.key===e}));return t?t.value:""})).filter((function(e){return""!==e}));if(t.length>0){var n=t.join(" and ");e=e?"".concat(e," and ").concat(n):n}}return e}),[ae,Ut]),Mt=(0,P.WW)(kt,ue,zt,null,He,Tt),Zt=Mt.data,jt=Mt.isLoading,Wt=Mt.error,Dt=Mt.mutate,Ft=(0,O.useMemo)((function(){return null==xt?void 0:xt.realmConfig}),[xt]),Vt=(0,O.useMemo)((function(){var e=[{key:-1,text:m.wO.primaryUserstoreName,value:m.wO.primaryUserstoreName}];return(null==$?void 0:$.length)>0&&$.forEach((function(t,n){if(t.name.toUpperCase()!==m.wO.primaryUserstoreName&&t.enabled&&(null==It||!It.includes(t.name))){var r={disabled:t.typeName===E.uD.RemoteUserStoreManager,key:n,text:t.name,value:t.name};e.push(r)}})),e}),[$]),Ht=(0,O.useMemo)((function(){return G(He)}),[He,B]);(0,O.useEffect)((function(){K()}),[]),(0,O.useEffect)((function(){Wt&&(Wt.response&&Wt.response.data&&Wt.response.data.description?W((0,w.V_)({description:Wt.response.data.description,level:I.QU.ERROR,message:Z("console:manage.features.users.notifications.fetchUsers.error.message")})):W((0,w.V_)({description:Z("console:manage.features.users.notifications.fetchUsers.genericError.description"),level:I.QU.ERROR,message:Z("console:manage.features.users.notifications.fetchUsers.genericError.message")})))}),[Wt]),(0,O.useEffect)((function(){if(V())if(yt(1),"userName co "!==ae&&""!==ae&&null!==ae){if(ae){var e=null==Nt?void 0:Nt.invitations;if(ae.includes("userName sw ")){var t,n=ae.split("sw ")[1];e=null===(t=e)||void 0===t?void 0:t.filter((function(e){return null==e?void 0:e.username.startsWith(n)}))}else if(ae.includes("userName ew ")){var r,a=ae.split("ew ")[1];e=null===(r=e)||void 0===r?void 0:r.filter((function(e){return null==e?void 0:e.username.endsWith(a)}))}else if(ae.includes("userName eq ")){var i,o=ae.split("eq ")[1];e=null===(i=e)||void 0===i?void 0:i.filter((function(e){return(null==e?void 0:e.username)===o}))}else if(ae.includes("userName co ")){var s,l=ae.split("co ")[1];e=null===(s=e)||void 0===s?void 0:s.filter((function(e){return null==e?void 0:e.username.includes(l)}))}at(e)}}else at(null==Nt?void 0:Nt.invitations)}),[ae]),(0,O.useEffect)((function(){st(we&&!ut&&!Le)}),[we,ut]),(0,O.useEffect)((function(){var e;at(null==Nt||null===(e=Nt.invitations)||void 0===e?void 0:e.filter((function(e){return e.status===se.XC.PENDING.toUpperCase()})))}),[null==Nt?void 0:Nt.invitations]),(0,O.useEffect)((function(){var e;if(Ke!==se.XC.ACCEPTED){var t=null==rt?void 0:rt.filter((function(e){return e.status===Ke.toUpperCase()}));if((null===(e=t)||void 0===e?void 0:e.length)>vt){var n=bt-1;t=t.slice(n,n+vt),tt(t),Ze(t.length===vt)}else tt(t),Ze(!1)}}),[rt,bt,vt,Ye,Ke]);var Qt,Gt,Bt,$t,qt=function(e){var t;if(e){var n=(0,C.Z)(e);return n.Resources=null==n||null===(t=n.Resources)||void 0===t?void 0:t.map((function(e){if((e.userName.split("/").length>1?e.userName.split("/")[0]:m.wO.primaryUserstoreName)!==m.wO.primaryUserstoreName){var t=null;if((null==e?void 0:e.emails)instanceof Array){var n=null==e?void 0:e.emails[0];t="string"==typeof n?n:null==n?void 0:n.value}return e.emails=[t],e}return e})),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e;return r.itemsPerPage===t?(r.Resources.splice(-1,n),xe(!0)):xe(!1),r}(n,kt,1)}},Jt=(0,O.useMemo)((function(){return qt(Zt)}),[Zt]),en=(0,O.useMemo)((function(){return(0,Ee.I_)(St)}),[St]),tn=function(){Re(!Oe),ie(""),Ot([])},nn=function(e){ie(e),ce(1),yt(1)},rn=function(e){Ot(e),ce(1)},an=function(e,t){ce((t.activePage-1)*ge+1)},on=function(e,t){he(t.value)},sn=function(e,t){yt((t.activePage-1)*vt+1)},ln=function(e,t){gt(t.value)},un=function(e,t){"all"===t.value?Qe(null):Qe(t.value),ce(1),he(u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT)},cn=function(){Dt()},dn=function(){ct(!0),(0,y.Qy)(y.vH.USER_ONBOARDING_CONNECTOR_ID).then((function(e){var t=(null==e?void 0:e.connectors).find((function(e){return e.id===y.vH.USER_EMAIL_VERIFICATION_CONNECTOR_ID})).properties.find((function(e){return e.name===y.vH.EMAIL_VERIFICATION_ENABLED}));Ne("true"===t.value||(null==ee?void 0:ee.isEnabled))})).catch((function(e){var t,n,r,a,i;i={description:null!==(t=null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:Z("governanceConnectors:notifications.getConnector.genericError.description"),level:I.QU.ERROR,message:null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)&&void 0!==r?r:Z("governanceConnectors:notifications.getConnector.genericError.message")},W((0,w.V_)(i))})).finally((function(){return ct(!1)}))},mn=O.createElement(U.KM,{"data-componentid":"".concat(z,"-add-user-button"),"data-testid":"".concat(z,"-add-user-button")},O.createElement(T.Z,{name:"add"}),Z("extensions:manage.users.buttons.addUserBtn"),O.createElement(T.Z,{name:"dropdown",className:"ml-3 mr-0"})),pn=function(e){return O.createElement(o.n,{onFilter:nn,filterAttributeOptions:(t=e,n=[{key:0,text:Z("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"}],t&&(n=n.concat(en)),n),filterAttributePlaceholder:Z("users:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:Z("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:Z("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:Z("users:advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",triggerClearQuery:Oe,disableSearchAndFilterOptions:(null==Jt?void 0:Jt.totalResults)<=0&&!ae});var t,n},fn=function(){return O.createElement(U.PS,{className:"sub-org-users-list",advancedSearch:O.createElement(O.Fragment,null,pn(!0),O.createElement(ne,{selectedFilters:Ut,onChange:rn})),currentListSize:null==Jt?void 0:Jt.itemsPerPage,listItemLimit:ge,onItemsPerPageDropdownChange:on,"data-testid":"user-mgt-user-list-layout",onPageChange:an,rightActionPanel:O.createElement(L.Z,{"data-testid":"user-mgt-user-list-userstore-dropdown",selection:!0,options:Vt,onChange:un,defaultValue:m.wO.primaryUserstoreName,loading:Q,readonly:Vt.length<=1}),showPagination:!0,totalPages:hn(),totalListSize:null==Jt?void 0:Jt.totalResults,paginationOptions:{disableNextButton:!_e,showItemsPerPageDropdown:!(null!==p.x8&&void 0!==p.x8&&p.x8.hiddenItemsPerPageRemoteUserStoreDropdown)||He===m.wO.primaryUserstoreName},isLoading:jt},Ut.length>0&&O.createElement(N.Z.Group,null,Ut.map((function(e){var t=oe.i4.find((function(t){return t.key===e}));return t?O.createElement(N.Z,{key:e,className:"filter-label active basic",as:"a",onClick:function(){return bn(e)},"data-componentid":"".concat(M,"-account-status-filter-label-").concat(e)},Z(t.text),O.createElement(a.DX,{className:"filter-label-close-icon"})):null}))),Q||0!==(null==Vt?void 0:Vt.length)?O.createElement(Ae,{advancedSearch:pn(!0),usersList:Jt,onUserDelete:cn,userMetaListContent:null,realmConfigs:Ft,onEmptyListPlaceholderActionClick:function(){return Se(!0)},onSearchQueryClear:tn,searchQuery:zt,"data-testid":"user-mgt-user-list",featureConfig:X,isReadOnlyUserStore:Ht}):O.createElement(U.$J,{subtitle:[Z("users:placeholders.userstoreError.subtitles.0"),Z("users:placeholders.userstoreError.subtitles.1")],title:Z("users:placeholders.userstoreError.title"),image:(0,s.jF)().genericError,imageSize:"tiny"}))},vn=function(){var e;return O.createElement(U.PS,{className:"sub-org-users-list",advancedSearch:pn(!1),currentListSize:(null==Nt||null===(e=Nt.invitations)||void 0===e?void 0:e.length)||null,listItemLimit:vt,onItemsPerPageDropdownChange:ln,"data-componentid":"".concat(M,"-user-mgt-user-list-layout"),"data-testid":"".concat(z,"-user-mgt-user-list-layout"),onPageChange:sn,showPagination:!0,totalPages:hn(),totalListSize:null==et?void 0:et.length,isLoading:jt||Pt,paginationOptions:{disableNextButton:!Me,showItemsPerPageDropdown:He===m.wO.primaryUserstoreName},showPaginationPageLimit:!$e,leftActionPanel:O.createElement(L.Z,{"data-componentid":"".concat(M,"-list-userstore-dropdown"),selection:!0,options:At,onChange:gn,text:Z("parentOrgInvitations:filterLabel")+Ke,disabled:Pt})},Q||0!==(null==Vt?void 0:Vt.length)?O.createElement(de,{invitationStatusOption:null,onEmptyListPlaceholderActionClick:function(){return Se(!0)},onboardedGuestUserList:Jt,onSearchQueryClear:tn,guestUsersList:et,getGuestUsersList:function(){return _t()},searchQuery:ae,userTypeSelection:oe.rb.EXTERNAL,"data-testid":z}):O.createElement(U.$J,{subtitle:[Z("users:placeholders.userstoreError.subtitles.0"),Z("users:placeholders.userstoreError.subtitles.1")],title:Z("users:placeholders.userstoreError.title"),image:(0,s.jF)().genericError,imageSize:"tiny"}))},gn=function(e,t){Be(t.value),qe(!0)},hn=function(){return(ue-1)/ge+2},bn=function(e){Ot((function(t){return t.filter((function(t){return t!==e}))})),ce(1)};return O.createElement(U.Xg,{action:Y&&!jt&&(!V()||!Pt)&&!Ht&&O.createElement(L.Z,{"data-componentid":"".concat(M,"-add-user-dropdown"),direction:"left",floating:!0,icon:null,trigger:mn},O.createElement(L.Z.Menu,null,($t=[],Y&&$t.push({"data-componentid":"".concat(M,"-add-user-dropdown-item"),key:1,text:Z("users:addUserDropDown.addNewUser"),value:oe.rb.EXTERNAL}),q&&$t.push({"data-componentid":"".concat(z,"-bulk-import-users-dropdown-item"),"data-testid":"".concat(z,"-bulk-import-users-dropdown-item"),key:2,text:Z("users:addUserDropDown.bulkImport"),value:oe.Bv.BULK_IMPORT}),V()&&null!=X&&null!==(Bt=X.parentUserInvitation)&&void 0!==Bt&&Bt.enabled&&J&&$t.push({className:"users-invite-parent-user","data-componentid":"".concat(M,"-invite-parent-user"),key:3,text:O.createElement(O.Fragment,null,Z("parentOrgInvitations:addUserWizard.heading"),D&&O.createElement(r.Z,{size:"small",label:Z(v.j.NEW),className:"oxygen-chip-new"})),value:oe.rb.INTERNAL}),$t).map((function(e){return O.createElement(L.Z.Item,Xt({key:e.value,onClick:function(){return function(e){switch(dn(),e){case oe.rb.EXTERNAL:Rt.publish("manage-users-click-create-new",{type:"user"}),Se(!0),Fe(oe.rb.EXTERNAL);break;case oe.Bv.BULK_IMPORT:Ue(!0);break;case oe.rb.INTERNAL:Rt.publish("manage-users-click-invite-new",{type:"user"}),pt(!0)}}(e.value)}},e))})))),title:Z("pages:users.title"),pageTitle:Z("pages:users.title"),description:O.createElement(O.Fragment,null,Z("extensions:manage.users.usersSubTitle"),O.createElement(U.eb,{link:j("manage.users.learnMore")},Z("common:learnMore"))),"data-testid":"".concat(z,"-page-layout")},V()?O.createElement(U.M$,{activeIndex:pe,"data-testid":"".concat(z,"-administrator-tabs"),defaultActiveIndex:0,onTabChange:function(e,t){fe(t.activeIndex),tn(),0===t.activeIndex?Fe(oe.rb.INTERNAL):1===t.activeIndex&&Fe(oe.rb.EXTERNAL)},panes:(Gt=[],Gt.push({componentId:"users",menuItem:Z("parentOrgInvitations:tab.usersTab"),render:fn}),null!=X&&null!==(Qt=X.parentUserInvitation)&&void 0!==Qt&&Qt.enabled&&Gt.push({componentId:"invitations",menuItem:Z("parentOrgInvitations:tab.invitationsTab"),render:vn}),Gt)}):fn(),ye&&!ut&&O.createElement(ke.G,{"data-componentid":"user-mgt-add-user-wizard-modal","data-testid":"user-mgt-add-user-wizard-modal",isSubOrg:V(),closeWizard:function(){Se(!1),Ne(void 0)},emailVerificationEnabled:Le,onSuccessfulUserAddition:function(e){var t;e?(_t(),Dt(),Rt.publish("manage-users-finish-creating-user"),c.m.push(null===(t=l.$.getPaths().get("USER_EDIT"))||void 0===t?void 0:t.replace(":id",e))):c.m.push(l.$.getPaths().get("USERS"))},defaultUserTypeSelection:je,userTypeSelection:De,listOffset:ue,listItemLimit:ge,updateList:function(){return Dt()},userStore:null!=He?He:m.wO.primaryUserstoreName}),we&&!ut&&Le&&O.createElement(Ct,{"data-componentid":"user-mgt-bulk-import-user-wizard-modal",closeWizard:function(){Ue(!1),Dt()},userstore:null!=He?He:m.wO.primaryUserstoreName}),ot&&O.createElement(U.cV,{"data-componentid":"".concat(M,"-select-multiple-invite-confirmation-modal"),onClose:function(){st(!1),Ue(!1)},type:"warning",open:ot,primaryAction:Z("common:close"),onPrimaryActionClick:function(){st(!1),Ue(!1)},closeOnDimmerClick:!1},O.createElement(U.cV.Header,null,Z("users:confirmations.addMultipleUser.header")),O.createElement(U.cV.Message,{attached:!0,warning:!0},Z("users:confirmations.addMultipleUser.message")),O.createElement(U.cV.Content,null,Et?O.createElement(A.c,{i18nKey:"users:confirmations.addMultipleUser.legacyContent"},"Invite User to Set Password should be enabled to add multiple users. Please enable email invitations for user password setup from",O.createElement(U.rU,{onClick:function(){return c.m.push(l.$.getPaths().get("GOVERNANCE_CONNECTOR_EDIT").replace(":categoryId",y.vH.USER_ONBOARDING_CONNECTOR_ID).replace(":connectorId",y.vH.ASK_PASSWORD_CONNECTOR_ID))},external:!1},"Login & Registration settings")):O.createElement(A.c,{i18nKey:"users:confirmations.addMultipleUser.content"},"Invite User to Set Password should be enabled to add multiple users. Please enable user password setup invitations from the",O.createElement(U.rU,{onClick:function(){return c.m.push(l.$.getPaths().get("INVITE_USER_PASSWORD_SETUP_FLOW_BUILDER"))},external:!1},"Invited User Registration Flow Builder.")))),mt&&O.createElement(Kt,{closeWizard:function(){pt(!1),_t()},onUserInviteSuccess:function(){return _t()},"data-componentid":"user-mgt-invite-parent-user-wizard-modal"}))};Jt.defaultProps={"data-componentid":"users","data-testid":"users"};const en=Jt},13932:(e,t,n)=>{n.d(t,{r:()=>l});var r,a=n(44194),i=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}var s=function(e,t){var n=e.title,s=e.titleId,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,i);return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",className:"icon",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":s},l),n?a.createElement("title",{id:s},n):null,r||(r=a.createElement("path",{id:"remove-circle",d:"M7,14a7,7,0,1,1,7-7A7.008,7.008,0,0,1,7,14ZM3.5,6.69v.6h7v-.6Z"})))},l=(0,a.forwardRef)(s);n.p},78779:(e,t,n)=>{n.d(t,{r:()=>l});var r,a=n(44194),i=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}var s=function(e,t){var n=e.title,s=e.titleId,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,i);return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",className:"icon",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":s},l),n?a.createElement("title",{id:s},n):null,r||(r=a.createElement("path",{d:"M12,22a7,7,0,0,0,5-11.894V7A5,5,0,0,0,7,7v3.106A7,7,0,0,0,12,22Zm1-6.277V18a1,1,0,0,1-2,0V15.723a2,2,0,1,1,2,0ZM9,7a3,3,0,0,1,6,0V8.683a6.93,6.93,0,0,0-6,0Z"})))},l=(0,a.forwardRef)(s);n.p},10050:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81611),a=n.n(r),i=n(83948),o=n.n(i)()(a());o.push([e.id,".account-status-filter-dropdown{margin-right:5px;min-width:200px}.account-status-filter-dropdown .dropdown-label-container{align-items:center;display:flex;justify-content:space-between;width:100%}.account-status-filter-dropdown .dropdown-label-container .status-count-badge{margin-right:5px}.account-status-filter-dropdown .dropdown-label-container .status-count-badge .MuiBadge-badge{background-color:var(--oxygen-palette-primary-main);color:var(--oxygen-palette-primary-contrastText)}.account-status-filter-dropdown .account-status-select-input{background-color:var(--oxygen-palette-grey-50);height:40px}.account-status-filter-dropdown .account-status-select-input .MuiOutlinedInput-notchedOutline{border:none}.account-status-filter-dropdown .account-status-select-input.Mui-focused .MuiOutlinedInput-notchedOutline{border:1px solid var(--oxygen-palette-primary-main)}",""]);const s=o},43392:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81611),a=n.n(r),i=n(83948),o=n.n(i)()(a());o.push([e.id,".invite-parent-org-user-form .press-enter-prompt{display:flex;align-items:center;justify-content:space-between}",""]);const s=o},45711:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81611),a=n.n(r),i=n(83948),o=n.n(i)()(a());o.push([e.id,".users-invite-parent-user .oxygen-chip-new{margin-left:.5rem}.filter-label{display:inline-flex !important;align-items:center;justify-content:center}.filter-label-close-icon{margin-left:4px}",""]);const s=o}}]);