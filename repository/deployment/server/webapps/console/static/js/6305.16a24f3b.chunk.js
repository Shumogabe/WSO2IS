"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6305],{27777:(e,t,r)=>{r.d(t,{x:()=>i});var n=r(96124),a=r(76271),o=r(6833),i=function(e,t,r,i,l){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u={headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.GET,params:{filter:r,limit:e,offset:t,requiredAttributes:l,sort:i},url:a.h.getState().config.endpoints.userStores},c=(0,n.Z)(s?u:null);return{data:c.data,error:c.error,isLoading:c.isLoading,isValidating:c.isValidating,mutate:c.mutate,response:c.response}}},46305:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var n=r(55007),a=r(25134),o=r(60486),i=r(90302),l=r(40838),s=r(50102),u=r(79408),c=r(48704),d=r(12754),f=r(6833),m=r(82406),p=r(96334),h=r(78132),g=r(44194),v=r(10479),E=r(47245),S=r(26154),y=r(47625),R=r(27777),T=r(51785),A=r(38463);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(null,arguments)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],s=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t,r=e["data-testid"],C=(0,v.$)().t,P=[{key:0,text:C("common:name"),value:"name"},{key:1,text:C("common:description"),value:"description"}],w=(0,E.v9)((function(e){return e.config.ui.features})),L=O((0,g.useState)([]),2),_=L[0],U=L[1],k=O((0,g.useState)(0),2),I=k[0],M=k[1],x=O((0,g.useState)(i.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),D=x[0],j=x[1],V=O((0,g.useState)([]),2),Z=V[0],F=V[1],$=O((0,g.useState)(P[0]),2),Q=$[0],N=$[1],z=O((0,g.useState)(!0),2),K=z[0],Y=z[1],q=O((0,g.useState)(""),2),G=q[0],X=q[1],B=O((0,g.useState)(!1),2),H=B[0],J=B[1],W=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t||null===(t=t.userStores)||void 0===t?void 0:t.disabledFeatures})),ee=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),te=(0,E.I0)(),re=O((0,p.cC)(),2),ne=re[0],ae=re[1],oe=(0,R.x)(null,null,null,null),ie=oe.data,le=oe.isLoading,se=oe.error,ue=oe.mutate;(0,g.useEffect)((function(){if((null==ie?void 0:ie.length)>0){var e=ie.filter((function(e){return!(null!=ee&&ee.includes(null==e?void 0:e.name))}));U(e),F(e)}}),[ie]),(0,g.useEffect)((function(){se&&te((0,m.V_)({description:(null==se?void 0:se.name)||C("userstores:notifications.fetchUserstores.genericError.description"),level:f.QU.ERROR,message:(null==se?void 0:se.message)||C("userstores:notifications.fetchUserstores.genericError.message")}))}),[se]),(0,g.useEffect)((function(){F((0,u.f)(Z,Q.value,K))}),[Q,K]);var ce,de=function(e){F((0,s.g)(_,e,"name",!0)),X(e),M(0),ae()},fe=g.createElement(h.KM,{"data-componentid":"".concat(r,"-add-user-store-button"),"data-testid":"".concat(r,"-add-user-store-button")},g.createElement(S.Z,{name:"add"}),C("userstores:pageLayout.list.primaryAction"),g.createElement(S.Z,{name:"dropdown",className:"ml-3 mr-0"}));return g.createElement(h.Xg,{action:(le||!(!G&&(null==Z?void 0:Z.length)<=0&&null!=W&&W.includes(A.u4.FEATURE_DICTIONARY.get("USER_STORE_REMOTE"))))&&c.w.userstoreList.allowAddingUserstores&&g.createElement(n.di,{when:null==w||null===(t=w.userStores)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create},null!=W&&W.includes(A.u4.FEATURE_DICTIONARY.get("USER_STORE_REMOTE"))?g.createElement(h.KM,{onClick:function(){l.m.push(o.$.getPaths().get("USERSTORE_TEMPLATES"))},"data-testid":"".concat(r,"-list-layout-add-button")},g.createElement(S.Z,{name:"add"}),C("userstores:pageLayout.list.primaryAction")):g.createElement(y.Z,{"data-componentid":"".concat(r,"-add-user-store-dropdown"),direction:"left",floating:!0,icon:null,trigger:fe},g.createElement(y.Z.Menu,null,(ce=[],ce.push({"data-componentid":"".concat(r,"-add-user-store-dropdown-item"),key:1,text:C("userstores:pageLayout.list.newUserStoreDropdown.connectDirectly"),value:A.oR.DIRECT}),ce.push({"data-componentid":"".concat(r,"-user-store-dropdown-item"),"data-testid":"".concat(r,"-user-store-dropdown-item"),key:2,text:C("userstores:pageLayout.list.newUserStoreDropdown.connectRemotely"),value:A.oR.REMOTE}),ce).map((function(e){return g.createElement(y.Z.Item,b({key:e.value.toString(),onClick:function(){return function(e){switch(e){case A.oR.DIRECT:l.m.push(o.$.getPaths().get("USERSTORE_TEMPLATES"));break;case A.oR.REMOTE:l.m.push(d.x$.getPaths().get("REMOTE_USER_STORE_CREATE"))}}(e.value)}},e))}))))),isLoading:le,title:C("userstores:pageLayout.list.title"),pageTitle:C("userstores:pageLayout.list.title"),description:C("userstores:pageLayout.list.description"),"data-testid":"".concat(r,"-page-layout")},g.createElement(h.PS,{advancedSearch:g.createElement(a.n,{onFilter:de,filterAttributeOptions:[{key:0,text:C("common:name"),value:"name"},{key:1,text:C("common:description"),value:"description"}],filterAttributePlaceholder:C("userstores:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:C("userstores:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:C("userstores:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:C("userstores:advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:H,"data-testid":"".concat(r,"-advanced-search")}),currentListSize:D,listItemLimit:D,onItemsPerPageDropdownChange:function(e,t){j(t.value)},onPageChange:function(e,t){M((t.activePage-1)*D)},onSortStrategyChange:function(e,t){N(P.filter((function(e){return e.value===t.value}))[0])},onSortOrderChange:function(e){Y(e)},resetPagination:ne,leftActionPanel:null,showPagination:!0,sortOptions:P,sortStrategy:Q,showTopActionPanel:le||!(!G&&(null==Z?void 0:Z.length)<=0),totalPages:Math.ceil((null==Z?void 0:Z.length)/D),totalListSize:null==Z?void 0:Z.length,isLoading:le,"data-testid":"".concat(r,"-list-layout")},g.createElement(T.rO,{advancedSearch:g.createElement(a.n,{onFilter:de,filterAttributeOptions:[{key:0,text:C("common:name"),value:"name"},{key:1,text:C("common:description"),value:"description"}],filterAttributePlaceholder:C("userstores:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:C("userstores:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:C("userstores:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:C("userstores:advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:H,"data-testid":"".concat(r,"-advanced-search")}),list:function(e,t,r){return null==e?void 0:e.slice(r,r+t)}(Z,D,I),onEmptyListPlaceholderActionClick:function(){return l.m.push(o.$.getPaths().get("USERSTORE_TEMPLATES"))},onSearchQueryClear:function(){J(!H),X(""),F(_)},searchQuery:G,update:ue,featureConfig:w,"data-testid":"".concat(r,"-list")})))};P.defaultProps={"data-testid":"userstores"};const w=P}}]);