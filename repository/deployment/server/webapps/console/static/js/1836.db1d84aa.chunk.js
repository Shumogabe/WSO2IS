"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[1836],{1836:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se});var r,o=n(87172),i=n(15551),a=n(98855),l=n(31551),s=n(66997),d=n(55007),c=n(60486),u=n(40838),p=n(43939),m=n(6833),v=n(82406),f=n(79438),h=n(78132),E=n(34194),g=n(44194),y=n(10479),_=n(59673),I=n(47245),P=n(26154),N=n(41193),T=n(41206),w=n(89141),L=n(62508),R=n(2292),A=n(96124),b=n(76271),O=n(60507);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function S(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}var F=function(e){return e.BASIC="BASIC",e.CLIENT_CREDENTIAL="CLIENT_CREDENTIAL",e}({}),G=S((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));r=G,D(G,"EMAIL_PROVIDER_CONFIG_NAME","EmailPublisher"),D(G,"REPLY_TO_ADDRESS_KEY","mail.smtp.replyTo"),D(G,"SIGNATURE_KEY","mail.smtp.signature"),D(G,"USERNAME","userName"),D(G,"PASSWORD","password"),D(G,"CLIENT_ID","clientId"),D(G,"CLIENT_SECRET","clientSecret"),D(G,"TOKEN_ENDPOINT","tokenEndpoint"),D(G,"SCOPES","scopes"),D(G,"AUTHENTICATION_TYPE","authenticationType"),D(G,"AUTHENTICATION_TYPE_BASIC","BASIC"),D(G,"AUTHENTICATION_TYPE_CLIENT_CREDENTIAL","CLIENT_CREDENTIAL"),D(G,"EMAIL_PROVIDER_CONFIG_FETCH_ERROR_CODE","ASG-EPC-00001"),D(G,"EMAIL_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","ASG-EPC-00002"),D(G,"EMAIL_PROVIDER_CONFIG_UPDATE_ERROR_CODE","ASG-EP-00003"),D(G,"EMAIL_PROVIDER_CONFIG_DELETE_ERROR_CODE","ASG-EP-60004"),D(G,"EMAIL_PROVIDER_CONFIG_NOT_FOUND_ERROR_CODE","NSM-60006"),D(G,"EMAIL_PROVIDER_CONFIG_FIELD_MIN_LENGTH",0),D(G,"EMAIL_PROVIDER_CONFIG_FIELD_MAX_LENGTH",255),D(G,"EMAIL_PROVIDER_SERVER_PORT_MAX_LENGTH",6),D(G,"EMAIL_REGEX",/^[^\s@]+@[^\s@]+\.[^\s@]+$/),D(G,"ErrorMessages",{EMAIL_PROVIDER_CONFIG_DELETE_ERROR_CODE:new O.O(r.EMAIL_PROVIDER_CONFIG_DELETE_ERROR_CODE,"An error occurred while deleting the email provider configurations.","Error while deleting email provider configurations",null),EMAIL_PROVIDER_CONFIG_FETCH_ERROR_CODE:new O.O(r.EMAIL_PROVIDER_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the email provider configurations.","Error while fetching the email provider configurations",null),EMAIL_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new O.O(r.EMAIL_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the email provider configurations.","Invalid Status Code while fetching the email provider configurations",null),EMAIL_PROVIDER_CONFIG_UPDATE_ERROR_CODE:new O.O(r.EMAIL_PROVIDER_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the email provider configurations.","Error while updating the email provider configurations",null)}),D(G,"AUTH_TYPES",[{key:F.BASIC,text:"emailProviders:fields.authentication.types.basic.name",value:F.BASIC},{key:F.CLIENT_CREDENTIAL,text:"emailProviders:fields.authentication.types.clientCredential.name",value:F.CLIENT_CREDENTIAL}]);var k=R.AsgardeoSPAClient.getInstance().httpRequest.bind(R.AsgardeoSPAClient.getInstance()),V=function(e){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:m.f2.DELETE,url:e?b.h.getState().config.endpoints.emailProviderEndpoint+"/EmailPublisher":b.h.getState().config.endpoints.emailProviderV2Endpoint+"/EmailPublisher"};return k(t).then((function(e){if(200!==e.status&&204!==e.status)throw new p.u(G.ErrorMessages.EMAIL_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n;if((null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code)===G.EMAIL_PROVIDER_CONFIG_NOT_FOUND_ERROR_CODE)return Promise.resolve(null);var r=G.ErrorMessages.EMAIL_PROVIDER_CONFIG_DELETE_ERROR_CODE.getErrorMessage();throw new p.u(r,e.stack,null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))},H=n(51835),Z=n.n(H),U=n(27975),q=n.n(U),j=n(55900),B=n.n(j),K=n(21555),Y=n.n(K),X=n(3621),z=n.n(X),Q=n(5062),$=n.n(Q),W=n(75502),J={};J.styleTagTransform=$(),J.setAttributes=Y(),J.insert=B().bind(null,"head"),J.domAPI=q(),J.insertStyleElement=z();Z()(W.Z,J);W.Z&&W.Z.locals&&W.Z.locals;function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(){ne=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof E?t:E,a=Object.create(i.prototype),l=new O(r||[]);return o(a,"_invoke",{value:L(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",m="suspendedYield",v="executing",f="completed",h={};function E(){}function g(){}function y(){}var _={};d(_,a,(function(){return this}));var I=Object.getPrototypeOf,P=I&&I(I(C([])));P&&P!==n&&r.call(P,a)&&(_=P);var N=y.prototype=E.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(o,i,a,l){var s=u(e[o],e,i);if("throw"!==s.type){var d=s.arg,c=d.value;return c&&"object"==ee(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(c).then((function(e){d.value=e,a(d)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,n,r){var o=p;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===f){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=R(l,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var d=u(t,n,r);if("normal"===d.type){if(o=r.done?f:m,d.arg===h)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(o=f,r.method="throw",r.arg=d.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=u(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ee(t)+" is not iterable")}return g.prototype=y,o(N,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:g,configurable:!0}),g.displayName=d(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,s,"GeneratorFunction")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},T(w.prototype),d(w.prototype,l,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(N),d(N,s,"Generator"),d(N,a,(function(){return this})),d(N,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(b),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),d=r.call(a,"finallyLoc");if(s&&d){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;b(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function re(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw o}}return l}}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t,n,r,R,O=e["data-componentid"],C=(0,I.I0)(),x=(0,y.$)().t,S=(0,h.fQ)().getLink,D=(0,I.v9)((function(e){return e.config.ui.features})),M=null==D||null===(t=D.pushProviders)||void 0===t?void 0:t.enabled,H=(0,g.useRef)(null),Z=(0,g.useRef)(null),U=(0,g.useRef)(null),q=(0,d.EV)(null==D||null===(n=D.emailTemplates)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.read),j=(0,d.EV)(null==D||null===(r=D.emailProviders)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.update),B=oe((0,g.useState)(!1),2),K=B[0],Y=B[1],X=oe((0,g.useState)(!1),2),z=X[0],Q=X[1],$=oe((0,g.useState)(void 0),2),W=$[0],J=$[1],ee=oe((0,g.useState)(!1),2),ie=ee[0],ae=ee[1],le=oe((0,g.useState)(!1),2),se=le[0],de=le[1],ce=(0,I.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableOldUIForEmailProvider})),ue=function(){var e=(0,I.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableOldUIForEmailProvider})),t={headers:{Accept:"application/json","Content-Type":"application/json"},method:m.f2.GET,url:e?b.h.getState().config.endpoints.emailProviderEndpoint:b.h.getState().config.endpoints.emailProviderV2Endpoint},n=(0,A.Z)(t);return{data:n.data,error:n.error,isLoading:n.isLoading,isValidating:n.isValidating,mutate:n.mutate}}(),pe=ue.data,me=ue.isLoading,ve=ue.mutate,fe=ue.error,he=oe((0,g.useState)(null),2),Ee=he[0],ge=he[1],ye=oe((0,g.useState)(!1),2),_e=ye[0],Ie=ye[1],Pe=oe((0,g.useState)(!1),2),Ne=Pe[0],Te=Pe[1];(0,g.useEffect)((function(){if(pe instanceof p.u||fe)Ae();else if(pe&&pe[0]&&pe[0].name===G.EMAIL_PROVIDER_CONFIG_NAME){var e=pe[0].properties.find((function(e){return e.key===G.SIGNATURE_KEY})),t=pe[0].properties.find((function(e){return e.key===G.REPLY_TO_ADDRESS_KEY}));J({authType:pe[0].authType,displayName:null==e?void 0:e.value,fromAddress:pe[0].fromAddress,password:ce?pe[0].password:null,replyToAddress:null==t?void 0:t.value,smtpPort:pe[0].smtpPort,smtpServerHost:pe[0].smtpServerHost,userName:ce?pe[0].userName:null})}}),[pe]);var we=function(e,t){return g.createElement(s.Z,{position:"end"},g.createElement(P.Z,{link:!0,className:"list-icon reset-field-to-default-adornment",size:"small",color:"grey",name:e?"eye slash":"eye","data-componentid":"".concat(O,"-endpoint-authentication-property-secret-view-button"),onClick:t}))},Le=function(e){ge(e)},Re=function(){var e,t,n,r;if(de(!0),Le(null===(e=pe[0])||void 0===e?void 0:e.authType),(null===(t=pe[0])||void 0===t?void 0:t.authType)===F.BASIC)U.current.change("userName",null===(r=pe[0])||void 0===r||null===(r=r.properties.find((function(e){return e.key===G.USERNAME})))||void 0===r?void 0:r.value);else if((null===(n=pe[0])||void 0===n?void 0:n.authType)===F.CLIENT_CREDENTIAL){var o,i,a;U.current.change("clientId",null===(o=pe[0])||void 0===o||null===(o=o.properties.find((function(e){return e.key===G.CLIENT_ID})))||void 0===o?void 0:o.value),U.current.change("tokenEndpoint",null===(i=pe[0].properties.find((function(e){return e.key===G.TOKEN_ENDPOINT})))||void 0===i?void 0:i.value),U.current.change("scopes",null===(a=pe[0].properties.find((function(e){return e.key===G.SCOPES})))||void 0===a?void 0:a.value),U.current.change("clientSecret",null)}},Ae=function(){C((0,v.V_)({description:x("extensions:develop.emailProviders.notifications.getConfiguration.error.description"),level:m.QU.ERROR,message:x("extensions:develop.emailProviders.notifications.getConfiguration.error.message")}))},be=function(){C((0,v.V_)({description:x("extensions:develop.emailProviders.notifications.deleteConfiguration.error.description"),level:m.QU.ERROR,message:x("extensions:develop.emailProviders.notifications.deleteConfiguration.error.message")}))},Oe=function(){var e,t=(e=ne().mark((function e(t){return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!t&&Q(!0),e.abrupt("return",V(ce).then((function(){return!t&&C((0,v.V_)({description:x("extensions:develop.emailProviders.notifications.deleteConfiguration.success.description"),level:m.QU.SUCCESS,message:x("extensions:develop.emailProviders.notifications.deleteConfiguration.success.message")})),!t&&J(void 0),!t&&ve(),!0})).catch((function(){return!t&&be(),!1})).finally((function(){Q(!1)})));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){re(i,r,o,a,l,"next",e)}function l(e){re(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return g.createElement(h.Xg,{title:x("extensions:develop.emailProviders.heading"),pageTitle:x("extensions:develop.emailProviders.heading"),description:g.createElement("div",null,g.createElement("div",{style:{whiteSpace:"pre-line"}},x("extensions:develop.emailProviders.subHeading"),g.createElement(h.eb,{link:S("develop.emailProviders.learnMore")},x("common:learnMore")))),bottomMargin:!1,contentTopMargin:!1,pageHeaderMaxWidth:!0,backButton:{onClick:function(){u.m.push("".concat(M?c.$.getPaths().get("NOTIFICATION_CHANNELS"):c.$.getPaths().get("EMAIL_AND_SMS")))},text:x(M?"extensions:develop.emailProviders.goBack":"extensions:develop.emailAndSms.goBack")},action:(null===(R=D.emailProviders)||void 0===R?void 0:R.enabled)&&q&&g.createElement(h.kq,{onClick:function(){u.m.push("".concat(c.$.getPaths().get("EMAIL_MANAGEMENT")))},"data-componentId":"email-templates-configure-button"},x("extensions:develop.emailProviders.configureEmailTemplates")),"data-componentid":"".concat(O,"-form-layout")},g.createElement("div",{className:"email-provider-config-page"},g.createElement(T.R,{innerRef:H},g.createElement(w.Z,{className:"mt-2"},g.createElement(w.Z.Row,{columns:1},g.createElement(w.Z.Column,{width:16},g.createElement(h.pJ,{className:"form-wrapper",padded:"very"},me||z?g.createElement("div",{"data-componentid":"".concat(O,"-form-loading")},te(Array(3)).map((function(e){return g.createElement(N.Z,{key:e},g.createElement(N.Z.Line,{length:"very short"}),g.createElement("div",null,g.createElement(N.Z.Line,{length:"long"}),g.createElement(N.Z.Line,{length:"medium"})))}))):g.createElement(g.Fragment,null,g.createElement(f.l0,{id:"email-provider-config-form",uncontrolledForm:!0,onSubmit:function(e){Y(!0);var t,n,r={authType:null==e?void 0:e.authType,fromAddress:null==e?void 0:e.fromAddress,name:G.EMAIL_PROVIDER_CONFIG_NAME,properties:[],smtpPort:null==e?void 0:e.smtpPort,smtpServerHost:null==e?void 0:e.smtpServerHost};(ce&&(e.userName&&(r.userName=e.userName),e.password&&(r.password=e.password)),e.replyToAddress)&&(null==r||null===(t=r.properties)||void 0===t||t.push({key:G.REPLY_TO_ADDRESS_KEY,value:e.replyToAddress}));e.displayName&&(null==r||null===(n=r.properties)||void 0===n||n.push({key:G.SIGNATURE_KEY,value:e.displayName}));if(!ce){var o,i,a,l,s,d;if(e.authType===F.BASIC)null==r||null===(o=r.properties)||void 0===o||o.push({key:G.USERNAME,value:e.userName}),null==r||null===(i=r.properties)||void 0===i||i.push({key:G.PASSWORD,value:e.password});if(e.authType===F.CLIENT_CREDENTIAL)null==r||null===(a=r.properties)||void 0===a||a.push({key:G.CLIENT_ID,value:e.clientId}),null==r||null===(l=r.properties)||void 0===l||l.push({key:G.CLIENT_SECRET,value:e.clientSecret}),null==r||null===(s=r.properties)||void 0===s||s.push({key:G.TOKEN_ENDPOINT,value:e.tokenEndpoint}),null==r||null===(d=r.properties)||void 0===d||d.push({key:G.SCOPES,value:e.scopes})}Oe(!0).then((function(e){e?function(e,t){var n={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:m.f2.POST,url:t?b.h.getState().config.endpoints.emailProviderEndpoint:b.h.getState().config.endpoints.emailProviderV2Endpoint};return k(n).then((function(e){if(200!==e.status&&201!==e.status)throw new p.u(G.ErrorMessages.EMAIL_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n=G.ErrorMessages.EMAIL_PROVIDER_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new p.u(n,e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))}(r,ce).then((function(){C((0,v.V_)({description:x("extensions:develop.emailProviders.notifications.updateConfiguration.success.description"),level:m.QU.SUCCESS,message:x("extensions:develop.emailProviders.notifications.updateConfiguration.success.message")})),de(!1)})).catch((function(){C((0,v.V_)({description:x("extensions:develop.emailProviders.notifications.updateConfiguration.error.description"),level:m.QU.ERROR,message:x("extensions:develop.emailProviders.notifications.updateConfiguration.error.message")}))})).finally((function(){Y(!1),ve()})):(be(),Y(!1))})).catch((function(){be(),Y(!1)}))},initialValues:W,enableReinitialize:!0,ref:Z,noValidate:!0,validate:function(e){var t,n,r={authType:void 0,clientId:void 0,clientSecret:void 0,displayName:void 0,fromAddress:void 0,password:void 0,replyToAddress:void 0,scopes:void 0,smtpPort:void 0,smtpServerHost:void 0,tokenEndpoint:void 0,userName:void 0};return null!=e&&e.fromAddress||(r.fromAddress=x("extensions:develop.emailProviders.form.validations.required")),null!=e&&e.smtpPort||(r.smtpPort=x("extensions:develop.emailProviders.form.validations.required")),null!=e&&e.smtpServerHost||(r.smtpServerHost=x("extensions:develop.emailProviders.form.validations.required")),null!=e&&e.replyToAddress||(r.replyToAddress=x("extensions:develop.emailProviders.form.validations.required")),null!=e&&e.displayName||(r.displayName=x("extensions:develop.emailProviders.form.validations.required")),null!=e&&e.smtpPort&&(!E.I.isInteger(e.smtpPort)||e.smtpPort<0)&&(r.smtpPort=x("extensions:develop.emailProviders.form.validations.portInvalid")),null==e||!e.fromAddress||null!=G&&null!==(t=G.EMAIL_REGEX)&&void 0!==t&&t.test(e.fromAddress)||(r.fromAddress=x("extensions:develop.emailProviders.form.validations.emailInvalid")),null==e||!e.replyToAddress||null!=G&&null!==(n=G.EMAIL_REGEX)&&void 0!==n&&n.test(e.replyToAddress)||(r.replyToAddress=x("extensions:develop.emailProviders.form.validations.emailInvalid")),ce||(null!=e&&e.authType||(null==e?void 0:e.authType)===F.BASIC||(null==e?void 0:e.authType)===F.CLIENT_CREDENTIAL||(r.authType=x("extensions:develop.emailProviders.form.validations.required")),(null==e?void 0:e.authType)===F.BASIC&&(null!=e&&e.userName||(r.userName=x("extensions:develop.emailProviders.form.validations.required")),null!=e&&e.password||(r.password=x("extensions:develop.emailProviders.form.validations.required"))),(null==e?void 0:e.authType)===F.CLIENT_CREDENTIAL&&(null!=e&&e.clientId||(r.clientId=x("extensions:develop.emailProviders.form.validations.required")),null!=e&&e.clientSecret||(r.clientSecret=x("extensions:develop.emailProviders.form.validations.required")),null!=e&&e.tokenEndpoint||(r.tokenEndpoint=x("extensions:develop.emailProviders.form.validations.required")),null!=e&&e.scopes||(r.scopes=x("extensions:develop.emailProviders.form.validations.required")))),r},autoComplete:"new-password",formState:U},g.createElement(w.Z,null,g.createElement(w.Z.Row,{columns:2,key:1},g.createElement(w.Z.Column,{key:"smtpServerHost"},g.createElement(f.gN.Input,{ariaLabel:"SMTP Server Host Field",inputType:"default",name:"smtpServerHost",label:x("extensions:develop.emailProviders.form.smtpServerHost.label"),placeholder:x("extensions:develop.emailProviders.form.smtpServerHost.placeholder"),hint:g.createElement(_.c,{i18nKey:"extensions:develop.emailProviders.form.smtpServerHost.hint"},"The Server Host usually begins with",g.createElement(h.EK,null,"smtp"),", followed by the domain name of the email service provider."),required:!0,value:null==W?void 0:W.smtpServerHost,readOnly:!j,maxLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MIN_LENGTH,width:16,"data-componentid":"".concat(O,"-smtp-server-host"),autoComplete:"new-password"})),g.createElement(w.Z.Column,{key:"smtpPort"},g.createElement(f.gN.Input,{ariaLabel:"SMTP Server Port Field",inputType:"number",name:"smtpPort",label:x("extensions:develop.emailProviders.form.smtpPort.label"),placeholder:x("extensions:develop.emailProviders.form.smtpPort.placeholder"),hint:g.createElement(_.c,{i18nKey:"extensions:develop.emailProviders.form.smtpPort.hint"},"For security reasons, we currently support port ",g.createElement(h.EK,null,"587")," only."),required:!0,value:null==W?void 0:W.smtpPort,readOnly:!j,maxLength:G.EMAIL_PROVIDER_SERVER_PORT_MAX_LENGTH,minLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MIN_LENGTH,width:16,"data-componentid":"".concat(O,"-smtp-server-port"),autoComplete:"new-password"}))),g.createElement(w.Z.Row,{columns:2,key:2},g.createElement(w.Z.Column,{key:"fromAddress"},g.createElement(f.gN.Input,{ariaLabel:"From Address Field",inputType:"email",name:"fromAddress",label:x("extensions:develop.emailProviders.form.fromAddress.label"),placeholder:x("extensions:develop.emailProviders.form.fromAddress.placeholder"),hint:x("extensions:develop.emailProviders.form.fromAddress.hint"),required:!0,value:null==W?void 0:W.fromAddress,readOnly:!j,maxLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MIN_LENGTH,width:16,"data-componentid":"".concat(O,"-smtp-from-address"),autoComplete:"new-password"})),g.createElement(w.Z.Column,{key:"replyToAddress"},g.createElement(f.gN.Input,{ariaLabel:"Reply-To Field",inputType:"email",name:"replyToAddress",label:x("extensions:develop.emailProviders.form.replyToAddress.label"),placeholder:x("extensions:develop.emailProviders.form.replyToAddress.placeholder"),hint:x("extensions:develop.emailProviders.form.replyToAddress.hint"),required:!0,value:null==W?void 0:W.replyToAddress,readOnly:!j,maxLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MIN_LENGTH,width:16,"data-componentid":"".concat(O,"-smtp-reply-to-address"),autoComplete:"new-password"}))),ce&&g.createElement(w.Z.Row,{columns:2,key:3},g.createElement(w.Z.Column,{key:"userName"},g.createElement(f.gN.Input,{ariaLabel:"Username Field",inputType:"default",name:"userName",label:x("extensions:develop.emailProviders.form.userName.label"),placeholder:x("extensions:develop.emailProviders.form.userName.placeholder"),hint:x("extensions:develop.emailProviders.form.userName.hint"),required:!0,value:null==W?void 0:W.userName,readOnly:!j,maxLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MIN_LENGTH,width:16,"data-componentid":"".concat(O,"-smtp-username"),autoComplete:"new-password"})),g.createElement(w.Z.Column,{key:"password"},g.createElement(f.gN.Input,{ariaLabel:"Password Field",inputType:"password",type:"password",name:"password",label:x("extensions:develop.emailProviders.form.password.label"),placeholder:x("extensions:develop.emailProviders.form.password.placeholder"),hint:x("extensions:develop.emailProviders.form.password.hint"),required:!0,value:null==W?void 0:W.password,readOnly:!j,maxLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MIN_LENGTH,width:16,"data-componentid":"".concat(O,"-smtp-password"),autoComplete:"new-password"}))),g.createElement(w.Z.Row,{columns:2,key:3},g.createElement(w.Z.Column,{key:"displayName"},g.createElement(f.gN.Input,{ariaLabel:"Display Name Field",inputType:"default",name:"displayName",label:x("extensions:develop.emailProviders.form.displayName.label"),placeholder:x("extensions:develop.emailProviders.form.displayName.placeholder"),hint:x("extensions:develop.emailProviders.form.displayName.hint"),required:!0,value:null==W?void 0:W.displayName,readOnly:!j,maxLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:G.EMAIL_PROVIDER_CONFIG_FIELD_MIN_LENGTH,width:16,"data-componentid":"".concat(O,"-smtp-displayName"),autoComplete:"new-password"})))),!ce&&g.createElement("div",null,g.createElement(L.Z,{className:"divider-container"}),g.createElement(h.X6,{className:"heading-container",as:"h5"},x("emailProviders:fields.authenticationTypeDropdown.title")),(!pe[0]||se)&&g.createElement(a.Z,{className:"box-container"},g.createElement("div",{className:"box-field"},g.createElement(f.gN.Dropdown,{ariaLabel:"authType",name:"authType",label:x("emailProviders:fields.authenticationTypeDropdown.label"),placeholder:x("emailProviders:fields.authenticationTypeDropdown.placeholder"),displayEmpty:!0,required:!0,value:Ee,options:te(G.AUTH_TYPES.map((function(e){return{text:x(e.text),value:e.value.toString()}}))),listen:Le,enableReinitialize:!0,"data-componentid":"".concat(O,"-authentication-dropdown"),width:16}),pe[0]?g.createElement(h.kW,{className:"hint-text",compact:!0},x("emailProviders:fields.authenticationTypeDropdown.hint.update")):g.createElement(h.kW,{className:"hint-text",compact:!0},x("emailProviders:fields.authenticationTypeDropdown.hint.create")),function(){switch(Ee){case F.BASIC:return g.createElement(g.Fragment,null,g.createElement(f.gN.Input,{ariaLabel:"username",className:"addon-field-wrapper",name:"userName",label:x("emailProviders:fields.authenticationTypeDropdown.authProperties.username.label"),placeholder:x("emailProviders:fields.authenticationTypeDropdown.authProperties.username.placeholder"),inputType:"password",type:_e?"text":"password",InputProps:{endAdornment:we(_e,(function(){return Ie(!_e)}))},required:!0,maxLength:100,minLength:0,"data-componentid":"".concat(O,"-endpoint-authentication-property-username"),width:16}),g.createElement(f.gN.Input,{ariaLabel:"password",className:"addon-field-wrapper",label:x("emailProviders:fields.authenticationTypeDropdown.authProperties.password.label"),placeholder:x("emailProviders:fields.authenticationTypeDropdown.authProperties.password.placeholder"),name:"password",inputType:"password",type:Ne?"text":"password",InputProps:{endAdornment:we(Ne,(function(){return Te(!Ne)}))},required:!0,maxLength:100,minLength:0,"data-componentid":"".concat(O,"-endpoint-authentication-property-password"),width:16}));case F.CLIENT_CREDENTIAL:return g.createElement(g.Fragment,null,g.createElement(f.gN.Input,{ariaLabel:"clientId",className:"addon-field-wrapper",name:"clientId",inputType:"password",type:_e?"text":"password",InputProps:{endAdornment:we(_e,(function(){return Te(!_e)}))},label:x("emailProviders:fields.authenticationTypeDropdown.authProperties.clientID.label"),placeholder:x("emailProviders:fields.authenticationTypeDropdown.authProperties.clientID.placeholder"),required:!0,maxLength:100,minLength:0,"data-componentid":"".concat(O,"-endpoint-authentication-property-value"),width:16}),g.createElement(f.gN.Input,{ariaLabel:"clientSecret",className:"addon-field-wrapper",name:"clientSecret",inputType:"password",type:Ne?"text":"password",InputProps:{endAdornment:we(Ne,(function(){return Te(!Ne)}))},label:x("emailProviders:fields.authenticationTypeDropdown.authProperties.clientSecret.label"),placeholder:x("emailProviders:fields.authenticationTypeDropdown.authProperties.clientSecret.placeholder"),required:!0,maxLength:100,minLength:0,"data-componentid":"".concat(O,"-endpoint-authentication-property-value"),width:16}),g.createElement(f.gN.Input,{ariaLabel:"tokenEndpoint",name:"tokenEndpoint",inputType:"text",type:"text",label:x("emailProviders:fields.authenticationTypeDropdown.authProperties.tokenEndpoint.label"),placeholder:x("emailProviders:fields.authenticationTypeDropdown.authProperties.tokenEndpoint.placeholder"),required:!0,maxLength:100,minLength:0,"data-componentid":"".concat(O,"-endpoint-authentication-property-value"),width:16}),g.createElement(f.gN.Input,{ariaLabel:"scopes",name:"scopes",inputType:"text",type:"text",label:x("emailProviders:fields.authenticationTypeDropdown.authProperties.scopes.label"),placeholder:x("emailProviders:fields.authenticationTypeDropdown.authProperties.scopes.placeholder"),required:!0,maxLength:100,minLength:0,"data-componentid":"".concat(O,"-endpoint-authentication-property-value"),width:16}))}}(),se&&g.createElement(l.Z,{onClick:function(){de(!1),U.current&&(U.current.change("userName",""),U.current.change("password",""),U.current.change("clientId",""),U.current.change("clientSecret",""),U.current.change("tokenEndpoint",""),U.current.change("scopes",""))},variant:"outlined",size:"small",className:"secondary-button","data-componentid":"".concat(O,"\n                                                                            -cancel-edit-authentication-button")},x("actions:buttons.cancel")))),pe[0]&&!se&&g.createElement(o.Z,{className:"alert-nutral",icon:!1},g.createElement(i.Z,{className:"alert-title","data-componentid":"".concat(O,"-authentication-info-box-title")},g.createElement(_.c,{i18nKey:x("actions:fields.authentication.info.title.otherAuthType",{authType:function(){if(pe[0])switch(pe[0].authType){case F.BASIC:return x("emailProviders:fields.authentication.types.basic.name");case F.CLIENT_CREDENTIAL:return x("emailProviders:fields.authentication.types.clientCredential.name");default:return}}()}),components:{strong:g.createElement("strong",null)}})),g.createElement(_.c,{i18nKey:x("actions:fields.authentication.info.message")},"If you are changing the authentication, be aware that the authentication secrets of the external endpoint need to be updated."),g.createElement("div",null,g.createElement(l.Z,{onClick:Re,variant:"outlined",size:"small",className:"secondary-button","data-componentid":"".concat(O,"-change-authentication-button")},x("actions:buttons.changeAuthentication")))))),j&&g.createElement(g.Fragment,null,g.createElement(w.Z.Row,{columns:1,className:"mt-6"},g.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},g.createElement(h.KM,{size:"small",loading:K,onClick:function(){var e;null==Z||null===(e=Z.current)||void 0===e||e.triggerSubmit()},ariaLabel:"Email provider form update button","data-componentid":"".concat(O,"-update-button")},x("extensions:develop.emailProviders.updateButton"))))))),j&&!me&&g.createElement(g.Fragment,null,g.createElement(L.Z,{hidden:!0}),g.createElement(h.v9,{sectionHeader:x("extensions:develop.emailProviders.dangerZoneGroup.header")},g.createElement(h.cN,{"data-componentid":"".concat(O,"-revert-email-provider-config"),actionTitle:x("extensions:develop.emailProviders.dangerZoneGroup.revertConfig.actionTitle"),header:x("extensions:develop.emailProviders.dangerZoneGroup.revertConfig.heading"),subheader:x("extensions:develop.emailProviders.dangerZoneGroup.revertConfig.subHeading"),onActionClick:function(){ae(!0)}})),g.createElement(h.cV,{primaryActionLoading:K,"data-componentid":"".concat(O,"-revert-confirmation-modal"),onClose:function(){return ae(!1)},type:"negative",open:ie,assertionHint:x("extensions:develop.emailProviders.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:x("common:confirm"),secondaryAction:x("common:cancel"),onSecondaryActionClick:function(){return ae(!1)},onPrimaryActionClick:function(){Y(!0),Oe().finally((function(){Y(!1),ae(!1)})),de(!1)},closeOnDimmerClick:!1},g.createElement(h.cV.Header,{"data-componentid":"".concat(O,"-revert-confirmation-modal-header")},x("extensions:develop.emailProviders.confirmationModal.header")),g.createElement(h.cV.Message,{"data-componentid":"".concat(O,"-revert-confirmation-modal-message"),attached:!0,negative:!0},x("extensions:develop.emailProviders.confirmationModal.message")),g.createElement(h.cV.Content,null,x("extensions:develop.emailProviders.confirmationModal.content"))))))))))};le.defaultProps={"data-componentid":"email-providers-page"};const se=le},15551:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(92336),o=n(31549),i=n(5315),a=n(14517);const l=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,l=(0,r.__rest)(e,["className"]);return(0,o.jsx)(i.Z,Object.assign({ref:t,className:(0,a.Z)("oxygen-alert-title","OxygenAlertTitle-root",n)},l))}))},75502:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),o=n.n(r),i=n(83948),a=n.n(i)()(o());a.push([e.id,".email-providers-page-password-deprecated-banner .ignore-once-button{color:#788997}.email-providers-page-password-deprecated-banner .banner-wrapper{margin-bottom:20px}.email-provider-config-page .form-wrapper .form-container{margin-top:0px;margin-bottom:0px}.email-provider-config-page .form-wrapper .box-container{background-color:#f9fafb;border-radius:8px;padding:30px}.email-provider-config-page .form-wrapper .box-container .box-field{margin-top:20px;margin-left:10px;margin-right:10px}.email-provider-config-page .form-wrapper .text-field-container{margin-top:8px;margin-bottom:8px}.email-provider-config-page .form-wrapper .select-field-container{margin-bottom:8px}.email-provider-config-page .form-wrapper .hint-text{margin-top:0px;margin-bottom:8px}.email-provider-config-page .form-wrapper .divider-container{margin-top:20px;margin-bottom:20px}.email-provider-config-page .form-wrapper .heading-container{margin-top:20px;margin-bottom:20px}.email-provider-config-page .form-wrapper .button-container{margin-top:30px}.email-provider-config-page .form-wrapper .alert-title{font-weight:100}.email-provider-config-page .form-wrapper .secondary-button{margin-top:10px}.email-provider-config-page .form-wrapper .placeholder{border-radius:8px;margin-bottom:8px}.email-provider-config-page .form-wrapper .placeholder.label{height:20px;max-width:100px}.email-provider-config-page .form-wrapper .placeholder.text-field{height:40px}.email-provider-config-page .form-wrapper .placeholder-box>*{margin-bottom:8px}",""]);const l=a}}]);