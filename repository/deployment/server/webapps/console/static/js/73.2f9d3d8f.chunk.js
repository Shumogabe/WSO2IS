"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[73],{73:(e,n,t)=>{t.r(n),t.d(n,{default:()=>M});var a=t(9821),i=t(60486),o=t(40838),r=t(33839),l=t(44485),c=t(6833),u=t(82406),s=t(79438),m=t(78132),d=t(44194),g=t(10479),f=t(47245),p=t(41206),E=t(89141);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function A(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,I(a.key),a)}}function v(e,n,t){return n&&A(e.prototype,n),t&&A(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L(e,n,t){return(n=I(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e){var n=function(e,n){if("object"!=N(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,n||"default");if("object"!=N(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==N(n)?n:n+""}var b=v((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));L(b,"VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS",{MIN_LENGTH:1,MIN_VALUE:0,USERNAME_MAX_LENGTH:2,USERNAME_MAX_VALUE:50,USERNAME_MIN_LENGTH:1,USERNAME_MIN_VALUE:3}),L(b,"VALIDATION_DEFAULT_CONSTANTS",{USERNAME_MAX:"50",USERNAME_MIN:"3"});var O=function(e){return e.EMAIL="emailType",e.ALPHANUMERIC="customType",e}({});function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){y(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,n||"default");if("object"!=_(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==_(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function S(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,i,o,r,l=[],c=!0,u=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(a=o.call(t)).done)&&(l.push(a.value),l.length!==n);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(u)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return R(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?R(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}var U="username-validation-form",x=function(e){var n=e["data-componentid"],t=(0,f.I0)(),N=(0,d.useRef)(null),A=(0,g.$)().t,v=S((0,d.useState)(!1),2),L=v[0],I=v[1],_=S((0,d.useState)(void 0),2),T=_[0],y=_[1],R=S((0,d.useState)(!1),2),x=R[0],M=R[1],V=S((0,d.useState)(void 0),2),C=V[0],D=V[1],P=(0,r.Wf)(),w=P.data,F=P.isLoading,j=P.error,G=P.mutate,k=null==w?void 0:w.filter((function(e){return"password"===e.field}));(0,d.useEffect)((function(){F||w&&H()}),[F]),(0,d.useEffect)((function(){o.m.location.state===a.jo.APPLICATION_STATE&&M(!0)}),[]),(0,d.useEffect)((function(){if(j)if(j.response&&j.response.data&&j.response.data.description){var e;if(404===j.response.status)return;t((0,u.V_)({description:null!==(e=j.response.data.description)&&void 0!==e?e:A("extensions:manage.accountLogin.notifications.error.description"),level:c.QU.ERROR,message:A("extensions:manage.accountLogin.notifications.error.message")}))}else t((0,u.V_)({description:A("extensions:manage.accountLogin.notifications.genericError.description"),level:c.QU.ERROR,message:A("extensions:manage.accountLogin.notifications.genericError.message")}))}),[j]);var H=function(){var e=null==w?void 0:w.filter((function(e){return"username"===e.field}));if(!((null==e?void 0:e.length)<1)){var n=e[0].rules,t={enableValidator:"true"==X(n,"AlphanumericValidator","enable.validator")||"true"!=X(n,"EmailFormatValidator","enable.validator")?"true":"false",field:"username",isAlphanumericOnly:"true"!==X(n,"AlphanumericValidator","enable.special.characters"),maxLength:X(n,"LengthValidator","max.length")?X(n,"LengthValidator","max.length"):b.VALIDATION_DEFAULT_CONSTANTS.USERNAME_MAX,minLength:X(n,"LengthValidator","min.length")?X(n,"LengthValidator","min.length"):b.VALIDATION_DEFAULT_CONSTANTS.USERNAME_MIN,type:"rules"};y(t),D(t)}},X=function(e,n,t){var a=null==e?void 0:e.filter((function(e){return e.validator===n}));if((null==a?void 0:a.length)>0){var i,o=a[0].properties;if((null===(i=o=o.filter((function(e){return e.key===t})))||void 0===i?void 0:i.length)>0)return o[0].value}return null},Z=function(){I(!0),(0,r.Tf)([l.Pv.USERNAME]).then((function(){G(),t((0,u.V_)({description:A("extensions:manage.accountLogin.notifications.revert.success.description"),level:c.QU.SUCCESS,message:A("extensions:manage.accountLogin.notifications.revert.success.message")}))})).catch((function(){t((0,u.V_)({description:A("extensions:manage.accountLogin.notifications.revert.error.description"),level:c.QU.ERROR,message:A("extensions:manage.accountLogin.notifications.revert.error.message")}))})).finally((function(){I(!1)}))},Q=function(e){(function(e){var n=!1,a="";return Number(e.minLength)<3?(n=!0,a=A("extensions:manage.accountLogin.validationError.minLimitError")):Number(e.maxLength)>50?(n=!0,a=A("extensions:manage.accountLogin.validationError.maxLimitError")):Number(e.minLength)>Number(e.maxLength)&&(n=!0,a=A("extensions:manage.accountLogin.validationError.minMaxMismatch")),!n||(t((0,u.V_)({description:a,level:c.QU.ERROR,message:A("extensions:manage.accountLogin.validationError.wrongCombination")})),!1)})(e)&&(I(!0),(0,r.sM)(e,k[0],null).then((function(){G(),t((0,u.V_)({description:A("extensions:manage.accountLogin.notifications.success.description"),level:c.QU.SUCCESS,message:A("validation:notifications.success.message")}))})).catch((function(e){var n,a,i,o,r,l,s;null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(n=n.data)&&void 0!==n&&n.description?t((0,u.V_)({description:null!==(a=null!==(i=null==e||null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description)&&void 0!==i?i:null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)&&void 0!==a?a:A("extensions:manage.accountLogin.notifications.error.description"),level:c.QU.ERROR,message:null!==(l=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==l?l:A("extensions:manage.accountLogin.notifications.error.message")})):t((0,u.V_)({description:A("extensions:manage.accountLogin.notifications.genericError.description"),level:c.QU.ERROR,message:A("extensions:manage.accountLogin.notifications.genericError.message")}))})).finally((function(){I(!1)})))};return d.createElement(m.Xg,{pageTitle:A("extensions:manage.accountLogin.editPage.pageTitle"),title:d.createElement(d.Fragment,null,A("extensions:manage.accountLogin.editPage.pageTitle")),description:d.createElement(d.Fragment,null,A("extensions:manage.accountLogin.editPage.description")),"data-componentid":"".concat(n,"-page-layout"),backButton:{"data-testid":"".concat(n,"-page-back-button"),onClick:function(){x?o.m.push(i.$.getPaths().get("APPLICATIONS")):o.m.push(i.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:A(x?"extensions:manage.accountLogin.goBackToApplication":"governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0},d.createElement(p.R,{innerRef:N},d.createElement(E.Z,{className:"mt-3"},d.createElement(E.Z.Row,{columns:1},d.createElement(E.Z.Column,{width:16},d.createElement(m.pJ,{className:"form-wrapper",padded:"very"},T&&C?d.createElement("div",{className:"validation-configurations password-validation-configurations"},d.createElement(s.l0,{id:U,initialValues:T,uncontrolledForm:!0,validate:null,onSubmit:function(e){return Q(e)}},d.createElement("div",null,d.createElement(m.xv,null,A("extensions:manage.accountLogin.editPage.usernameType")),d.createElement(m.kW,{compact:!0},A("extensions:manage.accountLogin.editPage.usernameTypeHint"))),d.createElement("div",null,Object.keys(O).map((function(e,t){var a=O[e];return d.createElement(s.gN.Radio,{key:t,ariaLabel:"".concat(a," layout swatch"),name:"enableValidator",label:A("extensions:manage.accountLogin.editPage."+a),required:!1,value:"customType"==a?"true":"false","data-componentid":"".concat(n,"-").concat(a,"-radio"),listen:function(){D(h(h({},C),{},{enableValidator:"customType"==a?"true":"false"}))}})}))),"true"==(null==C?void 0:C.enableValidator)&&d.createElement("div",{className:"ml-6"},d.createElement("div",{className:"criteria-username"},d.createElement(m.xv,null,A("extensions:manage.accountLogin.editPage.usernameLength.0")),d.createElement(s.gN.Input,{ariaLabel:"minLength",inputType:"number",name:"minLength",min:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE,max:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE,width:2,required:!0,hidden:!1,placeholder:"min",maxLength:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_LENGTH,minLength:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_LENGTH,validation:function(e,n){var t=parseInt(e),a=b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE;if(t<a)return A("common:minValidation",{min:a});var i=n.maxLength?parseInt(n.maxLength):b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE;return t>i?A("common:maxValidation",{max:i}):void 0},listen:function(e){D(h(h({},C),{},{minLength:e}))},readOnly:!1,disabled:!1,"data-testid":"".concat(n,"-min-length")}),d.createElement("label",null,A("extensions:manage.accountLogin.editPage.usernameLength.1")),d.createElement(s.gN.Input,{ariaLabel:"maxLength",inputType:"number",name:"maxLength",min:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE,max:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE,width:2,required:!0,hidden:!1,placeholder:"max",maxLength:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_LENGTH,labelPosition:"top",minLength:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_LENGTH,validation:function(e,n){var t=parseInt(e),a=n.minLength?parseInt(n.minLength):b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE;if(t<a)return A("common:minValidation",{min:a});var i=b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE;return t>i?A("common:maxValidation",{max:i}):void 0},listen:function(e){D(h(h({},C),{},{maxLength:e}))},readOnly:!1,disabled:!1,"data-testid":"".concat(n,"-max-length")}),d.createElement("label",null,A("extensions:manage.accountLogin.editPage.usernameLength.2"))),d.createElement(s.gN.Checkbox,{ariaLabel:"isAlphanumericOnly",name:"isAlphanumericOnly",label:A("extensions:manage.accountLogin.editPage.usernameAlphanumeric"),tabIndex:3,hint:C.isAlphanumericOnly?void 0:A("extensions:manage.accountLogin.editPage.usernameSpecialCharsHint"),listen:function(e){return D(h(h({},C),{},{isAlphanumericOnly:e}))},width:16,defaultValue:T,"data-componentid":"".concat(n,"-is-alphanumeric-only")})),d.createElement(s.gN.Button,{form:U,size:"small",buttonType:"primary_btn",ariaLabel:"Self registration update button",name:"update-button","data-testid":"".concat(n,"-submit-button"),disabled:null,loading:L,label:A("common:update"),hidden:null}))):d.createElement(m.pO,null)))),d.createElement(E.Z.Row,{columns:1},d.createElement(E.Z.Column,{width:16},d.createElement(m.v9,{sectionHeader:A("common:dangerZone")},d.createElement(m.cN,{actionTitle:A("governanceConnectors:dangerZone.actionTitle"),header:A("governanceConnectors:dangerZone.heading"),subheader:A("governanceConnectors:dangerZone.subHeading"),onActionClick:function(){return Z()},"data-componentid":"".concat(n,"-danger-zone")})))))))};x.defaultProps={"data-componentid":"username-validation-edit-page"};const M=x}}]);