"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[1362],{95775:(t,e,n)=>{n.d(e,{b:()=>i});var r=n(96124),a=n(76271),o=n(6833),i=function(t,e,n,i){var l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c={headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.GET,params:{after:n,before:i,filter:t,limit:e,recursive:l},url:(u?a.h.getState().config.endpoints.rootOrganization:a.h.getState().config.endpoints.organizations)+"/organizations/meta-attributes"},s=(0,r.Z)(c,{revalidateIfStale:!1});return{data:s.data,error:s.error,isLoading:s.isLoading,isValidating:s.isValidating,mutate:s.mutate}}},41362:(t,e,n)=>{n.r(e),n.d(e,{default:()=>ct});var r=n(55007),a=n(9821),o=n(25134),i=n(56139),l=n(90302),u=n(43974),c=n(86105),s=n(6833),f=n(82406),m=n(61444),d=n(78132),p=n(90408),g=n(50699),b=n(44194),v=n(10479),h=n(47245),y=n(26154),E=n(90955),S=n(25508),I=n(900),O=n(27331),z=n(8976),A=n(22557),L=n.n(A),T=n(55495),C=n(71619),R=n(51835),w=n.n(R),P=n(27975),_=n.n(P),j=n(55900),k=n.n(j),M=n(21555),F=n.n(M),D=n(3621),x=n.n(D),N=n(5062),Z=n.n(N),U=n(26200),V={};V.styleTagTransform=Z(),V.setAttributes=F(),V.insert=k().bind(null,"head"),V.domAPI=_(),V.insertStyleElement=x();w()(U.Z,V);U.Z&&U.Z.locals&&U.Z.locals;var Q=n(72968),B=n(12638),X=n(95775);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q.apply(null,arguments)}function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){W(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J(t){return function(t){if(Array.isArray(t))return tt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||H(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(t,e)||H(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){if(t){if("string"==typeof t)return tt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(t,e):void 0}}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const et=function(t){var e=t.onMetaAttributeChange,n=t.hasErrors,r=t["data-componentid"],a=void 0===r?"organization-meta-attribute":r,o=(0,v.$)().t,i=(0,h.I0)(),l=Y((0,b.useState)([]),2),u=l[0],c=l[1],m=Y((0,b.useState)(""),2),d=m[0],p=m[1],g=Y((0,b.useState)(!0),2),y=g[0],E=g[1],S=Y((0,b.useState)(null),2),A=S[0],R=S[1],w=Y((0,b.useState)({after:void 0,filter:void 0,limit:10}),2),P=w[0],_=w[1],j=(0,X.b)(P.filter,P.limit,P.after),k=j.data,M=j.isLoading,F=j.error,D=j.isValidating;(0,b.useEffect)((function(){var t,e;if(k&&!M&&!D){var n=(null===(t=k.attributes)||void 0===t?void 0:t.map((function(t){return{text:t,value:t}})))||[];c((function(t){return[].concat(J(t),J(n))}));var r=!1;null==k||null===(e=k.links)||void 0===e||e.forEach((function(t){if("next"===t.rel){var e=t.href.split("after=")[1];R(e),E(!!e),r=!0}})),r||(R(""),E(!1))}}),[k]),(0,b.useEffect)((function(){F&&i((0,f.V_)({description:o("organizations:notifications.getMetaAttributesList.genericError.description"),level:s.QU.ERROR,message:o("organizations:notifications.getMetaAttributesList.genericError.message")}))}),[F]);var x=function(t,e){R(t),p(e),_((function(n){return K(K({},n),{},{after:t,filter:e?"".concat("attributes co ").concat(e):""})}))},N=(0,b.useCallback)((0,T.Z)((function(t,e){var n=null!=e?e:"";c([]),x("",n)}),300),[x]),Z=function(){!y||M||D||x(A,d)},U=(0,b.useMemo)((function(){return function(t){return b.createElement(C.Z,{dataLength:u.length,next:Z,hasMore:y,loader:b.createElement(Q.Z,{className:"meta-attribute-autocomplete"},b.createElement(O.Z,{size:22,className:"list-item-loader"}),b.createElement(Q.Z.Content,{className:"list-item-content"})),height:u.length>4?155:"auto"},b.createElement("div",q({style:{overflow:"visible"}},t)))}}),[u.length,Z,y]);return b.createElement("div",{className:L()("meta-attribute-autocomplete",{error:n}),"data-componentid":"".concat(a,"-autocomplete")},b.createElement(I.Z,{disablePortal:!0,fullWidth:!0,"aria-label":"Meta Attribute selection",componentsProps:{paper:{elevation:2},popper:{modifiers:[{enabled:!1,name:"flip"},{enabled:!1,name:"preventOverflow"}]}},getOptionLabel:function(t){return t.text},isOptionEqualToValue:function(t,e){return t.value===e.value},renderOption:function(t,e){return b.createElement("li",t,b.createElement(B.Z.Content,null,e.text))},options:u,onChange:function(t,n){var r=n&&n.value?n.value:"";e(r)},onInputChange:N,noOptionsText:o("common:noResultsFound"),ListboxComponent:U,renderInput:function(t){return b.createElement(z.Z,q({},t,{label:o("organizations:advancedSearch.form.inputs.filterMetaAttribute.label"),placeholder:o("organizations:advancedSearch.form.inputs.filterMetaAttribute.placeholder"),size:"small",InputLabelProps:{required:!0},onKeyDown:function(t){"Enter"===t.key&&t.preventDefault()},"data-componentid":"".concat(a,"-input-field")}))}}),n&&b.createElement("div",{className:"ui pointing above prompt label",role:"alert","aria-atomic":"true"},b.createElement("p",null,o("organizations:advancedSearch.form.inputs.filterMetaAttribute.validations.empty"))))};var nt=n(87029);function rt(t){return function(t){if(Array.isArray(t))return it(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ot(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(t,e)||ot(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){if(t){if("string"==typeof t)return it(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(t,e):void 0}}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var lt=[{key:0,text:m.I18n.instance.t("common:name"),value:"name"}],ut=function(t){var e,n,m,I,O,z,A=t["data-componentid"],L=(0,h.v9)((function(t){return t.config.ui.features})),T=(0,v.$)().t,C=(0,h.I0)(),R=(0,d.fQ)().getLink,w=(0,r.EV)(null==L||null===(e=L.organizations)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.read),P=(0,c.cr)(L.organizations,"organizations.filterByMetadataAttributes"),_=at((0,b.useState)(null),2),j=_[0],k=_[1],M=at((0,b.useState)(""),2),F=M[0],D=M[1],x=at((0,b.useState)(lt[0]),2),N=x[0],Z=x[1],U=at((0,b.useState)(l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),V=U[0],Q=U[1],B=at((0,b.useState)(!1),2),X=B[0],$=B[1],q=at((0,b.useState)(!0),2),G=q[0],K=q[1],W=at((0,b.useState)(!1),2),J=W[0],Y=W[1],H=at((0,b.useState)(void 0),2),tt=H[0],ot=H[1],it=at((0,b.useState)(void 0),2),ut=it[0],ct=it[1],st=at((0,b.useState)(null),2),ft=st[0],mt=st[1],dt=at((0,b.useState)([]),2),pt=dt[0],gt=dt[1],bt=at((0,b.useState)(""),2),vt=bt[0],ht=bt[1],yt=at((0,b.useState)(""),2),Et=yt[0],St=yt[1],It=at((0,b.useState)(""),2),Ot=It[0],zt=It[1],At=at((0,b.useState)(""),2),Lt=At[0],Tt=At[1],Ct=at((0,b.useState)(1),2),Rt=Ct[0],wt=Ct[1],Pt=at((0,b.useState)(!1),2),_t=Pt[0],jt=Pt[1],kt=at((0,b.useState)(""),2),Mt=kt[0],Ft=kt[1],Dt=at((0,b.useState)(!1),2),xt=Dt[0],Nt=Dt[1],Zt=at((0,b.useState)(!1),2),Ut=Zt[0],Vt=Zt[1],Qt=u.l.getInstance(),Bt=at((0,b.useState)(!1),2),Xt=Bt[0],$t=Bt[1];(0,b.useEffect)((function(){var t,e=!1,n=!1;null==j||null===(t=j.links)||void 0===t||t.forEach((function(t){if("next"===t.rel){var r=t.href.split("after=")[1];ht(r),ot(!0),e=!0}if("previous"===t.rel){var a=t.href.split("before=")[1];St(a),ct(!0),n=!0}})),e||(ht(""),ot(!1)),n||(St(""),ct(!1))}),[j]);var qt=(0,b.useCallback)((function(){wt(1),$t(!qt)}),[wt]),Gt=(0,b.useMemo)((function(){return!ft||(0,g.Z)(ft)?F:"".concat(F?F+" and ":"","parentId eq ").concat(ft.id)}),[F,ft]),Kt=(0,b.useCallback)((function(t,e,n,r,a){w&&(K(!0),(0,E.jX)(e,t,n,r,a).then((function(t){k(t)})).catch((function(t){k(null),null!=t&&t.description?C((0,f.V_)({description:t.description,level:s.QU.ERROR,message:T("organizations:notifications.getOrganizationList.error.message")})):C((0,f.V_)({description:T("organizations:notifications.getOrganizationList.genericError.description"),level:s.QU.ERROR,message:T("organizations:notifications.getOrganizationList.genericError.message")}))})).finally((function(){K(!1)})))}),[E.jX,C,T,k,K]);(0,b.useEffect)((function(){Kt(V,Gt,null,null,X)}),[V,X,Kt,Gt]);var Wt=(0,E.IE)(Gt,V,Lt,Ot,a.jo.CONSOLE_APP_NAME,X),Jt=Wt.data,Yt=Wt.isLoading,Ht=Wt.error,te=Wt.mutate;(0,b.useEffect)((function(){Ht&&ee(Ht)}),[Ht]);var ee=function(t){var e,n;null!=t&&null!==(e=t.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?C((0,f.V_)({description:null==t||null===(n=t.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description,level:s.QU.ERROR,message:T("organizations:notifications.getOrganizationList.error.message")})):C((0,f.V_)({description:T("organizations:notifications.getOrganizationList.genericError.description"),level:s.QU.ERROR,message:T("organizations:notifications.getOrganizationList.genericError.message")}))},ne=(0,b.useCallback)((function(t){qt(),D(t),Ft(""),jt(!1)}),[qt,D]),re=(0,b.useCallback)((function(t,e){var n=parseInt(null==e?void 0:e.activePage);n>Rt?(Kt(V,Gt,vt,null),Tt(vt),zt(null)):n<Rt&&(Kt(V,Gt,null,Et),Tt(null),zt(Et)),wt(n)}),[Kt,Rt,Gt,V,vt,Et]),ae=(0,b.useCallback)((function(t,e){Q(e.value),qt()}),[Q,qt]),oe=function(){Kt(V,Gt,"",""),te()},ie=(0,b.useCallback)((function(){Vt((function(t){return!t})),D(""),qt()}),[D,qt,Vt]);return b.createElement(b.Fragment,null,b.createElement(d.Xg,{action:!G&&!Yt&&!(!F&&((0,g.Z)(j)||(null==j||null===(n=j.organizations)||void 0===n?void 0:n.length)<=0))&&(0,c.cr)(L.organizations,nt.a5.FEATURE_DICTIONARY.get("ORGANIZATION_CREATE"))&&b.createElement(r.di,{when:null==L||null===(m=L.organizations)||void 0===m||null===(m=m.scopes)||void 0===m?void 0:m.create},b.createElement(d.KM,{disabled:G,loading:G,onClick:function(){Qt.publish("organization-click-new-organization-button"),Y(!0)},"data-componentid":"".concat(A,"-list-layout-add-button")},b.createElement(y.Z,{name:"add"}),T("organizations:list.actions.add"))),pageTitle:T("pages:organizations.title"),title:T("pages:organizations.title"),description:b.createElement(b.Fragment,null,T("pages:organizations.subTitle"),b.createElement(d.eb,{link:R("manage.organizations.learnMore")},T("common:learnMore"))),"data-componentid":"".concat(A,"-page-layout")},b.createElement(d.PS,{advancedSearch:b.createElement(o.n,{onClose:function(){Ft(""),jt(!1)},onFilter:ne,onFilterAttributeOptionsChange:function(t){Nt(!1),"attributes"===t.get(i.s.FILTER_ATTRIBUTE_FIELD_IDENTIFIER)?jt(!0):(Ft(""),jt(!1))},onSubmitError:function(){var t=!1;return!_t||null!==Mt&&""!==Mt||(t=!0),Nt(t),t},getQuery:function(t){var e=JSON.parse(t.get(i.s.FILTER_RECURSIVE_FIELD_IDENTIFIER)||"false");return e!==X&&$(e),_t&&Mt?t.get(i.s.FILTER_ATTRIBUTE_FIELD_IDENTIFIER)+"."+Mt+" "+t.get(i.s.FILTER_CONDITION_FIELD_IDENTIFIER)+" "+t.get(i.s.FILTER_VALUES_FIELD_IDENTIFIER):null},resetRecursiveSearchState:function(){$(!1)},recursiveSearch:!0,filterAttributeOptions:[{key:0,text:T("common:name"),value:"name"}].concat(rt(P?[{key:1,text:T("common:metaAttributes"),value:"attributes"}]:[])),filterAttributePlaceholder:T("organizations:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:T("organizations:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:T("organizations:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:T("organizations:advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:Ut,"data-componentid":"".concat(A,"-list-advanced-search"),"data-testid":"".concat(A,"-list-advanced-search")},_t&&P&&b.createElement(et,{onMetaAttributeChange:function(t){Nt(!1),Ft(t)},hasErrors:xt})),currentListSize:null==j||null===(I=j.organizations)||void 0===I?void 0:I.length,listItemLimit:V,onItemsPerPageDropdownChange:ae,onPageChange:re,onSortStrategyChange:function(t,e){Z((0,p.Z)(lt,(function(t){return e.value===t.value})))},showPagination:!0,showTopActionPanel:G||(F||"").trim().length>0||(null==j||null===(O=j.organizations)||void 0===O?void 0:O.length)>0,sortOptions:lt,sortStrategy:N,totalPages:10,totalListSize:null==j||null===(z=j.organizations)||void 0===z?void 0:z.length,paginationOptions:{disableNextButton:!tt,disablePreviousButton:!ut},isLoading:G,"data-componentid":"".concat(A,"-list-layout"),resetPagination:Xt,activePage:Rt},b.createElement(S.Bg,{list:j,authorizedList:Jt,onOrganizationDelete:function(){Kt(V,Gt,"",""),zt(""),Tt("")},onEmptyListPlaceholderActionClick:function(){Y(!0)},onSearchQueryClear:ie,searchQuery:F,"data-componentid":"organization-list",onListItemClick:function(t,e){if(!pt.find((function(t){return t.id===e.id}))){ie(),mt(e),qt();var n=rt(pt);n.push(e),gt(n)}},parentOrganization:ft,onListMutate:oe})),J&&b.createElement(S.Xh,{onUpdate:oe,closeWizard:function(){return Y(!1)},parent:ft})))};ut.defaultProps={"data-componentid":"organizations"};const ct=ut},26200:(t,e,n)=>{n.d(e,{Z:()=>l});var r=n(81611),a=n.n(r),o=n(83948),i=n.n(o)()(a());i.push([t.id,".ui.form .meta-attribute-autocomplete{margin-bottom:1em}.ui.form .meta-attribute-autocomplete input{border:none}.ui.form .meta-attribute-autocomplete input:-ms-input-placeholder{font-size:1em;color:rgba(0,0,0,.95) !important}.ui.form .meta-attribute-autocomplete input::placeholder{font-size:1em;color:rgba(0,0,0,.95) !important}.ui.form .meta-attribute-autocomplete label{font-size:.92857143em;color:rgba(0,0,0,.87);margin-bottom:.28571429rem}.ui.form .meta-attribute-autocomplete .ui.label{white-space:normal;background:#fff !important;border:1px solid #e0b4b4 !important;color:#9f3a38 !important}.ui.form .meta-attribute-autocomplete .list-item-loader{margin:8px}.ui.form .meta-attribute-autocomplete .list-item-content{display:flex !important;align-items:center}.ui.form .meta-attribute-autocomplete .prompt.label{white-space:normal;background:#fff !important;border:1px solid #e0b4b4 !important;color:#9f3a38 !important}.ui.form .meta-attribute-autocomplete.error{color:#9f3a38}.ui.form .meta-attribute-autocomplete.error .MuiOutlinedInput-notchedOutline{border-color:#e0b4b4}.ui.form .meta-attribute-autocomplete.error .MuiSvgIcon-root{color:#9f3a38}.ui.form .meta-attribute-autocomplete.error .MuiTextField-root{background:#fff6f6;border-radius:8px}.ui.form .meta-attribute-autocomplete.error .MuiInputBase-input{background:#fff6f6}.ui.form .meta-attribute-autocomplete.error label{color:#9f3a38}.ui.form .meta-attribute-autocomplete.error input:-ms-input-placeholder{font-size:1em;color:#9f3a38 !important}.ui.form .meta-attribute-autocomplete.error input::placeholder{font-size:1em;color:#9f3a38 !important}",""]);const l=i}}]);