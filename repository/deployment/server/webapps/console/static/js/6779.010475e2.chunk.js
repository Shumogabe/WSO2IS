"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6779],{95202:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Z});var i=t(4372),o=t(80750),r=t(65986),a=t(91250),c=t(41534),l=t(77139),s=t(9821),u=t(17800),d=t(12252),m=t(60486),f=t(40838),g=t(68591),p=t(35887),v=t(22669),y=t(33839),b=t(6833),C=t(82406),h=t(79438),E=t(78132),S=t(50699),L=t(44194),I=t(10479),O=t(47245),N=t(26154);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function A(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){x(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function x(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!=R(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==R(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,o,r,a,c=[],l=!0,s=!1;try{if(r=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=r.call(t)).done)&&(c.push(i.value),c.length!==n);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,n)||P(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,n){if(e){if("string"==typeof e)return T(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,n):void 0}}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var M="alternative-login-identifier-form",j=function(e){var n=e["data-componentid"],t=(0,I.$)().t,R=(0,O.I0)(),U=p.vH.ACCOUNT_MANAGEMENT_CATEGORY_ID,x=p.vH.MULTI_ATTRIBUTE_LOGIN_CONNECTOR_ID,T=_((0,L.useState)(!1),2),j=T[0],Z=T[1],k=_((0,L.useState)(void 0),2),V=k[0],Q=k[1],D=_((0,L.useState)([]),2),B=D[0],H=D[1],F=_((0,L.useState)(!1),2),W=F[0],q=F[1],G=_((0,L.useState)(!1),2),$=G[0],z=G[1],Y=_((0,L.useState)(void 0),2),J=Y[0],K=Y[1],X=[d.QN.EMAIL_CLAIM_URI,d.QN.MOBILE_CLAIM_URI],ee=_((0,L.useState)(!1),2),ne=ee[0],te=ee[1],ie=_((0,L.useState)(!1),2),oe=ie[0],re=ie[1],ae=_((0,L.useState)(null),2),ce=ae[0],le=ae[1],se=(0,y.Wf)().data,ue=function(){(0,g.PP)(U,x).then((function(e){Q(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.detail?R((0,C.V_)({description:t("governanceConnectors:notifications.getConnector.error.description",{description:e.response.data.description}),level:b.QU.ERROR,message:t("governanceConnectors:notifications.getConnector.error.message")})):R((0,C.V_)({description:t("governanceConnectors:notifications.getConnector.genericError.description"),level:b.QU.ERROR,message:t("governanceConnectors:notifications.getConnector.genericError.message")}))}))},de=function(){(0,u.WN)({"exclude-hidden-claims":!0,filter:null,limit:null,offset:null,sort:null}).then((function(e){var n=null==e?void 0:e.filter((function(e){return X.includes(e.claimURI)}));H(n)})).catch((function(){R((0,C.V_)({description:t("claims:local.notifications.fetchLocalClaims.genericError.description"),level:b.QU.ERROR,message:t("claims:local.notifications.fetchLocalClaims.genericError.message")}))}))},me=function(){var e;z(!0);var n={properties:null==V||null===(e=V.properties)||void 0===e?void 0:e.map((function(e){return e.name}))};(0,g.Mo)(U,x,n).then((function(){R((0,C.V_)({description:t("governanceConnectors:notifications.revertConnector.success.description"),level:b.QU.SUCCESS,message:t("governanceConnectors:notifications.revertConnector.success.message")})),ue()})).catch((function(){R((0,C.V_)({description:t("governanceConnectors:notifications.revertConnector.error.description"),level:b.QU.ERROR,message:t("governanceConnectors:notifications.revertConnector.error.message")}))})).finally((function(){z(!1)}))},fe=function(e,n){var i={operation:"UPDATE",properties:[]};for(var o in e)i.properties.push({name:o,value:e[o]});z(!0),q(!0),(0,g.u9)(i,U,x).then((function(){n.length>0&&ve(n),R((0,C.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.notification.success.description"),level:b.QU.SUCCESS,message:t("governanceConnectors:notifications.updateConnector.success.message")})),ue()})).catch((function(e){!function(e){e.response&&e.response.data&&e.response.data.detail?R((0,C.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.notification.error.description"),level:b.QU.ERROR,message:t("governanceConnectors:notifications.updateConnector.error.message")})):R((0,C.V_)({description:t("governanceConnectors:notifications.updateConnector.genericError.description"),level:b.QU.ERROR,message:t("governanceConnectors:notifications.updateConnector.genericError.message")}))}(e)})).finally((function(){z(!1),q(!1)}))},ge=function(e,n){var t=(null==n?void 0:n.includes(e.claimURI))&&e.uniquenessScope!==b.UZ.ACROSS_USERSTORES;return{isClaimUpdate:t,updatedClaim:t?w(w({},e),{},{uniquenessScope:b.UZ.ACROSS_USERSTORES}):e}},pe=function(e){var n=null==e?void 0:e.id;return delete e.dialectURI,delete e.id,(0,u.iC)(n,e).then((function(){R((0,C.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.success.description",{claimName:e.displayName}),level:b.QU.SUCCESS,message:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.success.message")})),de()})).catch((function(e){R((0,C.V_)({description:(null==e?void 0:e.description)||t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.error.description"),level:b.QU.ERROR,message:(null==e?void 0:e.message)||t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.error.description")}))}))},ve=function(e){var n,t=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=P(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw r}}}}(B);try{for(t.s();!(n=t.n()).done;){var i=n.value,o=ge(i,e),r=o.isClaimUpdate,a=o.updatedClaim;r&&pe(a)}}catch(c){t.e(c)}finally{t.f()}},ye=function(e){var n,t,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e){var n=w({},e),t=B.filter((function(e){var t,i;return void 0!==n[null==e||null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase()]&&n[null==e||null===(i=e.displayName)||void 0===i?void 0:i.toLowerCase()]})).map((function(e){return null==e?void 0:e.claimURI}));return ne||(t=t.filter((function(e){return e!==d.QN.EMAIL_CLAIM_URI}))),t}(e),a=(n=r,t=d.QN.USER_NAME_CLAIM_URI,{"account.multiattributelogin.handler.allowedattributes":i=[t].concat(A(n)).join(","),"account.multiattributelogin.handler.enable":i!==t}),c=function(e){return e.some((function(e){return B.find((function(n){return n.claimURI===e})).uniquenessScope!==b.UZ.ACROSS_USERSTORES}))}(r);if(!o&&c)return le(e),void re(!0);fe(a,r)};return(0,L.useEffect)((function(){f.m.location.state===s.jo.APPLICATION_STATE&&Z(!0)}),[]),(0,L.useEffect)((function(){W||function(){var e,n;if(!(0,S.Z)(null==V?void 0:V.properties)&&!(0,S.Z)(B)){var t=J,i="true"===(null==V||null===(e=V.properties)||void 0===e?void 0:e.find((function(e){return"account.multiattributelogin.handler.enable"===e.name})).value),o=null==V||null===(n=V.properties)||void 0===n?void 0:n.find((function(e){return"account.multiattributelogin.handler.allowedattributes"===e.name})),r=null==o?void 0:o.value.split(",").map((function(e){return e.trim()}));t=w(w({},t),{},{email:i&&(null==r?void 0:r.includes(d.QN.EMAIL_CLAIM_URI))||!ne,mobile:i&&(null==r?void 0:r.includes(d.QN.MOBILE_CLAIM_URI))}),K(t)}}()}),[B,V,W]),(0,L.useEffect)((function(){var e;se&&te("true"===(null===(e=(0,v.t$)(se))||void 0===e?void 0:e.enableValidator))}),[se]),(0,L.useEffect)((function(){q(!0),de(),ue(),q(!1)}),[]),L.createElement(L.Fragment,null,!W&&J?L.createElement(E.Xg,{pageTitle:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.pageTitle"),title:L.createElement(L.Fragment,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.pageTitle")),description:L.createElement(L.Fragment,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.description")),"data-componentid":"".concat(n,"-page-layout"),backButton:{"data-testid":"".concat(n,"-page-back-button"),onClick:function(){j?f.m.push(m.$.getPaths().get("APPLICATIONS")):f.m.push(m.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:t(j?"extensions:manage.accountLogin.goBackToApplication":"governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0},L.createElement(o.Z,{className:"mt-3"},L.createElement(E.pJ,{className:"form-wrapper",padded:"very"},L.createElement(h.l0,{id:M,initialValues:J,uncontrolledForm:!1,validate:null,onSubmit:function(e){return function(e){ye(e,!1)}(e)}},L.createElement(l.Z,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.loginIdentifierTypes")),L.createElement(E.v0,{warning:!0},L.createElement(N.Z,{className:"warning circle icon"}),t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.warning")),L.createElement(r.Z,{disablePadding:!0},null==B?void 0:B.map((function(e,o){var r=null==e?void 0:e.displayName.toLowerCase();return L.createElement(L.Fragment,null,L.createElement(a.Z,{key:o,disablePadding:!0,disabled:!ne&&"email"===r},L.createElement(h.gN.OxygenCheckbox,{disabled:!ne&&"email"===r,ariaLabel:r,key:o,name:r,required:!1,"data-componentid":"".concat(n,"-").concat(r,"-checkbox"),className:"alternative-login-identifier-checkbox"}),L.createElement(c.Z,{className:"alternative-login-identifier-item-text ",primary:null==e?void 0:e.displayName,secondary:L.createElement(i.Z,{className:"alternative-login-identifier-code"},null==e?void 0:e.claimURI)})),ne||"email"!==r?L.createElement(L.Fragment,null):L.createElement(E.v0,{info:!0,className:"alternative-login-identifier-info"},L.createElement(N.Z,{className:"info circle"}),t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.info")))}))),L.createElement(h.gN.Button,{form:M,size:"small",buttonType:"primary_btn",ariaLabel:"Alternative Login Identifier update button",name:"update-button","data-testid":"".concat(n,"-submit-button"),disabled:$,loading:$,label:t("common:update"),hidden:null})))),L.createElement(o.Z,{className:"mt-3"},L.createElement(E.v9,{sectionHeader:t("common:dangerZone")},L.createElement(E.cN,{actionTitle:t("governanceConnectors:dangerZone.actionTitle"),header:t("governanceConnectors:dangerZone.heading"),subheader:t("governanceConnectors:dangerZone.subHeading"),onActionClick:function(){return me()},"data-testid":"".concat(n,"-danger-zone")})))):L.createElement(E.pO,null),L.createElement(E.cV,{"data-componentid":"".concat(n,"-confirmation-modal"),onClose:function(){re(!1)},type:"warning",open:oe,assertion:t("common:confirm"),assertionHint:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateConfirmation.assertionHint"),assertionType:"checkbox",primaryAction:t("common:confirm"),secondaryAction:t("common:cancel"),onSecondaryActionClick:function(){re(!1)},onPrimaryActionClick:function(){ce&&(ye(ce,!0),re(!1))},closeOnDimmerClick:!1},L.createElement(E.cV.Header,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateConfirmation.header")),L.createElement(E.cV.Message,{attached:!0,warning:!0},t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateConfirmation.message")),L.createElement(E.cV.Content,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateConfirmation.content"))))};j.defaultProps={"data-componentid":"alternative-login-identifier-edit-page"};const Z=j},65002:(e,n,t)=>{t.d(n,{Z:()=>l});var i=t(92336),o=t(31549),r=t(14517),a=t(44194),c=t(10187);const l=(0,a.forwardRef)(((e,n)=>{var{className:t,children:a,filled:l=!0,outlined:s=!1}=e,u=(0,i.__rest)(e,["className","children","filled","outlined"]);return(0,o.jsx)(c.Z,Object.assign({ref:n,component:"code",className:(0,r.Z)("oxygen-code",{filled:l,outlined:s},"OxygenCode-root",{"OxygenCode-filled":l,"OxygenCode-outlined":s},t)},u,{children:a}))}));var s,u,d;s='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-code {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  font-size: inherit;\n  padding: 1px 3px;\n  border-radius: 5px;\n}\n.oxygen-code.filled {\n  background-color: var(--oxygen-palette-customComponents-Code-background);\n}\n.oxygen-code.outlined {\n  border: 1px solid var(--oxygen-palette-divider);\n}',u=document.getElementsByTagName("head")[0],(d=document.createElement("style")).setAttribute("type","text/css"),d.appendChild(document.createTextNode(s)),u.appendChild(d)},4372:(e,n,t)=>{t.d(n,{Z:()=>i.Z});var i=t(65002)}}]);