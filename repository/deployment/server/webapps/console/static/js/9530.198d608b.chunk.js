"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[9530],{59530:(e,t,r)=>{r.r(t),r.d(t,{default:()=>fe});var n=r(31551),a=r(72711),o=r(72445),s=r(836),i=r(24301),l=r(22253),c=r(6598),u=r(77139),m=r(55007),p=r(12252),d=r(60486),f=r(40838),g=r(48704),E=r(89183),S=r(20342),v=r(10319),b=r(86105),y=r(6833),U=r(82406),h=r(78132),R=r(44194),M=r(10479),O=r(59673),I=r(47245),T=r(4372),x=r(82861),_=r(40456),P=r(80750),A=r(79438),Z=r(29051),D=r(51835),N=r.n(D),C=r(27975),w=r.n(C),j=r(55900),L=r.n(j),$=r(21555),W=r.n($),k=r(3621),F=r.n(k),q=r(5062),G=r.n(q),V=r(74710),Y={};Y.styleTagTransform=G(),Y.setAttributes=W(),Y.insert=L().bind(null,"head"),Y.domAPI=w(),Y.insertStyleElement=F();N()(V.Z,Y);V.Z&&V.Z.locals&&V.Z.locals;const Q=(0,R.forwardRef)((function(e,t){var r=e.userStoreManager,n=e.isReadOnly,a=e.onSubmit,o=e.initialValues,s=e["data-componentid"],i=void 0===s?"user-store-configurations-form":s,l=p.QN.USER_NAME_CLAIM_URI,c=p.QN.USER_ID_CLAIM_URI,m=(0,R.useRef)(null),d=(0,M.$)().t,f=(0,I.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userStores})),g=(0,Z.D)(f,r);(0,R.useImperativeHandle)(t,(function(){return{triggerSubmit:function(){m.current&&m.current()}}}),[]);return R.createElement(A.vy,{onSubmit:function(e){r!==v.uD.RemoteUserStoreManager&&(delete e.groupnameMapping,delete e.groupIdMapping),a(e)},validate:function(e){var t={};return e.usernameMapping||(t.usernameMapping=d("remoteUserStores:form.fields.usernameMapping.validation.required")),e.userIdMapping||(t.userIdMapping=d("remoteUserStores:form.fields.userIdMapping.validation.required")),e.readGroups&&r===v.uD.RemoteUserStoreManager&&(e.groupnameMapping||(t.groupnameMapping=d(g?"remoteUserStores:form.fields.groupnameMapping.validation.readGroupsEnabled":"remoteUserStores:form.fields.groupnameMapping.validation.required")),e.groupIdMapping||(t.groupIdMapping=d(g?"remoteUserStores:form.fields.groupIdMapping.validation.readGroupsEnabled":"remoteUserStores:form.fields.groupIdMapping.validation.required"))),t},initialValues:o,render:function(e){var t=e.handleSubmit;return m.current=t,R.createElement("form",{onSubmit:t,className:"configurations-form"},R.createElement(u.Z,{variant:"h5"},d("remoteUserStores:form.sections.userAttributes")),R.createElement(x.Z,null),R.createElement(P.Z,{container:!0,spacing:2,className:"form-grid-container"},R.createElement(P.Z,{xs:12,md:4},R.createElement(_.Z,{required:!0},d("remoteUserStores:form.fields.usernameMapping.label")),R.createElement("br",null),R.createElement(T.Z,{variant:"caption"},l)),R.createElement(P.Z,{xs:12,md:6},R.createElement(A.SE,{FormControlProps:{margin:"dense"},"data-componentid":"".concat(i,"-field-usernameMapping"),name:"usernameMapping",type:"text",placeholder:d("remoteUserStores:form.fields.usernameMapping.placeholder"),component:A.xh,disabled:n,helperText:R.createElement(h.kW,{className:"hint",compact:!0},d("remoteUserStores:form.fields.usernameMapping.helperText"))})),R.createElement(P.Z,{xs:12,md:4},R.createElement(_.Z,{required:!0},d("remoteUserStores:form.fields.userIdMapping.label")),R.createElement("br",null),R.createElement(T.Z,{variant:"caption"},c)),R.createElement(P.Z,{xs:12,md:6},R.createElement(A.SE,{FormControlProps:{margin:"dense"},"data-componentid":"".concat(i,"-field-userIdMapping"),name:"userIdMapping",type:"text",placeholder:d("remoteUserStores:form.fields.userIdMapping.placeholder"),component:A.xh,disabled:n,helperText:R.createElement(h.kW,{className:"hint",compact:!0},d("remoteUserStores:form.fields.userIdMapping.helperText"))}))),g||r===v.uD.RemoteUserStoreManager?R.createElement(R.Fragment,null,R.createElement(u.Z,{variant:"h5"},d("remoteUserStores:form.sections.groupAttributes")),R.createElement(x.Z,null),R.createElement(A.lP,{subscription:{values:!0}},(function(e){var t=e.values,a=null==t?void 0:t.readGroups;return R.createElement(P.Z,{container:!0,spacing:2,className:"form-grid-container"},g&&R.createElement(P.Z,{xs:12},R.createElement(A.SE,{label:d("remoteUserStores:form.fields.readGroups.label"),name:"readGroups",FormControlProps:{fullWidth:!0,margin:"dense"},"data-componentid":"".concat(i,"-field-readGroups"),component:A.ur,disabled:n,hint:R.createElement(h.kW,{className:"hint",compact:!0},d("remoteUserStores:form.fields.readGroups.helperText"))})),r===v.uD.RemoteUserStoreManager&&R.createElement(R.Fragment,null,R.createElement(P.Z,{xs:12,md:4},R.createElement(_.Z,{required:a&&r===v.uD.RemoteUserStoreManager,disabled:n||!a},d("remoteUserStores:form.fields.groupnameMapping.label"))),R.createElement(P.Z,{xs:12,md:6},R.createElement(A.SE,{FormControlProps:{margin:"dense"},"data-componentid":"".concat(i,"-field-groupnameMapping"),name:"groupnameMapping",type:"text",placeholder:d("remoteUserStores:form.fields.groupnameMapping.placeholder"),component:A.xh,disabled:n||!a,helperText:R.createElement(h.kW,{className:"hint",compact:!0},d("remoteUserStores:form.fields.groupnameMapping.helperText"))})),R.createElement(P.Z,{xs:12,md:4},R.createElement(_.Z,{required:a&&r===v.uD.RemoteUserStoreManager,disabled:n||!a},d("remoteUserStores:form.fields.groupIdMapping.label"))),R.createElement(P.Z,{xs:12,md:6},R.createElement(A.SE,{FormControlProps:{margin:"dense"},ariaLabel:"groupIdMapping","data-componentid":"".concat(i,"-field-groupIdMapping"),name:"groupIdMapping",type:"text",placeholder:d("remoteUserStores:form.fields.groupIdMapping.placeholder"),component:A.xh,disabled:n||!a,helperText:R.createElement(h.kW,{className:"hint",compact:!0},d("remoteUserStores:form.fields.groupIdMapping.helperText"))}))))}))):null)}})}));var H=r(38463),z=r(12754),B=r(56758),K=r(20501),J={};J.styleTagTransform=G(),J.setAttributes=W(),J.insert=L().bind(null,"head"),J.domAPI=w(),J.insertStyleElement=F();N()(K.Z,J);K.Z&&K.Z.locals&&K.Z.locals;var X=["label","value"];function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ee(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ae=(0,R.forwardRef)((function(e,t){var r=e.userStoreManager,n=e.isReadOnly,a=e.isReadWriteUserStoresEnabled,o=e.onSubmit,s=e.initialValues,i=e["data-componentid"],l=void 0===i?"asgardeo-customer-userstore-general-details":i,c=(0,M.$)().t,u=(0,R.useRef)(null);(0,R.useImperativeHandle)(t,(function(){return{triggerSubmit:function(){u.current&&u.current()}}}),[]);var m=[{"data-componentid":"".concat(l,"-user-store-type-ldap-option-radio-button"),label:c("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.userStoreType.types.ldap.label"),value:z._I.LDAP},{"data-componentid":"".concat(l,"-user-store-type-ad-option-radio-button"),label:c("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.userStoreType.types.ad.label"),value:z._I.ActiveDirectory}],p=[{"data-componentid":"".concat(l,"-access-type-read-only-option-radio-button"),hint:{content:c("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.accessType.types.readOnly.hint")},label:c("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.accessType.types.readOnly.label"),value:z.nU.ReadOnly},{"data-componentid":"".concat(l,"-access-type-read-write-option-radio-button"),hint:{content:c("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.accessType.types.readWrite.hint")},label:c("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.accessType.types.readWrite.label"),value:z.nU.ReadWrite}];return R.createElement(A.vy,{onSubmit:function(e){var t;o(re(re({},e),{},{name:null==e||null===(t=e.name)||void 0===t?void 0:t.toUpperCase()}))},validate:function(e){var t={};if(null!=e&&e.name){var n=null==e?void 0:e.name.toUpperCase(),o=new RegExp("^[^_/]+$"),s=new RegExp("^([^a-zA-Z0-9]+$)"),i=[z.x$.PRIMARY_USER_STORE_NAME,z.x$.FEDERATION_USER_STORE_NAME,z.x$.DEFAULT_USER_STORE_NAME],l=[z.x$.INTERNAL_USER_STORE_NAME,z.x$.APPLICATION_USER_STORE_NAME],u=(0,B.u)(n,z.o3.EscapeRegEx),m="true"===u.get("isMatch").toString();if(o.test(n)){if(i.includes(n.trim().toUpperCase()))t.name=c("extensions:manage.features.userStores.edit.general.form.validations.restrictedNamesErrorMessage",{name:n});else if(l.includes(n.trim().toUpperCase()))t.name=c("extensions:manage.features.userStores.edit.general.form.validations.reservedNamesErrorMessage",{name:n});else if(s.test(n))t.name=c("extensions:manage.features.userStores.edit.general.form.validations.allSymbolsErrorMessage");else if(m){var p=u.get("invalidStringValue").toString();t.name=c("userstores:forms.general.name.validationErrorMessages.invalidInputErrorMessage",{invalidString:p})}}else t.name=c("extensions:manage.features.userStores.edit.general.form.validations.invalidSymbolsErrorMessage")}else t.name=c("remoteUserStores:form.fields.name.validation.required");if(null!=e&&e.description){var d=(0,B.u)(null==e?void 0:e.description,z.o3.EscapeRegEx);if("true"===d.get("isMatch").toString()){var f=d.get("invalidStringValue").toString();t.description=c("userstores:forms.general.description.validationErrorMessages.invalidInputErrorMessage",{invalidString:f})}}return null!=e&&e.accessType||(t.accessType=c("remoteUserStores:form.fields.accessType.validation.required")),!a||r!==H.uD.WSOutboundUserStoreManager||null!=e&&e.connectedUserStoreType||(t.connectedUserStoreType=c("remoteUserStores:form.fields.connectedUserStoreType.validation.required")),t},initialValues:s,render:function(e){var t=e.handleSubmit;return u.current=t,R.createElement("form",{onSubmit:t,className:"general-user-store-details-form"},R.createElement(A.SE,{className:"text-field-container",FormControlProps:{margin:"dense"},"data-componentid":"".concat(l,"-field-name"),name:"name",type:"text",label:c("remoteUserStores:form.fields.name.label"),placeholder:c("remoteUserStores:form.fields.name.placeholder"),component:A.xh,disabled:n,required:!0,uppercase:!0}),R.createElement(A.SE,{className:"text-field-container",FormControlProps:{margin:"dense"},ariaLabel:"userStoreDescription",required:!1,"data-componentid":"".concat(l,"-field-description"),name:"description",type:"text",label:c("remoteUserStores:form.fields.description.label"),placeholder:c("remoteUserStores:form.fields.description.placeholder"),component:A.xh,disabled:n}),R.createElement(A.SE,{className:"text-field-container",label:c("remoteUserStores:form.fields.connectedUserStoreType.label"),name:"connectedUserStoreType",FormControlProps:{fullWidth:!0,margin:"dense"},"data-componentid":"".concat(l,"-field-connectedUserStoreType"),component:A.hW,disabled:n,options:m.map((function(e){return{label:e.label,value:e.value}})),required:!0}),a&&r===H.uD.WSOutboundUserStoreManager&&R.createElement(A.SE,{className:"text-field-container",label:c("remoteUserStores:form.fields.accessType.label"),name:"accessType",FormControlProps:{fullWidth:!0,margin:"dense"},"data-componentid":"".concat(l,"-field-accessType"),component:A.hW,disabled:n,options:p.map((function(e){var t=e.label,r=e.value,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,X);return re({label:t,value:r},n)})),required:!0}))}})}));var oe=r(93331),se=r(51507),ie={};ie.styleTagTransform=G(),ie.setAttributes=W(),ie.insert=L().bind(null,"head"),ie.domAPI=w(),ie.insertStyleElement=F();N()(se.Z,ie);se.Z&&se.Z.locals&&se.Z.locals;function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,s,i=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?de(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const fe=function(e){var t,r,T,x=e.location,_=e["data-componentid"],P=void 0===_?"remote-userstore-create-page":_,A=new URLSearchParams(x.search),Z=oe.eh.REMOTE_USER_STORE_TYPE_QUERY_PARAM,D=A.get(Z),N=z.x$.getPaths().get("REMOTE_USER_STORE_CREATE"),C=(0,M.$)().t,w=(0,h.fQ)().getLink,j=(0,I.I0)(),L=(0,R.useRef)(null),$=(0,R.useRef)(null),W={configurations:{readGroups:!0},generalDetails:{accessType:z.nU.ReadOnly,connectedUserStoreType:z._I.LDAP}},k=(0,I.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.productName})),F=(0,I.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userStores})),q=(0,b.cr)(F,z.x$.FEATURE_DICTIONARY.get(z.FC.OptimizedUserStore)),G=(0,b.cr)(F,z.x$.FEATURE_DICTIONARY.get(z.FC.ReadWriteUserStores)),V=(0,m.EV)(null==F||null===(t=F.scopes)||void 0===t?void 0:t.update),Y=pe((0,R.useState)(void 0),2),H=Y[0],B=Y[1],K=pe((0,R.useState)(0),2),J=K[0],X=K[1],ee=pe((0,R.useState)(W),2),te=ee[0],re=ee[1],ne=pe((0,R.useState)(!1),2),se=ne[0],ie=ne[1],le=(0,E.Z)(),ce=le.data,me=le.isLoading,de=le.error,fe=(0,R.useMemo)((function(){var e;if(!ce)return null;var t=H===oe.sf.OPTIMIZED?v.uD.RemoteUserStoreManager:v.uD.WSOutboundUserStoreManager;return null===(e=ce.find((function(e){return e.typeName===t})))||void 0===e?void 0:e.typeId}),[ce,H]);(0,R.useEffect)((function(){if(Object.values(oe.sf).includes(D))D!==oe.sf.OPTIMIZED||q?(B(D),X(0),re(W)):f.m.replace("".concat(N,"?").concat(Z,"=").concat(oe.sf.CLASSIC));else{var e=q?oe.sf.OPTIMIZED:oe.sf.CLASSIC;f.m.replace("".concat(N,"?").concat(Z,"=").concat(e))}}),[D]),(0,R.useEffect)((function(){de&&j((0,U.V_)({description:C("remoteUserStores:notifications.typesFetchError.description"),level:y.QU.ERROR,message:C("remoteUserStores:notifications.typesFetchError.message")}))}),[de]);var ge;return R.createElement(h.Xg,{title:C("remoteUserStores:pages.create.title"),contentTopMargin:!0,description:R.createElement(R.Fragment,null,C("remoteUserStores:pages.create.description",{productName:k}),R.createElement(h.eb,{link:w("manage.userStores.createUserStore.learnMore")},C("common:learnMore"))),className:"remote-user-store-create-page-layout",backButton:{"data-testid":"".concat(P,"-back-button"),onClick:function(){f.m.push(d.$.getPaths().get("USERSTORES"))},text:C("remoteUserStores:pages.create.backButton")},titleTextAlign:"left",bottomMargin:!1,showBottomDivider:!0,"data-testid":"".concat(P,"-page-layout")},q&&H&&R.createElement(h.v0,{content:(ge=function(){f.m.push("".concat(N,"?").concat(Z,"=").concat(H===oe.sf.OPTIMIZED?oe.sf.CLASSIC:oe.sf.OPTIMIZED))},H===oe.sf.OPTIMIZED?R.createElement(O.c,{i18nKey:"remoteUserStores:pages.create.message.optimized"},"This configuration supports Authentication and User Attribute retrieval only. User and group management features are not available in this setup. If user management is an essential requirement, please use the ",R.createElement("a",{onClick:ge},"Classic User Store Connection")," instead."):R.createElement(O.c,{i18nKey:"remoteUserStores:pages.create.message.classic"},"If your requirement is only for authentication, we recommend using the ",R.createElement("a",{onClick:ge},"Optimized User Store Connection")," for efficiency.")),type:"info","data-componentid":"".concat(P,"-configuration-message"),className:"remote-user-store-impl-message"}),R.createElement(h.pJ,{padded:"very"},me||de?R.createElement(o.Z,{spacing:3,"data-componentid":"".concat(P,"-loading-placeholder")},R.createElement(a.Z,{variant:"rectangular",height:40}),R.createElement(o.Z,{spacing:1},R.createElement(a.Z,{variant:"rectangular",width:210,height:10}),R.createElement(a.Z,{variant:"text"}),R.createElement(a.Z,{variant:"rectangular",width:210,height:10}),R.createElement(a.Z,{variant:"text"}),R.createElement(a.Z,{variant:"rectangular",width:210,height:10}),R.createElement(a.Z,{variant:"text"}))):R.createElement(c.Z,{activeStep:J,orientation:"vertical",className:"remote-user-store-create-stepper","data-componentid":"".concat(P,"-stepper")},R.createElement(s.Z,null,R.createElement(l.Z,{optional:R.createElement(u.Z,{variant:"body2"},C("remoteUserStores:pages.create.stepper.step1.description"))},R.createElement(u.Z,{variant:"h4"},C("remoteUserStores:pages.create.stepper.step1.title"))),R.createElement(i.Z,null,R.createElement(ae,{ref:L,userStoreManager:H===oe.sf.OPTIMIZED?v.uD.RemoteUserStoreManager:v.uD.WSOutboundUserStoreManager,isReadOnly:!V,isReadWriteUserStoresEnabled:G,initialValues:null!==(r=te.generalDetails)&&void 0!==r?r:{},onSubmit:function(e){re((function(t){return ue(ue({},t),{},{generalDetails:e})})),X(1)},"data-componentid":"remote-user-store-create-general-details-form"}),R.createElement(n.Z,{variant:"contained",disabled:!V,"data-componentid":"".concat(P,"-next-button"),onClick:function(){var e;null!=L&&null!==(e=L.current)&&void 0!==e&&e.triggerSubmit&&L.current.triggerSubmit()},loading:se},C("common:next")))),R.createElement(s.Z,null,R.createElement(l.Z,{optional:R.createElement(u.Z,{variant:"body2"},C("remoteUserStores:pages.create.stepper.step2.description"))},R.createElement(u.Z,{variant:"h4"},C("remoteUserStores:pages.create.stepper.step2.title"))),R.createElement(i.Z,null,R.createElement(Q,{ref:$,userStoreManager:H===oe.sf.OPTIMIZED?v.uD.RemoteUserStoreManager:v.uD.WSOutboundUserStoreManager,isReadOnly:!V,initialValues:null!==(T=te.configurations)&&void 0!==T?T:{},onSubmit:function(e){var t,r=H===oe.sf.OPTIMIZED?v.uD.RemoteUserStoreManager:v.uD.WSOutboundUserStoreManager;re((function(t){return ue(ue({},t),{},{configurations:e})}));var n=[{name:z.x$.PROPERTY_NAME_CONNECTED_USER_STORE_TYPE,value:te.generalDetails.connectedUserStoreType},{name:z.x$.PROPERTY_NAME_READ_ONLY,value:te.generalDetails.accessType},{name:z.x$.PROPERTY_NAME_DISABLED,value:"false"},{name:z.x$.PROPERTY_NAME_READ_GROUPS,value:e.readGroups.toString()}];r===v.uD.RemoteUserStoreManager&&(n.push.apply(n,[{name:z.x$.PROPERTY_NAME_USERNAME,value:e.usernameMapping},{name:z.x$.PROPERTY_NAME_USERID,value:e.userIdMapping}]),e.readGroups&&n.push.apply(n,[{name:z.x$.PROPERTY_NAME_GROUPNAME,value:e.groupnameMapping},{name:z.x$.PROPERTY_NAME_GROUPID,value:e.groupIdMapping}]));var a,o={claimAttributeMappings:[{claimURI:p.QN.USER_NAME_CLAIM_URI,mappedAttribute:e.usernameMapping},{claimURI:p.QN.USER_ID_CLAIM_URI,mappedAttribute:e.userIdMapping}],description:null!==(t=te.generalDetails.description)&&void 0!==t?t:"",name:te.generalDetails.name,properties:n,typeId:fe};a=o,ie(!0),(0,S.yS)(a).then((function(e){j((0,U.V_)({description:C("remoteUserStores:pages.create.notifications.createUserStore.success.description"),level:y.QU.SUCCESS,message:C("remoteUserStores:pages.create.notifications.createUserStore.success.message")})),j((0,U.V_)({description:C("userstores:notifications.delay.description"),level:y.QU.WARNING,message:C("userstores:notifications.delay.message")})),f.m.push({pathname:d.$.getPaths().get("USERSTORES_EDIT").replace(":id",e.id).replace("edit-user-store",g.w.userstoreEdit.remoteUserStoreEditPath)+"#tab=guide"})})).catch((function(e){var t,r;403===(null===(t=e.response)||void 0===t?void 0:t.status)&&(null===(r=e.response.data)||void 0===r?void 0:r.code)===v.u4.ERROR_CREATE_LIMIT_REACHED.getErrorCode()&&j((0,U.V_)({description:C(v.u4.ERROR_CREATE_LIMIT_REACHED.getErrorDescription()),level:y.QU.ERROR,message:C(v.u4.ERROR_CREATE_LIMIT_REACHED.getErrorMessage())})),j((0,U.V_)({description:C("remoteUserStores:pages.create.notifications.createUserStore.genericError.description"),level:y.QU.ERROR,message:C("remoteUserStores:pages.create.notifications.createUserStore.genericError.message")})),ie(!1)}))},"data-componentid":"remote-user-store-create-configurations-form"}),R.createElement("div",{className:"step-actions-container"},R.createElement(n.Z,{variant:"outlined",disabled:!V||se,"data-componentid":"".concat(P,"-previous-button"),onClick:function(){X((function(e){return e-1}))}},C("common:previous")),R.createElement(n.Z,{variant:"contained",disabled:!V,"data-componentid":"".concat(P,"-finish-button"),onClick:function(){var e;null!=$&&null!==(e=$.current)&&void 0!==e&&e.triggerSubmit&&$.current.triggerSubmit()},loading:se},C("common:finish"))))))))}},89183:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(96124),a=r(76271),o=r(6833);const s=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.GET,url:"".concat(a.h.getState().config.endpoints.userStores,"/meta/types")},r=(0,n.Z)(e?t:null);return{data:r.data,error:r.error,isLoading:r.isLoading,isValidating:r.isValidating,mutate:r.mutate}}},74710:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(81611),a=r.n(n),o=r(83948),s=r.n(o)()(a());s.push([e.id,".configurations-form{padding-top:16px}.configurations-form .form-grid-container{margin-top:8px;margin-bottom:16px}",""]);const i=s},20501:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(81611),a=r.n(n),o=r(83948),s=r.n(o)()(a());s.push([e.id,".general-user-store-details-form .text-field-container{margin-top:8px}",""]);const i=s},51507:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(81611),a=r.n(n),o=r(83948),s=r.n(o)()(a());s.push([e.id,".remote-user-store-create-page-layout .remote-user-store-impl-message a:hover{cursor:pointer}.remote-user-store-create-page-layout .remote-user-store-create-stepper .step-actions-container{display:flex;gap:8px}",""]);const i=s}}]);