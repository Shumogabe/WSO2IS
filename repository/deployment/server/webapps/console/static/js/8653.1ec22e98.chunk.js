"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[8653],{26596:(e,t,n)=>{n.d(t,{E:()=>l});var a=n(96124),i=n(76271),r=n(6833),l=function(e,t,n,l){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c={headers:{"Content-Type":"application/json"},method:r.f2.GET,params:{attributes:l,count:e,excludedAttributes:"roles,groups",filter:n,startIndex:t},url:i.h.getState().config.endpoints.agents},s=(0,a.Z)(o?c:null);return{data:s.data,error:s.error,isLoading:s.isLoading,isValidating:s.isValidating,mutate:s.mutate}}},68653:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var a=n(25134),i=n(60486),r=n(90302),l=n(40838),o=n(10319),c=n(58613),s=n(6833),u=n(82406),d=n(78132),m=n(44194),f=n(10479),p=n(47245),g=n(26154),h=n(15997),v=n(12638),y=n(94945);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r,l,o=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function E(e){var t=e.advancedSearch,n=e.isLoading,a=e.list,r=e.mutateAgentList,o=e.setShowAgentAddWizard,c=e["data-componentid"],S=(0,p.I0)(),E=(0,f.$)().t,A=b((0,m.useState)(!1),2),w=A[0],C=A[1],I=b((0,m.useState)(),2),T=I[0],x=I[1],k=function(){return a&&0!==(null==a?void 0:a.length)?null:m.createElement(d.$J,{className:"list-placeholder mr-0",action:m.createElement(d.KM,{"data-testid":"".concat(c,"-empty-placeholder-add-agent-button"),onClick:function(){return o()}},m.createElement(g.Z,{name:"add"}),"New Agent"),image:(0,h.jF)().newList,imageSize:"tiny",subtitle:["There are no agents available at the moment"],"data-testid":"".concat(c,"-empty-placeholder")})};return m.createElement(m.Fragment,null,m.createElement(d.wQ,{className:"agents-table",externalSearch:t,isLoading:n,actions:[{"data-testid":"".concat(c,"-item-edit-button"),hidden:function(){return!1},icon:function(){return"pencil alternate"},onClick:function(e,t){return l.m.push(i.$.getPaths().get("AGENT_EDIT").replace(":id",t.id))},popupText:function(e){return E("common:edit")},renderer:"semantic-icon"},{"data-testid":"".concat(c,"-item-delete-button"),hidden:function(e){return!1},icon:function(){return"trash alternate"},onClick:function(e,t){x(t),C(!w)},popupText:function(){return E("common:delete")},renderer:"semantic-icon"}],columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,a;return m.createElement(v.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(c,"-item-heading")},m.createElement(d.JT,{image:m.createElement(d.Xo,{name:null!==(t=null==e||null===(n=e["urn:scim:wso2:agent:schema"])||void 0===n?void 0:n.DisplayName)&&void 0!==t?t:"Agent",size:"mini","data-testid":"".concat(c,"-item-display-name-avatar")}),size:"mini",spaced:"right","data-testid":"".concat(c,"-item-display-name")}),m.createElement(v.Z.Content,null,null==e||null===(a=e["urn:scim:wso2:agent:schema"])||void 0===a?void 0:a.DisplayName,m.createElement(v.Z.Subheader,null,e.id)))},title:E("applications:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:E("applications:list.columns.actions")}],data:a,onRowClick:function(e,t){l.m.push(i.$.getPaths().get("AGENT_EDIT").replace(":id",t.id))},placeholders:k(),selectable:!0,showHeader:!1,transparent:!n&&null!==k(),"data-testid":c}),w&&m.createElement(d.cV,{"data-testid":"".concat(c,"-delete-item-confirmation-modal"),onClose:function(){return C(!1)},type:"negative",open:w,assertionHint:E("agents:list.confirmations.deleteItem.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return C(!1)},onPrimaryActionClick:function(){var e;e=T,(0,y.Lr)(e.id).then((function(){S((0,u.V_)({description:"Agent deleted successfully.",level:s.QU.SUCCESS,message:"Deleted successfully"})),r()})).catch((function(e){S((0,u.V_)({description:"An error occurred when deleting agent information.",level:s.QU.ERROR,message:"Something went wrong"}))})),C(!1)},closeOnDimmerClick:!1},m.createElement(d.cV.Header,null,E("agents:list.confirmations.deleteItem.header")),m.createElement(d.cV.Message,{attached:!0,negative:!0},E("agents:list.confirmations.deleteItem.message")),m.createElement(d.cV.Content,null,E("agents:list.confirmations.deleteItem.content"))))}var A=n(92176),w=n(79438),C=n(47018);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r,l,o=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function x(e){var t=e.isOpen,n=e.onClose,a=e["data-componentid"],i=(0,p.I0)(),r=(0,p.v9)((function(e){return null==e?void 0:e.auth})),l=I((0,m.useState)(!1),2),o=l[0],c=l[1];return m.createElement(C.Z,{"data-testid":a,"data-componentid":a,open:t,className:"wizard",dimmer:"blurring",size:"tiny",onClose:n,closeOnDimmerClick:!1,closeOnEscape:!0},m.createElement(C.Z.Header,null,"New Agent"),m.createElement(C.Z.Content,null,m.createElement(w.vy,{onSubmit:function(e){if(null!=e&&e.name){c(!0);var t={"urn:scim:wso2:agent:schema":{Description:null==e?void 0:e.description,DisplayName:null==e?void 0:e.name,Owner:null==r?void 0:r.username}};(0,y.o0)(t).then((function(e){n(e)})).catch((function(e){i((0,u.V_)({description:"Creating agent failed",level:s.QU.ERROR,message:"Something went wrong"}))})).finally((function(){c(!1)}))}},render:function(e){var t=e.handleSubmit;return m.createElement("form",{id:"addAgentForm",onSubmit:t},m.createElement(w.SE,{name:"name",label:"Name",required:!0,autoComplete:"new-password",component:w.xh}),m.createElement(w.SE,{label:"Description",name:"description",className:"mt-3",multiline:!0,rows:4,maxRows:4,autoComplete:"new-password",placeholder:"Enter a description for the agent",component:w.xh}))}})),m.createElement(C.Z.Actions,null,m.createElement(d.zx,{className:"link-button",basic:!0,primary:!0,onClick:function(){return n(null)},"data-testid":"".concat(a,"-confirmation-modal-actions-cancel-button")},"Cancel"),m.createElement(d.zx,{primary:!0,type:"submit",disabled:o,loading:o,onClick:function(){document.getElementById("addAgentForm").dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0}))},"data-testid":"".concat(a,"-confirmation-modal-actions-continue-button")},"Create")))}var k=n(26596),O=n(51835),L=n.n(O),D=n(27975),N=n.n(D),P=n(55900),R=n.n(P),V=n(21555),Z=n.n(V),j=n(3621),M=n.n(j),U=n(5062),_=n.n(U),z=n(17952),$={};$.styleTagTransform=_(),$.setAttributes=Z(),$.insert=R().bind(null,"head"),$.domAPI=N(),$.insertStyleElement=M();L()(z.Z,$);z.Z&&z.Z.locals&&z.Z.locals;function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r,l,o=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function H(e){var t,n=e["data-componentid"],h=F((0,m.useState)(null),2),v=h[0],y=h[1],b=(0,p.I0)(),S=(0,p.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.isSAASDeployment})),w=F((0,m.useState)(!1),2),C=w[0],I=w[1],T=F((0,m.useState)(!1),2),O=T[0],L=T[1],D=F((0,m.useState)(null),2),N=D[0],P=D[1],R=F((0,m.useState)(1),2),V=R[0],Z=R[1],j=F((0,m.useState)(r.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),M=j[0],U=j[1],_=(0,d.fQ)().getLink,z=(0,c.Z)(),$=z.isLoading,Q=z.userStoresList,H=(0,m.useMemo)((function(){return null==Q?void 0:Q.some((function(e){return e.id===o.Rp}))}),[Q]),W=(0,f.$)().t,G=(0,k.E)(M,V,N,null,H),J=G.data,B=G.isLoading,K=G.mutate;return m.createElement(d.Xg,{pageTitle:W("agents:title"),title:W("agents:pageTitle"),description:m.createElement(m.Fragment,null,W("agents:description"),m.createElement(d.eb,{link:_("develop.agents.learnMore"),showEmptyLink:!1},W("common:learnMore"))),"data-componentid":"".concat(n,"-page-layout"),bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!1,action:(null==J||null===(t=J.Resources)||void 0===t?void 0:t.length)>0&&!B&&m.createElement(d.KM,{onClick:function(){I(!0)}},m.createElement(g.Z,{name:"add"}),W("agents:new.action.title"))},$||H?m.createElement(d.PS,{advancedSearch:m.createElement(a.n,{onFilter:function(e){P(e),Z(1)},filterAttributeOptions:[{key:0,text:W("common:name"),value:"name"}],filterAttributePlaceholder:W("applications:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:W("applications:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:W("applications:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:"Search agents by name or ID",style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",predefinedDefaultSearchStrategy:"urn:scim:wso2:agent:schema.DisplayName co %search-value%",triggerClearQuery:!1,"data-testid":"".concat(n,"-list-advanced-search")}),currentListSize:null==J?void 0:J.totalResults,isLoading:B,listItemLimit:M,onItemsPerPageDropdownChange:function(e,t){U(t.value)},onPageChange:function(){},onSortStrategyChange:function(){},showPagination:!0,showTopActionPanel:!0,sortOptions:null,sortStrategy:null,totalPages:Math.ceil((null==J?void 0:J.totalResults)/M),totalListSize:null==J?void 0:J.totalResults,paginationOptions:{disableNextButton:!0},"data-testid":"".concat(n,"-list-layout")},m.createElement(E,{advancedSearch:m.createElement(a.n,{onFilter:function(){},filterAttributeOptions:[{key:0,text:W("common:name"),value:"name"},{key:1,text:W("common:clientId"),value:"clientId"},{key:2,text:W("common:issuer"),value:"issuer"}],filterAttributePlaceholder:W("applications:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:W("applications:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:W("applications:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:W("applications:advancedSearch.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",predefinedDefaultSearchStrategy:"name co %search-value% or clientId co %search-value% or issuer co %search-value%",triggerClearQuery:!1,"data-testid":"".concat(n,"-list-advanced-search")}),mutateAgentList:K,isLoading:B,list:null==J?void 0:J.Resources,setShowAgentAddWizard:function(){I(!0)}})):m.createElement(d.pJ,{className:"agent-feature-unavailable-notice"},m.createElement(d.$J,{action:null,image:null,imageSize:"tiny",subtitle:[W("agents:list.featureUnavailable.subtitle.0"),W(S?"agents:list.featureUnavailable.subtitle.1.saas":"agents:list.featureUnavailable.subtitle.1.onprem")],title:W("agents:list.featureUnavailable.title")})),m.createElement(x,{isOpen:C,onClose:function(e){e&&(y(e),L(!0)),I(!1)}}),m.createElement(A.l,{title:W("agents:new.title"),agentId:null==v?void 0:v.id,agentSecret:null==v?void 0:v.password,isOpen:O,onClose:function(){b((0,u.V_)({description:W("agents:new.alerts.success.description"),level:s.QU.SUCCESS,message:W("agents:new.alerts.success.message")})),null!=v&&v.id&&l.m.push(i.$.getPaths().get("AGENT_EDIT").replace(":id",null==v?void 0:v.id))}}))}},17952:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(81611),i=n.n(a),r=n(83948),l=n.n(r)()(i());l.push([e.id,".agent-feature-unavailable-notice{display:flex;justify-content:center;min-height:70vh;flex-direction:column}",""]);const o=l}}]);