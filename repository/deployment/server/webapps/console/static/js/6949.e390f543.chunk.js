"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6949],{46949:(t,e,i)=>{i.r(e),i.d(e,{default:()=>N});var n=i(87172),r=i(98855),o=i(31551),a=i(27331),c=i(60486),l=i(40838),s=i(6833),d=i(82406),p=i(78132),u=i(50699),m=i(44194),y=i(10479),f=i(51835),g=i.n(f),h=i(27975),b=i.n(h),v=i(55900),A=i.n(v),S=i(21555),I=i.n(S),E=i(3621),x=i.n(E),Z=i(5062),C=i.n(Z),k=i(59047),O={};O.styleTagTransform=C(),O.setAttributes=I(),O.insert=A().bind(null,"head"),O.domAPI=b(),O.insertStyleElement=x();g()(k.Z,O);k.Z&&k.Z.locals&&k.Z.locals;var R=i(47245),T=i(61159),j=i(96124),w=i(76271),P=i(82630),_=i(96274);function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,o,a,c=[],l=!0,s=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){s=!0,r=t}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(s)throw r}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return L(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?L(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const N=function(t){var e=t.match,i=t["data-componentid"],f=void 0===i?"policy-edit-page":i,g=e.params.id,h=(0,R.I0)(),b=!(0,u.Z)(g),v=D((0,m.useState)(),2),A=v[0],S=v[1],I=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={headers:{Accept:"application/json","Content-Type":"application/json"},method:s.f2.GET,url:"".concat(w.h.getState().config.endpoints.entitlementPoliciesApi,"/").concat(t)},n=(0,j.Z)(e?i:null,{shouldRetryOnError:!1}),r=n.data,o=n.error,a=n.isValidating,c=n.mutate;return{data:r,error:o,isLoading:n.isLoading,isValidating:a,mutate:c}}(g||"",b),E=I.data,x=I.isLoading,Z=I.error,C=(0,y.$)().t;return m.createElement(p.Xg,{title:x?"":null==E?void 0:E.policyId,backButton:{"data-componentid":"".concat(f,"-edit-policy-page-back-button"),onClick:function(){l.m.push(c.$.getPaths().get("POLICY_ADMINISTRATION"))},text:C("policyAdministration:editPolicy.backBtn")},"data-componentid":f},x&&m.createElement(r.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},m.createElement(a.Z,null)),Z&&m.createElement(n.Z,{severity:"error",title:C("policyAdministration:editPolicy.errorTitle")},C("policyAdministration:editPolicy.errorDescription")),!x&&!Z&&E&&m.createElement(r.Z,{className:"script-editor"},m.createElement(P.Z,{policyScript:A||E.policy,"data-componentid":"".concat(f,"-policy-editor"),onScriptChange:function(t){return S(t)}})),!x&&!Z&&E&&m.createElement(o.Z,{className:"edit-policy-btn",color:"primary",variant:"contained",onClick:function(){if(E){var t={active:E.active,attributeDTOs:[],policy:(0,_.$)(A),policyEditorData:E.policyEditorData,policyId:E.policyId,policyIdReferences:E.policyIdReferences,policyOrder:E.policyOrder,policySetIdReferences:E.policySetIdReferences,promote:E.promote};(0,T.i5)(t).then((function(){h((0,d.V_)({description:C("policyAdministration:alerts.updateSuccess.description"),level:s.QU.SUCCESS,message:C("policyAdministration:alerts.updateSuccess.message")}))})).catch((function(){h((0,d.V_)({description:C("policyAdministration:alerts.updateFailure.description"),level:s.QU.ERROR,message:C("policyAdministration:alerts.updateFailure.message")}))}))}}},C("common:update")))}},59047:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(81611),r=i.n(n),o=i(83948),a=i.n(o)()(r());a.push([t.id,".script-editor{border:1px solid var(--oxygen-palette-divider);padding-right:0;background:#f7f7f7;border-radius:8px;margin-right:10px;margin-left:10px;margin-bottom:10px}.script-editor .script-editor-toolbar-container{padding-left:10px;padding-right:10px}.edit-policy-btn{margin-top:10px;margin-left:20px}",""]);const c=a}}]);