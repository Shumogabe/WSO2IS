"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[5573],{88490:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}n.d(t,{MS:()=>d,ys:()=>u,yw:()=>s});var c=o((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));r(c,"APPLICATION_ROLE_NAME_REGEX_PATTERN","^[a-zA-Z][a-zA-Z0-9-_]{2,29}$"),r(c,"CHOREO_APP_TEMPLATE_ID","choreo-apim-application-oidc"),r(c,"IS_CHOREO_APP_SP_PROPERTY","isChoreoApp"),r(c,"ORGANIZATION_LOGIN","Organization Login");var s=function(e){return e.SHARE_ALL="SHARE_ALL",e.SHARE_SELECTED="SHARE_SELECTED",e.UNSHARE="UNSHARE",e}({}),u=function(e){return e.SHARE_WITH_ALL="SHARE_ALL",e.SHARE_SELECTED="SHARE_SELECTED",e.SHARE_NONE="SHARE_NONE",e}({}),d=function(e){return e.WITH_UNSHARE="WITH_UNSHARE",e.WITHOUT_UNSHARE="WITHOUT_UNSHARE",e}({})},16042:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Yo});var i=n(87172),a=n(15551),o=n(98855),r=n(31551),l=n(80750),c=n(65986),s=n(91250),u=n(41534),d=n(77139),p=n(55007),m=n(41444),f=n(80893),v=n(51924),g=n(14092),h=n(60486),b=n(40838),E=n(43221),y=n(5545),A=n(57095),S=n(86105),C=n(6833),I=n(82406),O=n(96334),R=n(78132),w=n(22557),T=n.n(w),L=n(47513),_=n(50699),N=n(44194),P=n(10479),Z=n(59673),U=n(47245),j=n(37077),D=n(26154),k=n(6567),M=n(39709),x=n(90236),H=n(48773),F=n(94071),V=n(28676),z=n(14229),G=n(18237),W=n(73502),q=n(51314),Q=n(2e4),B=n(19731),$=n(37559),K=n(12993);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function X(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(e){var t=e.tab,n=e.application,i=e.protocolName,a=e.inboundProtocolConfigurations,o=e.isLoading,r=e.onUpdate,l=e.onProtocolUpdate,c=e.readOnly,s=e["data-componentid"],u=void 0===s?"application-edit-form":s,d=(0,K.Z)().customValidations,p=(0,B.Z)().customInitializers,m=(0,$.Z)().customSubmissionHandlers,f=(0,Q.Z)(),v=f.template,g=f.isTemplateRequestLoading,h=(0,P.$)().t,b=(0,U.I0)(),E=(0,N.useMemo)((function(){if(!a||!n||!i)return null;var e=(0,L.Z)(n),t=i;return H.AI.WS_FEDERATION===t?t=q.z.APPLICATION_INBOUND_PROTOCOL_KEYS[W.RE.WS_FEDERATION]:H.AI.WS_TRUST===t&&(t=q.z.APPLICATION_INBOUND_PROTOCOL_KEYS[W.RE.WS_TRUST]),H.AI.SAML===t?e.inboundProtocolConfiguration=X({},t,{manualConfiguration:a}):e.inboundProtocolConfiguration=X({},t,a),e}),[a,n]);return N.createElement(F.h,{customValidations:d,customInitializers:p,customSubmissionHandlers:m,form:null==t?void 0:t.form,initialFormValues:E,templatePayload:null==v?void 0:v.payload,buttonText:h("common:update"),onFormSubmit:function(e,o){var c,s,u,d=i;H.AI.WS_FEDERATION===d?d=q.z.APPLICATION_INBOUND_PROTOCOL_KEYS[W.RE.WS_FEDERATION]:H.AI.WS_TRUST===d&&(d=q.z.APPLICATION_INBOUND_PROTOCOL_KEYS[W.RE.WS_TRUST]);var p,m,f=null==t||null===(c=t.form)||void 0===c||null===(c=c.fields)||void 0===c?void 0:c.map((function(e){return null==e?void 0:e.name}));if(null!=e&&null!==(s=e.inboundProtocolConfiguration)&&void 0!==s&&s[d]){var v,g,E,y,A,S;if(H.AI.SAML===d)if(null!=e&&null!==(v=e.inboundProtocolConfiguration)&&void 0!==v&&null!==(v=v[d])&&void 0!==v&&v.manualConfiguration){if(!(0,V.Z)(null==e||null===(g=e.inboundProtocolConfiguration)||void 0===g||null===(g=g[d])||void 0===g?void 0:g.manualConfiguration,a))p=null==e||null===(E=e.inboundProtocolConfiguration)||void 0===E?void 0:E[d]}else p=null==e||null===(y=e.inboundProtocolConfiguration)||void 0===y?void 0:y[d];else if(!(0,V.Z)(null==e||null===(A=e.inboundProtocolConfiguration)||void 0===A?void 0:A[d],a))p=null==e||null===(S=e.inboundProtocolConfiguration)||void 0===S?void 0:S[d];(0,G.Z)(e,"inboundProtocolConfiguration")}e.id=null==n?void 0:n.id,(0,V.Z)(e,n)||(f.push("id"),m=(0,z.Z)(e,f));var O=function(){(0,k.lp)(null==n?void 0:n.id,p,i).then((function(){l(),b((0,I.V_)({description:h("applications:notifications.updateApplication.success.description"),level:C.QU.SUCCESS,message:h("applications:notifications.updateApplication.success.message")}))})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?b((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:h("applications:notifications.updateInboundProtocolConfig.error.message")})):b((0,I.V_)({description:h("applications:notifications.updateInboundProtocolConfig.genericError.description"),level:C.QU.ERROR,message:h("applications:notifications.updateInboundProtocolConfig.genericError.message")}))})).finally((function(){return o()}))};m&&(null===(u=Object.keys(m))||void 0===u?void 0:u.length)>0?(0,k.hN)(m).then((function(){r(null==n?void 0:n.id),p?O():(o(),b((0,I.V_)({description:h("applications:notifications.updateApplication.success.description"),level:C.QU.SUCCESS,message:h("applications:notifications.updateApplication.success.message")})))})).catch((function(e){var t;o(),null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?b((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:h("applications:notifications.updateApplication.error.message")})):b((0,I.V_)({description:h("applications:notifications.updateApplication.genericError.description"),level:C.QU.ERROR,message:h("applications:notifications.updateApplication.genericError.message")}))})):p&&O()},isLoading:o||g,readOnly:c,"data-componentid":u})},ee=n(66507),te=n(36234),ne=n(2446),ie=function(e){var t=e.application,n=e.inboundProtocolConfigurations,i=e.content,a=e.isLoading,o=e.protocolName,r=e["data-componentid"],l=void 0===r?"application-markdown-guide":r,c=(0,U.v9)((function(e){var t;return null==e||null===(t=e.application)||void 0===t?void 0:t.samlConfigurations})),s=(0,U.v9)((function(e){var t;return null==e||null===(t=e.application)||void 0===t?void 0:t.oidcConfigurations})),u=(0,U.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.tenantDomain})),d=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t?void 0:t.clientOrigin})),p=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t?void 0:t.serverOrigin})),m=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.productName})),f=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t||null===(t=t.accountApp)||void 0===t?void 0:t.tenantQualifiedPath})),v=(0,ee.Z)().deploymentConfig;var g=function(){var e,t,n,i={};return null!=c&&c.certificate&&(i.pemCertificate=btoa((e=null==c?void 0:c.certificate,n=(null===(t=e.match(new RegExp(".{1,64}","g")))||void 0===t?void 0:t.join("\n"))||"","".concat("-----BEGIN CERTIFICATE-----","\n").concat(n,"\n").concat("-----END CERTIFICATE-----")))),i.scopes={commaSeperatedList:"'openid', 'profile'",spaceSeperatedList:"openid profile"},i},h=(0,N.useMemo)((function(){if(!(t&&n&&c&&s&&u&&d&&p))return null;var e=o;H.AI.WS_FEDERATION===e?e=q.z.APPLICATION_INBOUND_PROTOCOL_KEYS[W.RE.WS_FEDERATION]:H.AI.WS_TRUST===e&&(e=q.z.APPLICATION_INBOUND_PROTOCOL_KEYS[W.RE.WS_TRUST]);var i={};return i.general=t,(0,ne.Z)(i,"protocol.".concat(e),n),(0,ne.Z)(i,"metadata.saml",c),(0,ne.Z)(i,"metadata.oidc",c),i.tenantDomain=u,i.clientOrigin=d,i.serverOrigin=p,i.productName=m,i.accountAppURL=f,i.docSiteURL=null==v?void 0:v.docSiteURL,i.moderatedData=g(),i}),[t,n,c,s,u,d,p]);return N.createElement(te.P,{data:h,content:i,isLoading:a,"data-componentid":l})},ae=n(62415),oe=n(32358),re=n(28077),le=n(5262),ce=n(917),se=n(43974),ue=n(51021),de=n(51570),pe=n(87029),me=n(21257),fe=n(76004),ve=n.n(fe),ge=n(62508),he=n(71551),be=n(77757),Ee=n(89141),ye=n(29775),Ae=n(94635),Se=n(58703),Ce=n(17901),Ie=n(51835),Oe=n.n(Ie),Re=n(27975),we=n.n(Re),Te=n(55900),Le=n.n(Te),_e=n(21555),Ne=n.n(_e),Pe=n(3621),Ze=n.n(Pe),Ue=n(5062),je=n.n(Ue),De=n(56010),ke={};ke.styleTagTransform=je(),ke.setAttributes=Ne(),ke.insert=Le().bind(null,"head"),ke.domAPI=we(),ke.insertStyleElement=Ze();Oe()(De.Z,ke);De.Z&&De.Z.locals&&De.Z.locals;function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}const He=function(){var e,t=Me((0,N.useState)(!0),2),n=t[0],a=t[1],o=(0,U.v9)((function(e){return e.config.ui.features.registrationFlowBuilder})),r=(0,p.EV)(null==o||null===(e=o.scopes)||void 0===e?void 0:e.read);return null!=o&&o.enabled&&r?N.createElement(ye.Z,{in:n},N.createElement(i.Z,{className:"registration-flow-banner",severity:"info",action:N.createElement(Ae.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){return a(!1)}},N.createElement(Ce.DX,null))},N.createElement(Z.c,{i18nKey:"applications.edit.sections.signOnMethod.sections.landing.banners.registrationConfiguration"},"Want to customize your organization's user ",N.createElement("b",null,"self-registration")," flow? Click ",N.createElement(Se.Z,{className:"registration-flow-banner-link",onClick:function(){b.m.push(h.$.getPaths().get("REGISTRATION_FLOW_BUILDER"),{from:{pathname:b.m.location.pathname+b.m.location.hash}})}},"configure")," "," to get started."))):null};var Fe=n(16662);const Ve=function(e){var t=e["data-componentid"],n=void 0===t?"my-account-overview":t,i=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t||null===(t=t.accountApp)||void 0===t?void 0:t.tenantQualifiedPath})),a=(0,P.$)().t,o=(0,R.fQ)().getLink;return N.createElement(R.pJ,{padded:"very"},N.createElement("div",{"data-componentid":n,className:"form-container"},N.createElement(R.X6,{"data-componentid":n,bold:!0,as:"h4"},a("applications:myaccount.overview.heading")),N.createElement(R.xv,null,a("applications:myaccount.overview.contentIntro"),N.createElement(R.eb,{link:o("develop.applications.myaccount.overview.learnMore")},N.createElement(Z.c,{i18nKey:"common:learnMore"},"Learn More"))),N.createElement(R.xv,null,N.createElement(Z.c,{i18nKey:"applications:myaccount.overview.contentDescription"},"You can configure the login flow of the My Account, apply custom",N.createElement(R.rU,{external:!1,onClick:function(){b.m.push(h.$.getPaths().get("BRANDING"))}}," Branding configurations"),"and share access to it with B2B organizations.")),N.createElement(l.Z,{container:!0,alignItems:"center"},N.createElement(l.Z,{xs:6},N.createElement(R.X6,{as:"h6",compact:!0},a("applications:myaccount.overview.shareApplication"))),N.createElement(R.GI,{trigger:N.createElement(l.Z,{xs:6,className:"pr-0"},N.createElement(R.OR,{value:i,"data-componentid":"application-consumer-account-link-copy-field"})),content:a("applications:myaccount.popup"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}))))};var ze=n(30418),Ge=n(27298),We=n(15997),qe=n(79438),Qe=n(9821),Be=n(55813),$e=n(80801),Ke={};Ke.styleTagTransform=je(),Ke.setAttributes=Ne(),Ke.insert=Le().bind(null,"head"),Ke.domAPI=we(),Ke.insertStyleElement=Ze();Oe()($e.Z,Ke);$e.Z&&$e.Z.locals&&$e.Z.locals;function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Je="application-advanced-configuration-form",et=function(e){var t,n,a,o,r,l,c,s,u,d,p,m,f,v,g,h,b,E,y=e.config,A=e.onSubmit,I=e.readOnly,O=e.template,w=e.isSubmitting,T=e.onAlertFired,L=e["data-testid"],j=e["data-componentid"],D=(0,P.$)().t,k=(0,ce.Z)().UIConfig,M=(0,R.fQ)().getLink,x=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.features})),H=(0,S.cr)(null==x?void 0:x.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_NATIVE_AUTHENTICATION")),F=(0,S.cr)(null==x?void 0:x.applications,Qe.jo.FEATURE_DICTIONARY.get("TRUSTED_APPS")),V=(0,N.useRef)(null),z=Ye((0,N.useState)(null==y?void 0:y.enableAPIBasedAuthentication),2),G=z[0],W=z[1],q=Ye((0,N.useState)(null==y||null===(t=y.attestationMetaData)||void 0===t?void 0:t.enableClientAttestation),2),Q=q[0],B=q[1],$=Ye((0,N.useState)(!1),2),K=$[0],Y=$[1],X=Ye((0,N.useState)(null==y||null===(n=y.trustedAppConfiguration)||void 0===n?void 0:n.isFIDOTrustedApp),2),J=X[0],ee=X[1],te=Ye((0,N.useState)(null==y||null===(a=y.trustedAppConfiguration)||void 0===a?void 0:a.isConsentGranted),2),ne=te[0],ie=te[1],ae=Ye((0,N.useState)(!1),2),oe=ae[0],re=ae[1],le=Ye((0,N.useState)(!1),2),se=le[0],de=le[1],pe=Ye((0,N.useState)(!1),2),me=pe[0],fe=pe[1],ve=Ye((0,N.useState)(null==y||null===(o=y.trustedAppConfiguration)||void 0===o||null===(o=o.androidThumbprints)||void 0===o?void 0:o.join(",")),2),he=ve[0],be=ve[1],ye=function(e){var t;try{(0,_.Z)(e.androidAttestationServiceCredentials)||(t=JSON.parse(e.androidAttestationServiceCredentials))}catch(a){return void T({description:"Unable to update the application configuration",level:C.QU.ERROR,message:D("Improper JSON format for Android Attestation Service Credentials")})}var n=!!e.enableAPIBasedAuthentication&&e.enableClientAttestation,i={advancedConfigurations:{attestationMetaData:{androidAttestationServiceCredentials:t,androidPackageName:n?e.androidPackageName:"",appleAppId:n?e.appleAppId:"",enableClientAttestation:n},enableAPIBasedAuthentication:!!e.enableAPIBasedAuthentication,enableAuthorization:!!e.enableAuthorization,returnAuthenticatedIdpList:!!e.returnAuthenticatedIdpList,saas:!!e.saas,skipLoginConsent:!!e.skipConsentLogin,skipLogoutConsent:!!e.skipConsentLogout,trustedAppConfiguration:{androidPackageName:e.enableFIDOTrustedApps?e.androidPackageName:"",androidThumbprints:e.enableFIDOTrustedApps?(0,_.Z)(he)?[]:he.split(","):[],appleAppId:e.enableFIDOTrustedApps?e.appleAppId:"",isConsentGranted:ne,isFIDOTrustedApp:e.enableFIDOTrustedApps}}};!ue.tZ.advancedConfigurations.showSaaS&&delete i.advancedConfigurations.saas,!ue.tZ.advancedConfigurations.showEnableAuthorization&&delete i.advancedConfigurations.enableAuthorization,!ue.tZ.advancedConfigurations.showReturnAuthenticatedIdPs&&delete i.advancedConfigurations.returnAuthenticatedIdpList,A(i)},Ae=!G,Se=!Q||Ae,Ce=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.isTrustedAppConsentRequired})),Ie=!Q&&!J,Oe=function(){return Y(Ae)},Re=(0,N.useCallback)((function(e){var t,n,i,a={androidAttestationServiceCredentials:void 0,androidPackageName:void 0,androidThumbprints:void 0};if(e.enableClientAttestation)try{var o,r;(0,_.Z)(e.androidAttestationServiceCredentials)||(t=JSON.parse(e.androidAttestationServiceCredentials)),null!==(o=e.androidPackageName)&&void 0!==o&&o.toString().trim()||!Object.keys(t).length?null!==(r=e.androidPackageName)&&void 0!==r&&r.toString().trim()&&!Object.keys(t).length&&(a.androidAttestationServiceCredentials=D("applications:forms.advancedConfig.sections.clientAttestation.fields.androidAttestationServiceCredentials.validations.empty")):a.androidPackageName=D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.androidPackageName.validations.emptyForAttestation")}catch(l){a.androidAttestationServiceCredentials=D("applications:forms.advancedConfig.sections.clientAttestation.fields.androidAttestationServiceCredentials.validations.invalid")}e.enableFIDOTrustedApps?null!==(n=e.androidPackageName)&&void 0!==n&&n.toString().trim()||null==he||!he.toString().trim()?null===(i=e.androidPackageName)||void 0===i||!i.toString().trim()||null!=he&&he.toString().trim()?fe(!0):de(!0):a.androidPackageName=D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.androidPackageName.validations.emptyForFIDO"):fe(!0);return a}),[he]);return N.createElement(N.Fragment,null,N.createElement(qe.l0,{id:Je,uncontrolledForm:!0,ref:V,validate:Re,validateOnBlur:!1,onSubmit:function(e){ye(e)},initialValues:{androidAttestationServiceCredentials:JSON.stringify((null==y||null===(r=y.attestationMetaData)||void 0===r?void 0:r.androidAttestationServiceCredentials)||""),androidPackageName:(null==y||null===(l=y.attestationMetaData)||void 0===l?void 0:l.androidPackageName)||(null==y||null===(c=y.trustedAppConfiguration)||void 0===c?void 0:c.androidPackageName),appleAppId:(null==y||null===(s=y.trustedAppConfiguration)||void 0===s?void 0:s.appleAppId)||(null==y||null===(u=y.attestationMetaData)||void 0===u?void 0:u.appleAppId)}},N.createElement(Ge.l,{tabId:ue.N0.ADVANCED},N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Skip consent login",name:"skipConsentLogin",label:D("applications:forms.advancedConfig.fields.skipConsentLogin.label"),required:!1,value:null!=y&&y.skipLoginConsent?["skipLoginConsent"]:[],readOnly:I,"data-testid":"".concat(L,"-skip-login-consent-checkbox"),"data-componentid":"".concat(L,"-skip-login-consent-checkbox"),hint:D("applications:forms.advancedConfig.fields.skipConsentLogin.hint")})))),(null==Be?void 0:Be.id)!==(null==O?void 0:O.id)&&N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Skip consent logout",name:"skipConsentLogout",label:D("applications:forms.advancedConfig.fields.skipConsentLogout.label"),required:!1,value:null!=y&&y.skipLogoutConsent?["skipLogoutConsent"]:[],readOnly:I,"data-testid":"".concat(L,"-skip-logout-consent-checkbox"),"data-componentid":"".concat(L,"-skip-logout-consent-checkbox"),hint:D("applications:forms.advancedConfig.fields.skipConsentLogout.hint")})))),N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Return authenticated IDP list",name:"returnAuthenticatedIdpList",label:D("applications:forms.advancedConfig.fields.returnAuthenticatedIdpList.label"),required:!1,value:null!=y&&y.returnAuthenticatedIdpList?["returnAuthenticatedIdpList"]:[],readOnly:I,"data-testid":"".concat(L,"-return-authenticated-idp-list-checkbox"),"data-componentid":"".concat(L,"-return-authenticated-idp-list-checkbox"),hidden:!ue.tZ.advancedConfigurations.showReturnAuthenticatedIdPs,hint:D("applications:forms.advancedConfig.fields.returnAuthenticatedIdpList.hint")})))),ue.tZ.advancedConfigurations.showEnableAuthorization&&(null==k?void 0:k.isXacmlConnectorEnabled)&&N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Enable authorization",name:"enableAuthorization",label:D("applications:forms.advancedConfig.fields.enableAuthorization.label"),required:!1,value:null!=y&&y.enableAuthorization?["enableAuthorization"]:[],readOnly:I,"data-testid":"".concat(L,"-enable-authorization-checkbox"),"data-componentid":"".concat(L,"-enable-authorization-checkbox"),hidden:!ue.tZ.advancedConfigurations.showEnableAuthorization||!(null!=k&&k.isXacmlConnectorEnabled),hint:D("applications:forms.advancedConfig.fields.enableAuthorization.hint")})))),H&&((null==O?void 0:O.id)===Qe.jo.CUSTOM_APPLICATION||(null==O?void 0:O.id)===Qe.jo.CUSTOM_APPLICATION_OIDC||(null==O?void 0:O.id)===Qe.jo.MOBILE||(null==O?void 0:O.id)===Qe.jo.TEMPLATE_IDS.get("oidcWeb"))&&N.createElement(Ee.Z,{"data-componentid":"".concat(L,"-application-native-authentication")},N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(ge.Z,null),N.createElement(ge.Z,{hidden:!0})),N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(R.X6,{as:"h4"},D("applications:forms.advancedConfig.sections.applicationNativeAuthentication.heading")),N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Enable apiBasedAuthentication",name:"enableAPIBasedAuthentication",label:D("applications:forms.advancedConfig.sections.applicationNativeAuthentication.fields.enableAPIBasedAuthentication.label"),required:!1,readOnly:I,value:G?["enableAPIBasedAuthentication"]:[],listen:function(e){W(e),Y(!e&&Q)},"data-testid":"".concat(L,"-enable-api-based-authentication"),"data-componentid":"".concat(L,"-enable-api-based-authentication"),hidden:!ue.tZ.advancedConfigurations.showEnableAuthorization,hint:D("applications:forms.advancedConfig.sections.applicationNativeAuthentication.fields.enableAPIBasedAuthentication.hint")})))),H&&((null==O?void 0:O.id)===Qe.jo.CUSTOM_APPLICATION||(null==O?void 0:O.id)===Qe.jo.CUSTOM_APPLICATION_OIDC||(null==O?void 0:O.id)===Qe.jo.MOBILE)&&N.createElement(Ee.Z,{"data-componentid":"".concat(L,"-client-attestation")},N.createElement(Ee.Z.Row,{columns:1,onClick:Oe},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(ge.Z,null),N.createElement(R.X6,{as:"h4"},D("applications:forms.advancedConfig.sections.clientAttestation.heading")),Ae&&K&&N.createElement(i.Z,{severity:"info",className:"client-attestation-info-alert"},D("applications:forms.advancedConfig.sections.clientAttestation.alerts.clientAttestationAlert")),N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Enable attestation",name:"enableClientAttestation",label:D("applications:forms.advancedConfig.sections.clientAttestation.fields.enableClientAttestation.label"),required:!1,readOnly:I,value:null!=y&&null!==(d=y.attestationMetaData)&&void 0!==d&&d.enableClientAttestation?["enableClientAttestation"]:[],listen:B,"data-testid":"".concat(L,"-enable-client-attestation"),"data-componentid":"".concat(L,"-enable-api-based-authentication"),disabled:Ae,hint:N.createElement(Z.c,{i18nKey:"applications:forms.advancedConfig.sections.clientAttestation.fields.enableClientAttestation.hint"},"Select to verify the integrity of the application by calling the attestation service of the hosting platform. To enable this you will be required to setup ",N.createElement("strong",null,"Platform Settings"),".")}))),N.createElement(Ee.Z.Row,{columns:1,onClick:Oe},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.Textarea,{ariaLabel:"Android service account credentials",inputType:"description",name:"androidAttestationServiceCredentials",label:N.createElement(N.Fragment,null,N.createElement(R.dn,{size:"micro",icon:(0,We.r2)().android,floated:"left",verticalAlign:"middle",spaced:"right"}),D("applications:forms.advancedConfig.sections.clientAttestation.fields.androidAttestationServiceCredentials.label")),placeholder:D("applications:forms.advancedConfig.sections.clientAttestation.fields.androidAttestationServiceCredentials.placeholder"),value:null!=y&&null!==(p=y.attestationMetaData)&&void 0!==p&&p.androidAttestationServiceCredentials?[JSON.stringify(null==y||null===(m=y.attestationMetaData)||void 0===m?void 0:m.androidAttestationServiceCredentials,null,4)]:[],hint:D("applications:forms.advancedConfig.sections.clientAttestation.fields.androidAttestationServiceCredentials.hint"),type:"text",maxLength:5e3,minLength:30,width:16,"data-testid":"".concat(L,"-client-attestation-android-account-credentials"),"data-componentid":"".concat(L,"-client-attestation-android-account-credentials"),disabled:Se,readOnly:I})))),F&&((null==O?void 0:O.id)===Qe.jo.CUSTOM_APPLICATION||(null==O?void 0:O.id)===Qe.jo.CUSTOM_APPLICATION_OIDC||(null==O?void 0:O.id)===Qe.jo.MOBILE)&&N.createElement(Ee.Z,{"data-componentid":"".concat(L,"-trusted-apps")},N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(ge.Z,null),N.createElement(R.X6,{as:"h4"},D("applications:forms.advancedConfig.sections.trustedApps.heading")),N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Enable FIDO Trusted Apps",name:"enableFIDOTrustedApps",label:D("applications:forms.advancedConfig.sections.trustedApps.fields.enableFIDOTrustedApps.label"),required:!1,readOnly:I,checked:J,value:J?["isFIDOTrustedApp"]:[],listen:function(e){e?Ce?re(!0):ee(!0):ee(!1)},"data-componentid":"".concat(j,"-enable-fido-trusted-apps"),hint:N.createElement(Z.c,{i18nKey:"applications:forms.advancedConfig.sections.trustedApps.fields.enableFIDOTrustedApps.hint"},"Select to trust the app for user login with passkey. Provide the details of the application under",N.createElement("strong",null," Platform Settings"),".")}),ue.tZ.advancedConfigurations.showTrustedAppConsentWarning&&N.createElement(i.Z,{severity:"warning",className:"fido-enabled-warn-alert"},N.createElement(N.Fragment,null,N.createElement(Z.c,{i18nKey:"applications:forms.advancedConfig.sections.trustedApps.alerts.trustedAppSettingsAlert"},"Enabling this feature will publish details under",N.createElement("strong",null," Platform Settings")," to a public endpoint accessible to all Asgardeo organizations. Consequently, other organizations can view information about your application and its associated organization. This option is not applicable if you are using custom domains."),N.createElement(R.eb,{link:M("develop.applications.editApplication.common.advanced.trustedApps.learnMore")},D("common:learnMore"))))))),((null==O?void 0:O.id)===Qe.jo.CUSTOM_APPLICATION||(null==O?void 0:O.id)===Qe.jo.CUSTOM_APPLICATION_OIDC||(null==O?void 0:O.id)===Qe.jo.MOBILE)&&N.createElement(Ee.Z,{"data-componentid":"".concat(L,"-platform-settings")},N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(ge.Z,null),N.createElement(R.X6,{as:"h4"},D("applications:forms.advancedConfig.sections.platformSettings.heading")),N.createElement(R.X6,{subHeading:!0,as:"h6"},D("applications:forms.advancedConfig.sections.platformSettings.subTitle")))),N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,null,N.createElement(R.X6,{as:"h5",bold:"500"},N.createElement(R.dn,{size:"micro",icon:(0,We.r2)().android,verticalAlign:"middle",floated:"left"}),D("applications:forms.advancedConfig.sections.platformSettings.fields.android.heading")),N.createElement(qe.gN.Input,{ariaLabel:"Android package name",inputType:"default",name:"androidPackageName",label:D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.androidPackageName.label"),required:!1,readOnly:I,value:null!==(f=(null==y||null===(v=y.attestationMetaData)||void 0===v?void 0:v.androidPackageName)||(null==y||null===(g=y.trustedAppConfiguration)||void 0===g?void 0:g.androidPackageName))&&void 0!==f?f:"",placeholder:D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.androidPackageName.placeholder"),maxLength:200,minLength:3,width:16,"data-componentid":"".concat(j,"-platform-settings-android-package-name"),disabled:Ie}),N.createElement(R.kW,{disabled:Ie},D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.androidPackageName.hint")))),F&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(R.wE,{isAllowEnabled:!1,onlyOrigin:!1,labelEnabled:!1,urlState:he,setURLState:function(e){return be(e)},labelName:D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.keyHashes.label"),required:!1,value:he,validation:function(e){return!(null!=e&&e.includes(","))},placeholder:D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.keyHashes.placeholder"),validationErrorMsg:D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.keyHashes.validations.invalidOrEmpty"),showError:se,setShowError:de,clearError:me,setClearError:fe,readOnly:I,addURLTooltip:D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.keyHashes.tooltip"),duplicateURLErrorMessage:D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.keyHashes.validations.duplicate"),showPredictions:!1,showLessContent:D("common:showLess"),showMoreContent:D("common:showMore"),"data-componentid":"".concat(j,"-platform-settings-android-thumbprints"),disabled:Ie||!J,skipInternalValidation:!0}),N.createElement(R.kW,{disabled:Ie||!J},D("applications:forms.advancedConfig.sections.platformSettings.fields.android.fields.keyHashes.hint")))),N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,null,N.createElement(R.X6,{as:"h5",bold:"500"},N.createElement(R.dn,{size:"micro",icon:(0,We.r2)().apple,floated:"left",verticalAlign:"middle"}),D("applications:forms.advancedConfig.sections.platformSettings.fields.apple.heading")),N.createElement(qe.gN.Input,{ariaLabel:"Apple App Id",inputType:"default",name:"appleAppId",label:D("applications:forms.advancedConfig.sections.platformSettings.fields.apple.fields.appleAppId.label"),required:!1,placeholder:D("applications:forms.advancedConfig.sections.platformSettings.fields.apple.fields.appleAppId.placeholder"),value:null!==(h=(null==y||null===(b=y.attestationMetaData)||void 0===b?void 0:b.appleAppId)||(null==y||null===(E=y.trustedAppConfiguration)||void 0===E?void 0:E.appleAppId))&&void 0!==h?h:"",maxLength:200,minLength:3,width:16,"data-componentid":"".concat(j,"-platform-settings-apple-app-id"),disabled:Ie,readOnly:I}),N.createElement(R.kW,{disabled:Ie},D("applications:forms.advancedConfig.sections.platformSettings.fields.apple.fields.appleAppId.hint")))))),N.createElement(qe.gN.Button,{form:Je,size:"small",buttonType:"primary_btn",ariaLabel:"Update button",name:"update-button","data-testid":"".concat(L,"-submit-button"),"data-componentid":"".concat(L,"-submit-button"),disabled:w,loading:w,hidden:I,label:D("common:update")})),N.createElement(R.cV,{onClose:function(){return re(!1)},type:"warning",assertionHint:D("applications:forms.advancedConfig.sections.trustedApps.modal.assertionHint"),assertionType:"checkbox",open:oe,primaryAction:D("common:confirm"),secondaryAction:D("common:cancel"),onPrimaryActionClick:function(){ee(!0),ie(!0),re(!1)},onSecondaryActionClick:function(){ee(!1),ie(!1),re(!1)},closeOnDimmerClick:!1,"data-componentid":"".concat(j,"-trusted-apps-confirmation-modal")},N.createElement(R.cV.Header,{"data-testid":"".concat(L,"-trusted-apps-confirmation-modal-header")},D("applications:forms.advancedConfig.sections.trustedApps.modal.header")),N.createElement(R.cV.Message,{attached:!0,warning:!0,"data-componentid":"".concat(j,"-trusted-apps-confirmation-modal-message")},D("applications:forms.advancedConfig.sections.trustedApps.modal.message")),N.createElement(R.cV.Content,{"data-componentid":"".concat(j,"-trusted-apps-confirmation-modal-content")},D("applications:forms.advancedConfig.sections.trustedApps.modal.content"))))};function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}et.defaultProps={"data-componentid":"application-advanced-configurations-form","data-testid":"application-advanced-configurations-form"};var it=function(e){var t,n=e.appId,i=e.advancedConfigurations,a=e.featureConfig,o=e.onUpdate,r=e.readOnly,l=e.template,c=e["data-componentid"],s=(0,P.$)().t,u=(0,U.I0)(),d=(0,p.EV)(null==a||null===(t=a.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),m=tt((0,N.useState)(!1),2),f=m[0],v=m[1];return N.createElement(R.pJ,{className:"advanced-configuration-section",padded:"very"},N.createElement(et,{config:i,onSubmit:function(e){v(!0),(0,k.TH)(n,e).then((function(){u((0,I.V_)({description:s("applications:notifications.updateAdvancedConfig.success.description"),level:C.QU.SUCCESS,message:s("applications:notifications.updateAdvancedConfig.success.message")})),o(n)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?u((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:s("applications:notifications.updateAdvancedConfig.error.message")})):u((0,I.V_)({description:s("applications:notifications.updateAdvancedConfig.genericError.description"),level:C.QU.ERROR,message:s("applications:notifications.updateAdvancedConfig.genericError.message")}))})).finally((function(){v(!1)}))},readOnly:r||!d,template:l,onAlertFired:function(e){u((0,I.V_)(e))},"data-testid":"".concat(c,"-form"),isSubmitting:f}))};it.defaultProps={"data-componentid":"application-advanced-settings"};var at=n(6894),ot=n(66528),rt=n(12950),lt=n(10909),ct=n(19980),st=function(e){var t=e.attribute,n=e.updateMapping,i=e.mapping,a=e.placeholder,o=e.isReadOnly,r=e["data-testid"],l=(0,P.$)().t;return N.createElement(ot.Z.Row,{"data-testid":r},N.createElement(ot.Z.Cell,null,null==t?void 0:t.displayName),N.createElement(N.Fragment,null,N.createElement(ot.Z.Cell,{error:(0,_.Z)(i)},N.createElement(rt.Z,{placeholder:a,value:(0,_.Z)(i)?"":i,onChange:function(e){var i=e.target.value;n({claim:t,mappedValue:i})},required:!0,"data-testid":"".concat(r,"-input"),readOnly:o}),(0,_.Z)(i)&&N.createElement(j.Z,{basic:!0,color:"red",pointing:"left"},l("authenticationProvider:forms.attributeSettings.attributeListItem.validation.empty")))))};st.defaultProps={"data-testid":"attribute-list-item"};var ut=n(90408),dt=n(23744),pt=n(65397),mt=n(47018);function ft(e){return function(e){if(Array.isArray(e))return ht(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||gt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){if(e){if("string"==typeof e)return ht(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var bt=function(e){var t=e.selectedAttributes,n=e.setSelectedAttributes,i=e.showAddModal,a=e.setShowAddModal,o=e.attributesList,r=e["data-testid"],l=(0,P.$)().t,c=vt((0,N.useState)([]),2),s=c[0],u=c[1],d=vt((0,N.useState)([]),2),p=d[0],m=d[1],f=vt((0,N.useState)([]),2),v=f[0],g=f[1],h=vt((0,N.useState)([]),2),b=h[0],E=h[1],y=vt((0,N.useState)([]),2),A=y[0],S=y[1],C=vt((0,N.useState)([]),2),I=C[0],O=C[1],w=vt((0,N.useState)(!1),2),T=w[0],L=w[1],Z=vt((0,N.useState)(!1),2),U=Z[0],j=Z[1];(0,N.useEffect)((function(){O(U?v:[])}),[U]),(0,N.useEffect)((function(){S(T?s:[])}),[T]),(0,N.useEffect)((function(){if(i){var e=o.filter((function(e){return(0,_.Z)((0,ut.Z)(t,(function(t){return t.claim.uri===e.uri})))}));u(e),m(e),g(t.map((function(e){return e.claim}))),E(t.map((function(e){return e.claim})))}else u([]),m([]),g([]),E([]);O([]),S([]),j(!1),L(!1)}),[i]);return N.createElement(mt.Z,{open:i,size:"small",className:"user-attributes","data-testid":"".concat(r,"-modal")},N.createElement(mt.Z.Header,{"data-testid":"".concat(r,"-modal-header")},l("authenticationProvider:modals.attributeSelection.title"),N.createElement(R.X6,{subHeading:!0,ellipsis:!0,as:"h6"},l("authenticationProvider:modals.attributeSelection.subTitle"))),N.createElement(mt.Z.Content,{image:!0,"data-testid":"".concat(r,"-modal-content")},N.createElement(R.IX,{searchPlaceholder:l("authenticationProvider:modals.attributeSelection.content.searchPlaceholder"),addItems:function(){var e=ft(v);(null==A?void 0:A.length)>0&&A.map((function(t){null!=e&&e.includes(t)||e.push(t)})),g(e),E(e),u(s.filter((function(t){return!(null!=e&&e.includes(t))}))),m(p.filter((function(t){return!(null!=e&&e.includes(t))}))),S(A.filter((function(t){return!(null!=e&&e.includes(t))}))),L(!1)},removeItems:function(){var e=ft(s);(null==I?void 0:I.length)>0&&I.map((function(t){null!=e&&e.includes(t)||e.push(t)})),u(e),m(e),g(null==v?void 0:v.filter((function(t){return!(null!=e&&e.includes(t))}))),E(null==b?void 0:b.filter((function(t){return!(null!=e&&e.includes(t))}))),O(I.filter((function(t){return!(null!=e&&e.includes(t))}))),j(!1)},handleUnelectedListSearch:function(e){var t=e.target.value;if(t.length>0){var n=s.filter((function(e){return-1!==e.displayName.toLowerCase().indexOf(t.toLowerCase())})),i=s.filter((function(e){return-1!==e.uri.toLowerCase().indexOf(t.toLowerCase())}));m((0,dt.Z)((0,pt.Z)(n,i),"displayName"))}else m(s)},handleSelectedListSearch:function(e){var t=e.target.value;t.length>0?E(b.filter((function(e){return-1!==e.uri.toLowerCase().indexOf(t.toLowerCase())}))):E(v)},"data-testid":"".concat(r,"-modal-content")},N.createElement(R.Jv,{isListEmpty:!(p.length>0),listType:"unselected",listHeaders:["Attribute"],handleHeaderCheckboxChange:function(){L(!T)},isHeaderCheckboxChecked:T,"data-testid":"".concat(r,"-modal-content-unselected-list"),emptyPlaceholderDefaultContent:l("transferList:list.emptyPlaceholders.default")},null==p?void 0:p.map((function(e){return N.createElement(R.qT,{handleItemChange:function(){return function(e){var t=ft(A);null!=t&&t.includes(e)?(t.splice(t.indexOf(e),1),S(t)):(t.push(e),S(t))}(e)},key:e.uri,listItem:e.displayName,listItemId:e.id,listItemIndex:e.uri,isItemChecked:A.includes(e),showSecondaryActions:!1,showListSubItem:!0,listSubItem:e.uri===e.displayName?"":e.uri,"data-testid":"".concat(r,"-modal-content-unselected-list-item-").concat(e.id)})}))),N.createElement(R.Jv,{isListEmpty:!(b.length>0),listType:"selected",listHeaders:["Attribute"],handleHeaderCheckboxChange:function(){j(!U)},isHeaderCheckboxChecked:U,"data-testid":"".concat(r,"-modal-content-selected-list"),emptyPlaceholderDefaultContent:l("transferList:list.emptyPlaceholders.default")},null==b?void 0:b.map((function(e){return N.createElement(R.qT,{handleItemChange:function(){return t=e,void(null!=(n=ft(I))&&n.includes(t)?(n.splice(n.indexOf(t),1),O(n)):(n.push(t),O(n)));var t,n},key:e.uri,listItem:e.displayName,listItemId:e.id,listItemIndex:e.uri,isItemChecked:I.includes(e),showSecondaryActions:!1,showListSubItem:!0,listSubItem:e.uri===e.displayName?"":e.uri,"data-testid":"".concat(r,"-modal-content-selected-list-item-").concat(e.id)})}))))),N.createElement(mt.Z.Actions,{"data-testid":"".concat(r,"-modal-actions")},N.createElement(R.Qj,{onClick:function(){a(!1)},"data-testid":"".concat(r,"-modal-cancel-button")},l("common:cancel")),N.createElement(R.KM,{onClick:function(){n(v.map((function(e){var n=t.find((function(t){return t.claim.uri===e.uri}));return(0,_.Z)(n)?{claim:e,mappedValue:""}:n}))),a(!1)},"data-testid":"".concat(r,"-modal-save-button")},l("common:save"))))};bt.defaultProps={"data-testid":"idp-edit-attribute-settings-attribute-selection-wizard"};var Et=n(90955),yt=n(9183),At=n(7231);n(27772);var St=function(e){var t=e.claimURI,n=e.displayName,i=e.localClaimDisplayName,a=e["data-testid"];return N.createElement(ot.Z.Row,{"data-testid":a},N.createElement(ot.Z.Cell,null,N.createElement("div",null,n||i),N.createElement(R.GI,{content:t,inverted:!0,trigger:N.createElement(R.EK,{compact:!0,withBackground:!1},t),position:"bottom left"})))},Ct=n(61331),It=n(64704),Ot=n(16590),Rt=n(39114),wt=n(84548),Tt=n(35407);function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Lt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Lt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ut(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var jt=function(e){var t,n,i,a,o,r,l,c,s,u,d,p,m,f,v=e.applicationTemplateId,g=e.claimConfigurations,h=e.dropDownOptions,b=e.setSubmissionValues,E=e.setSelectedValue,y=e.defaultSubjectAttribute,A=e.triggerSubmission,S=e.initialSubject,C=e.initialRole,I=e.claimMappingOn,O=e.readOnly,w=e.technology,T=e.onlyOIDCConfigured,L=e.oidcInitialValues,j=e.appVersion,k=e["data-componentid"],M=(0,P.$)().t,x=(0,ce.Z)().UIConfig,H=(0,U.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t||null===(t=t.applications)||void 0===t?void 0:t.disabledFeatures})),F=Zt((0,N.useState)(),2),V=F[0],z=F[1],G=Zt((0,N.useState)(),2),W=G[0],q=G[1],Q=Zt((0,N.useState)(null!=L&&L.subject?L.subject.subjectType:wt.UH.PUBLIC),2),B=Q[0],$=Q[1],K=Zt((0,N.useState)(!1),2),Y=K[0],X=K[1],J=Zt((0,N.useState)(null==S?void 0:S.useMappedLocalSubject),2),ee=J[0],te=J[1],ne=Zt((0,N.useState)(null==S?void 0:S.mappedLocalSubjectMandatory),2),ie=ne[0],ae=ne[1];(0,N.useEffect)((function(){if(I&&h&&h.length>0)if(W){var e=h.findIndex((function(e){return(null==e?void 0:e.key)===W}));if(e>-1){var t;z(null===(t=h[e])||void 0===t?void 0:t.value)}else{var n,i,a=h.findIndex((function(e){return(null==e?void 0:e.key)===y}));z(a>-1?null===(n=h[a])||void 0===n?void 0:n.value:null===(i=h[0])||void 0===i?void 0:i.value)}}else if(V){var o,r=null===(o=h.find((function(e){return(null==e?void 0:e.value)===V})))||void 0===o?void 0:o.key;r&&(q(r),z(V))}else{var l,c;z((null==S||null===(l=S.claim)||void 0===l?void 0:l.uri)||(null===(c=h[0])||void 0===c?void 0:c.value))}else if(V)h&&h.length>0&&h.findIndex((function(e){return(null==e?void 0:e.value)===V}))<0&&z(y);else{var s,u;z((null==S||null===(s=S.claim)||void 0===s?void 0:s.uri)||(null===(u=h[0])||void 0===u?void 0:u.value))}}),[h]),(0,N.useEffect)((function(){B||$(wt.UH.PUBLIC)}),[]),(0,N.useEffect)((function(){V&&(E(V),X(V!==y))}),[V]),(0,N.useEffect)((function(){if(V&&h){var e,t=null===(e=h.find((function(e){return(null==e?void 0:e.value)===V})))||void 0===e?void 0:e.key;q(t)}}),[V]);var oe,re,le=function(e,t){var n=y;return Y&&(n=se(e,t)),n},se=function(e,t){var n="";return e.map((function(e){e.value===t&&(n=t)})),n},de=function(){return pe()||(0,_.Z)(h)},pe=function(){return!ue.tZ.attributeSettings.advancedAttributeSettings.showSubjectAttribute||T&&!Y};return C&&S?N.createElement(qe.l0,{id:"application-attributes-advance-settings-form",uncontrolledForm:!0,initialValues:!T&&{oidcInitialValues:L,subjectAttribute:V},validate:function(e){var t={sectorIdentifierURI:void 0};return null!=e&&e.sectorIdentifierURI&&!Ot.URLUtils.isHttpsUrl(e.sectorIdentifierURI)&&(t.sectorIdentifierURI=M("applications:forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.validations.invalid")),t},onSubmit:function(e){!function(e){var t,n,i={oidc:Nt(Nt({},L),{},{subject:{sectorIdentifierUri:e.sectorIdentifierURI,subjectType:B}}),role:{claim:se(h,e.roleAttribute),includeUserDomain:!!e.role,mappings:[]},subject:{claim:le(h,e.subjectAttribute),includeTenantDomain:!!e.subjectIncludeTenantDomain,includeUserDomain:!!e.subjectIncludeUserDomain,mappedLocalSubjectMandatory:ie,useMappedLocalSubject:ee}},a=ue.tZ.attributeSettings.advancedAttributeSettings;!a.showIncludeUserstoreDomainSubject&&delete i.subject.includeUserDomain,!a.showIncludeTenantDomain&&delete i.subject.includeTenantDomain,!a.showValidateLinkedLocalAccount&&delete i.subject.useMappedLocalSubject,!a.showRoleMapping&&delete i.role.mappings,!a.showIncludeUserstoreDomainRole&&i.role.includeUserDomain,!a.showRoleAttribute&&delete i.role.claim,null!=i&&null!==(t=i.subject)&&void 0!==t&&t.claim&&""!==(null==i||null===(n=i.subject)||void 0===n?void 0:n.claim)||(i.subject.claim=g.subject.claim.uri),b(i)}(e)},triggerSubmit:function(e){return A(e)}},N.createElement(Ee.Z,null,N.createElement(Ge.l,{tabId:ue.N0.USER_ATTRIBUTES},(!(null!=H&&H.includes("applications.attributes.alternativeSubjectIdentifier"))||!(null!=H&&H.includes("applications.attributes.subjectType")))&&(null===ue.tZ||void 0===ue.tZ||null===(t=ue.tZ.attributeSettings)||void 0===t||null===(t=t.advancedAttributeSettings)||void 0===t?void 0:t.showSubjectAttribute)&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(ge.Z,null),N.createElement(R.X6,{as:"h4"},M("applications:forms.advancedAttributeSettings.sections.subject.heading")))),T&&!(null!=H&&H.includes("applications.attributes.alternativeSubjectIdentifier"))&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(Rt.Z,{name:"enableAlternativeSubjectIdentifier",ariaLabel:M("applications:forms.advancedAttributeSettings.sections.subject.fields.alternateSubjectAttribute.label"),"data-componentid":"".concat(k,"-reassign-subject-attribute-checkbox"),checked:Y,label:M("applications:forms.advancedAttributeSettings.sections.subject.fields.alternateSubjectAttribute.label"),onClick:function(e,t){return n=null==t?void 0:t.checked,X(n),void z(y);var n},disabled:O}),N.createElement(R.kW,null,N.createElement(Z.c,{i18nKey:M("applications:forms.advancedAttributeSettings.sections.subject.fields.hint")},"This option will allow to use an alternate attribute as the subject identifier instead of the ",N.createElement(R.EK,{withBackground:!0},"userid"),".")))),!pe()&&(0,_.Z)(h)&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(R.v0,{info:!0},N.createElement(D.Z,{name:"info circle"}),M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.info")))),!de()&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.Dropdown,{ariaLabel:"Subject attribute",name:"subjectAttribute",label:M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.label"),placeholder:M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.placeholder"),required:I,value:V,options:h,readOnly:O,"data-testid":"".concat(k,"-subject-attribute-dropdown"),"data-componentid":"".concat(k,"-subject-attribute-dropdown"),listen:function(e){z(e?null==e?void 0:e.toString():e)},enableReinitialize:!0,hint:1!==w.length&&v!==Qe.jo.CUSTOM_APPLICATION_OIDC&&v!==Qe.jo.CUSTOM_APPLICATION_SAML?N.createElement(R.kW,{compact:!0},M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hint")):"oauth2"===(null===(oe=w[0])||void 0===oe?void 0:oe.type)||v===Qe.jo.CUSTOM_APPLICATION_OIDC?N.createElement(R.kW,{compact:!0},N.createElement(Z.c,{i18nKey:"applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hintOIDC"},"Select which of the shared attributes you want to use as the subject identifier of the user. This represents the ",N.createElement(R.EK,{withBackground:!0},"sub")," claim of the",N.createElement(R.EK,{withBackground:!0},"id_token"),".")):"samlsso"===(null===(re=w[0])||void 0===re?void 0:re.type)||v===Qe.jo.CUSTOM_APPLICATION_SAML?N.createElement(R.kW,{compact:!0},N.createElement(Z.c,{i18nKey:"applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hintSAML"},"Select which of the shared attributes you want to use as the subject identifier of the user. This represents the ",N.createElement(R.EK,{withBackground:!0},"subject")," element of the SAML assertion.")):N.createElement(R.kW,{compact:!0},M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hint"))}))),!(null!=H&&H.includes("applications.attributes.alternativeSubjectIdentifier")||de())&&N.createElement(Ee.Z.Row,{columns:1,"data-componentid":"application-edit-user-attributes-include-user-domain"},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Subject include user domain",name:"subjectIncludeUserDomain",label:M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeUserDomain.label"),required:!1,value:null!=S&&S.includeUserDomain?["includeUserDomain"]:[],readOnly:O,"data-testid":"".concat(k,"-subject-iInclude-user-domain-checkbox"),hint:M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeUserDomain.hint")}))),!(null!=H&&H.includes("applications.attributes.alternativeSubjectIdentifier")||de())&&N.createElement(Ee.Z.Row,{columns:1,"data-componentid":"application-edit-user-attributes-include-tenant-domain"},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Subject include tenant domain",name:"subjectIncludeTenantDomain",label:M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeTenantDomain.label"),required:!1,value:null!=S&&S.includeTenantDomain?["includeTenantDomain"]:[],readOnly:O,"data-testid":"".concat(k,"-subject-include-tenant-domain-checkbox"),hint:M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeTenantDomain.hint")}))),T&&!(null!=H&&H.includes("applications.attributes.subjectType"))&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(R.xv,null,M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectType.label")),Object.keys(wt.UH).map((function(e,t){var n=wt.UH[e];return N.createElement(N.Fragment,null,N.createElement(qe.gN.Radio,{key:t,ariaLabel:"Subject type ".concat(n),name:"subjectType",value:n,label:M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectType."+n+".label"),hint:n===wt.UH.PAIRWISE&&M("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectType."+n+".hint"),checked:B===n,listen:function(){$(n)},readOnly:O,"data-componentId":"".concat(k,"-subject")+"-type-".concat(n,"-radio")}))})))),B===wt.UH.PAIRWISE&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.Input,{ariaLabel:"Sector Identifier URI",inputType:"url",name:"sectorIdentifierURI",label:M("applications:forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.label"),required:!1,placeholder:M("applications:forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.placeholder"),hint:M("applications:forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.hint"),readOnly:O,maxLength:200,minLength:3,width:16,initialValue:null==L||null===(n=L.subject)||void 0===n?void 0:n.sectorIdentifierUri,"data-componentId":"".concat(k,"-sector-identifier-uri")}))),(null===ue.tZ||void 0===ue.tZ||null===(i=ue.tZ.attributeSettings)||void 0===i||null===(i=i.advancedAttributeSettings)||void 0===i?void 0:i.isLinkedAccountsEnabled(v))&&N.createElement(Ee.Z.Row,{columns:1,"data-componentid":"application-edit-user-attributes-linked-accounts"},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(ge.Z,null),N.createElement(R.X6,{as:"h4"},M("applications:forms.advancedAttributeSettings.sections.linkedAccounts.heading")),N.createElement(R.X6,{as:"h6",color:"grey"},M("applications:forms.advancedAttributeSettings.sections.linkedAccounts.descriptionFederated")))),(null===ue.tZ||void 0===ue.tZ||null===(a=ue.tZ.attributeSettings)||void 0===a||null===(a=a.advancedAttributeSettings)||void 0===a?void 0:a.isLinkedAccountsEnabled(v))&&(null===ue.tZ||void 0===ue.tZ||null===(o=ue.tZ.attributeSettings)||void 0===o||null===(o=o.advancedAttributeSettings)||void 0===o?void 0:o.showValidateLinkedLocalAccount)&&N.createElement(Ee.Z.Row,{columns:1,"data-componentid":"application-edit-user-attributes--validate-linked-local-accounts"},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.CheckboxLegacy,{listen:function(e){te(e)},disabled:ie,ariaLabel:"Validate linked local account",name:"validateLinkedLocalAccount",label:M("applications:forms.advancedAttributeSettings.sections.linkedAccounts.fields.validateLocalAccount.label"),required:!1,value:ee?["useMappedLocalSubject"]:[],readOnly:O,"data-testid":"".concat(k,"-validate-linked-local-account-checkbox"),hint:M("applications:forms.advancedAttributeSettings.sections.linkedAccounts.fields.validateLocalAccount.hint")}))),null!==ue.tZ&&void 0!==ue.tZ&&null!==(r=ue.tZ.attributeSettings)&&void 0!==r&&null!==(r=r.advancedAttributeSettings)&&void 0!==r&&r.isLinkedAccountsEnabled(v)&&null!==ue.tZ&&void 0!==ue.tZ&&null!==(l=ue.tZ.attributeSettings)&&void 0!==l&&null!==(l=l.advancedAttributeSettings)&&void 0!==l&&l.isMandateLinkedLocalAccountEnabled(v)?N.createElement("div",{className:"ml-3"},N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.CheckboxLegacy,{listen:function(e){ae(e)},disabled:!ee,ariaLabel:"Mandate linked local account",name:"mandateLinkedLocalAccount",label:M("applications:forms.advancedAttributeSettings.sections.linkedAccounts.fields.mandateLocalAccount.label"),required:!1,value:ie?["mappedLocalSubjectMandatory"]:[],readOnly:O,"data-testid":"".concat(k,"-mandate-linked-local-account-checkbox"),hint:Tt.y.isAppVersionAllowed(j,Qe.jo.APP_VERSION_3)?M("applications:forms.advancedAttributeSettings.sections.linkedAccounts.fields.mandateLocalAccount.unifiedHint"):M("applications:forms.advancedAttributeSettings.sections.linkedAccounts.fields.mandateLocalAccount.hint")})))):null,(null===ue.tZ||void 0===ue.tZ||null===(c=ue.tZ.attributeSettings)||void 0===c||null===(c=c.advancedAttributeSettings)||void 0===c?void 0:c.showRoleAttribute)&&(null==x||null===(s=x.legacyMode)||void 0===s?void 0:s.roleMapping)&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(ge.Z,null),N.createElement(R.X6,{as:"h4"},M("applications:forms.advancedAttributeSettings.sections.role.heading")))),(null===ue.tZ||void 0===ue.tZ||null===(u=ue.tZ.attributeSettings)||void 0===u||null===(u=u.advancedAttributeSettings)||void 0===u?void 0:u.showRoleAttribute)&&(null==x||null===(d=x.legacyMode)||void 0===d?void 0:d.roleMapping)&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.Dropdown,{ariaLabel:"Role attribute",name:"roleAttribute",label:M("applications:forms.advancedAttributeSettings.sections.role.fields.roleAttribute.label"),required:I,value:null==C||null===(p=C.claim)||void 0===p?void 0:p.uri,options:h,readOnly:O,"data-testid":"".concat(k,"-role-attribute-dropdown"),hint:M("applications:forms.advancedAttributeSettings.sections.role.fields.roleAttribute.hint")}))),(null===ue.tZ||void 0===ue.tZ||null===(m=ue.tZ.attributeSettings)||void 0===m||null===(m=m.advancedAttributeSettings)||void 0===m?void 0:m.showIncludeUserstoreDomainRole)&&(null==x||null===(f=x.legacyMode)||void 0===f?void 0:f.roleMapping)&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Role",name:"role",label:M("applications:forms.advancedAttributeSettings.sections.role.fields.role.label"),required:!1,value:null!=C&&C.includeUserDomain?["includeUserDomain"]:[],readOnly:O,"data-testid":"".concat(k,"-role-checkbox"),hint:M("applications:forms.advancedAttributeSettings.sections.role.fields.role.hint")})))))):null};jt.defaultProps={"data-componentid":"application-advanced-attribute-settings-form"};var Dt=n(12252),kt=n(95865),Mt=n(70104);function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xt.apply(null,arguments)}function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Vt=[Mt.QN.GROUPS_CLAIM_NAME,Mt.QN.ROLES_CLAIM_NAME,Mt.QN.APPLICATION_ROLES_CLAIM_NAME,Mt.QN.GROUPS_CLAIM_URI,Mt.QN.ROLES_CLAIM_URI,Mt.QN.APPLICATION_ROLES_CLAIM_URI],zt=function(e){var t=e.claimURI,n=e.displayName,i=e.localClaimDisplayName,a=e.localDialect,o=e.updateMapping,r=e.addToMapping,l=e.selectMandatory,c=e.selectRequested,s=e.isDefaultMappingChanged,u=e.mapping,d=e.initialMandatory,p=e.initialRequested,m=e.claimMappingOn,f=e.claimMappingError,v=e.readOnly,g=e.deleteAttribute,h=e.subject,b=e.label,E=e.isOIDCMapping,y=e.duplicatedMappingValues,A=e.onlyOIDCConfigured,S=e["data-testid"],C=(0,P.$)().t,I=Ht((0,N.useState)(!1),2),O=I[0],w=I[1],T=Ht((0,N.useState)(!1),2),L=T[0],Z=T[1],U=Ht((0,N.useState)(!1),2),j=U[0],k=U[1],M=Ht((0,N.useState)(!0),2),x=M[0],H=M[1],F=Ht((0,N.useState)(t),2),V=F[0],z=F[1],G=Ht((0,N.useState)(V),1)[0],W="http://wso2.org/claims";(0,N.useEffect)((function(){k(d)}),[d]),(0,N.useEffect)((function(){H(p)}),[p]),(0,N.useEffect)((function(){(0,_.Z)(null==u?void 0:u.applicationClaim)&&(0,_.Z)(u)&&Z(f)}),[f]),(0,N.useEffect)((function(){w(m),z(t),u&&(r(t,m),null!=u&&u.applicationClaim?(z(null==u?void 0:u.applicationClaim),o(t,null==u?void 0:u.applicationClaim),s(!0)):o(t,G))}),[m]);var q=function(){return!(!t||!Vt.includes(t))||(A?h&&j||v||E:h||v||E)};return N.createElement(ot.Z.Row,{"data-testid":S},!a&&N.createElement(ot.Z.Cell,null),N.createElement(ot.Z.Cell,null,N.createElement("div",null,a?n:i),E?N.createElement(R.kW,{warning:!0,popup:!0},C("applications:edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMappingHint")):"",N.createElement(R.GI,{content:E&&t.startsWith(W)?C("applications:edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMapping"):t,inverted:!0,trigger:a?N.createElement(R.EK,{compact:!0,withBackground:!1},E&&t.startsWith(W)?C("applications:edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMapping"):t):N.createElement(R.EK,null,E&&t.startsWith(W)?C("applications:edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMapping"):t),position:"bottom left"}),N.createElement(R.kW,{warning:!0,hidden:!b},b)),a&&O&&N.createElement(N.Fragment,null,N.createElement(ot.Z.Cell,{error:L},N.createElement(rt.Z,{placeholder:C("applications:edit.sections.attributes.selection.mappingTable.listItem.fields.claim.placeholder",{name:n}),value:O?V:G,onChange:!v&&function(e){var n,i=null===(n=e.target)||void 0===n?void 0:n.value.replace(/[^\w+$:/.]/g,"");z(i),o(t,i,!0),Z((0,_.Z)(i)),f&&!(0,_.Z)(i)&&Z(!1),s(!0)},disabled:!O,readOnly:v,required:!0,error:L||y.includes(V)||y.includes(G)}))),!a&&N.createElement(ot.Z.Cell,xt({},a&&!O&&{textAlign:"center"},a&&O&&{textAlign:"center"},!a&&{textAlign:"center"}),N.createElement(Rt.Z,{checked:p||x||h,onClick:v||h?function(){return null}:function(){a||(x?(c(t,!1),H(!1),l(t,!1),k(!1)):(H(!0),c(t,!0)))},disabled:!!O&&!j,readOnly:h||v||E})),N.createElement(ot.Z.Cell,xt({},a&&!O&&{textAlign:"center"},a&&O&&{textAlign:"center"},!a&&{textAlign:"center"}),N.createElement(Rt.Z,{checked:d||j||h&&!A,onClick:q()?function(){return null}:function(){a?j?(l(t,!1),k(!1)):(k(!0),l(t,!0)):j?(l(t,!1),k(!1)):(k(!0),l(t,!0),H(!0),c(t,!0))},disabled:!!O&&!x,readOnly:q()})),v&&!E||!g?null:N.createElement(ot.Z.Cell,{textAlign:"right"},N.createElement(R.GI,{trigger:N.createElement(D.Z,{link:!0,className:"list-icon pr-4",size:"large",color:"grey",name:"trash alternate",onClick:g}),position:"top right",content:C("common:remove"),inverted:!0})))};function Gt(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||qt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){if(e){if("string"==typeof e)return Qt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(e,t):void 0}}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Bt=function(e){var t=e.selectedClaims,n=e.showAddModal,i=e.setShowAddModal,a=e.availableClaims,o=e.setAvailableClaims,r=e.setInitialSelectedClaims,l=e.updateMappings,c=e["data-testid"],s=(0,P.$)().t,u=Wt((0,N.useState)([]),2),d=u[0],p=u[1],m=Wt((0,N.useState)([]),2),f=m[0],v=m[1],g=Wt((0,N.useState)([]),2),h=g[0],b=g[1],E=Wt((0,N.useState)(!1),2),y=E[0],A=E[1];(0,N.useEffect)((function(){v(y?h:[])}),[y]),(0,N.useEffect)((function(){if(n){if(t.length>0){var e=(0,dt.Z)((0,pt.Z)(t,a),"displayName");p(e),b(e)}else{var i=(0,dt.Z)(a,"displayName");p(i),b(i)}v(t)}else p([]),b([]),v([])}),[n]);return N.createElement(mt.Z,{open:n,size:"large",className:"user-roles attribute-modal","data-testid":c},N.createElement(mt.Z.Header,null,s("applications:edit.sections.attributes.selection.addWizard.header"),N.createElement(R.X6,{subHeading:!0,ellipsis:!0,as:"h6"},s("applications:edit.sections.attributes.selection.addWizard.subHeading"))),N.createElement(mt.Z.Content,{image:!0},N.createElement(R.IX,{selectionComponent:!0,searchPlaceholder:s("applications:edit.sections.attributes.selection.addWizard.steps.select.transfer.searchPlaceholders.attribute"),handleHeaderCheckboxChange:function(){A(!y)},isHeaderCheckboxChecked:y,handleUnelectedListSearch:function(e){var n=e.target.value;if(n.length>0){var i=d.filter((function(e){return-1!==e.displayName.toLowerCase().indexOf(n.toLowerCase())})),o=d.filter((function(e){return-1!==e.claimURI.toLowerCase().indexOf(n.toLowerCase())}));b((0,dt.Z)((0,pt.Z)(i,o),"displayName"))}else t.length>0?b((0,dt.Z)((0,pt.Z)(t,a),"displayName")):b((0,dt.Z)(d,"displayName"))},"data-testid":"".concat(c,"-transfer-component")},N.createElement(R.Jv,{selectionComponent:!0,isListEmpty:!(h.length>0),listType:"unselected","data-testid":"".concat(c,"-unselected-transfer-list"),emptyPlaceholderDefaultContent:s("transferList:list.emptyPlaceholders.default")},null==h?void 0:h.map((function(e,t){return N.createElement(R.qT,{handleItemChange:function(){return function(e){var t=Gt(f);null!=t&&t.includes(e)?(t.splice(t.indexOf(e),1),v(t)):(e.requested=!0,t.push(e),v(t))}(e)},key:e.claimURI,listItem:e.displayName,listItemId:e.id,listItemIndex:e.claimURI,isItemChecked:f.includes(e),showSecondaryActions:!1,showListSubItem:!0,listSubItem:N.createElement(R.EK,{compact:!0,withBackground:!1},e.claimURI),"data-testid":"".concat(c,"-unselected-transfer-list-item-").concat(t)})}))))),N.createElement(mt.Z.Actions,null,N.createElement(R.Qj,{onClick:function(){i(!1)},"data-testid":"".concat(c,"-cancel-button")},s("common:cancel")),N.createElement(R.KM,{onClick:function(){var e=Gt(f),n=t.filter((function(t){return!(null!=e&&e.includes(t))})),a=e.filter((function(e){return!(null!=t&&t.includes(e))}));l(a,n),r(e),o(Gt(d)),i(!1)},"data-testid":"".concat(c,"-save-button")},s("common:save"))))};function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){Xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=$t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=$t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$t(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){return function(e){if(Array.isArray(e))return nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||tn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){if(e){if("string"==typeof e)return nn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Bt.defaultProps={"data-testid":"application-attribute-selection-wizard"};var an=function(e){var t=e.claims,n=e.setClaims,i=e.externalClaims,a=e.selectedClaims,o=e.setExternalClaims,r=e.selectedExternalClaims,l=e.setSelectedClaims,c=e.setSelectedExternalClaims,s=e.selectedDialect,u=e.selectedSubjectValue,d=e.setClaimMapping,p=e.createMapping,m=e.removeMapping,f=e.getCurrentMapping,v=e.updateClaimMapping,g=e.addToClaimMapping,E=e.claimConfigurations,y=e.claimMappingOn,A=e.defaultSubjectAttribute,S=e.showClaimMappingRevertConfirmation,C=e.setClaimMappingOn,I=e.claimMappingError,O=e.readOnly,w=e.updateMappings,T=e.isUserAttributesLoading,L=e.setUserAttributesLoading,_=e.onlyOIDCConfigured,j=e.duplicatedMappingValues,k=e["data-testid"],M=(0,P.$)().t,x=(0,R.fQ)().getLink,H=en((0,N.useState)([]),2),F=H[0],V=H[1],z=en((0,N.useState)([]),2),G=z[0],W=z[1],q=en((0,N.useState)(!1),2),Q=q[0],B=q[1],$=en((0,N.useState)([]),2),K=$[0],Y=$[1],X=en((0,N.useState)([]),2),J=X[0],ee=X[1],te=en((0,N.useState)(!1),2),ne=te[0],ie=te[1],ae=en((0,N.useState)(!1),2),oe=ae[0],re=ae[1],le=en((0,N.useState)(!1),2),ce=le[0],de=le[1],pe=en((0,N.useState)(),2),me=pe[0],fe=pe[1],ve=(0,N.useRef)(!1),ge=se.l.getInstance(),he=(0,U.v9)((function(e){return e.config})),be=en((0,N.useState)(i),1)[0];(0,N.useEffect)((function(){var e,t=Jt(J);null==E||null===(e=E.claimMappings)||void 0===e||e.map((function(e){if(!J.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}))){var n=G.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}));n&&t.push(n)}})),c(t),ee(t)}),[E]),(0,N.useEffect)((function(){ne&&E&&(s.localDialect&&(F.length>0||a.length>0)&&L(!1),!s.localDialect&&(G.length>0||r.length>0)&&L(!1))}),[F,G,E,ne]);var ye=function(e,t){if(s.localDialect){var n=Jt(a);n.forEach((function(n){n.claimURI===e&&(n.mandatory=t)})),l(n)}else{var i=Jt(r);i.forEach((function(n){n.claimURI===e&&(n.mandatory=t)})),c(i)}},Ae=function(e,t){if(s.localDialect){var n=Jt(a);n.forEach((function(n){n.claimURI===e&&(n.requested=t)})),l(n)}},Se=function(){var e,t=[];"CUSTOM"===(null==E?void 0:E.dialect)?null===(e=E.claimMappings)||void 0===e||e.map((function(e){t.push(e.localClaim.uri)})):"LOCAL"===(null==E?void 0:E.dialect)&&E.requestedClaims.map((function(e){t.push(e.claim.uri)}));return t},Ce=function(e){var t;if("CUSTOM"===E.dialect){var n,i=null===(n=E.claimMappings.find((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.uri)===e})))||void 0===n?void 0:n.applicationClaim;if(i){var a=E.requestedClaims.find((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===i}));if(a)return a.mandatory}}return null===(t=E.requestedClaims.find((function(t){var n;return(null==t||null===(n=t.claim)||void 0===n?void 0:n.uri)===e})))||void 0===t?void 0:t.mandatory},Ie=function(e){if("CUSTOM"===E.dialect){var t,n=null===(t=E.claimMappings.find((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.uri)===e})))||void 0===t?void 0:t.applicationClaim;return!!(n?E.requestedClaims.find((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===n})):E.requestedClaims.find((function(t){var n;return(null==t||null===(n=t.claim)||void 0===n?void 0:n.uri)===e})))}return!0},Oe=function(){var e,t;return(null==E||null===(e=E.subject)||void 0===e||null===(e=e.claim)||void 0===e?void 0:e.uri)===A&&(null===(t=E.requestedClaims)||void 0===t?void 0:t.findIndex((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===A})))<0},Re=function(){ge.publish("application-user-attribute-click-add"),re(!0)};(0,N.useEffect)((function(){t&&V(Jt(t)),i&&W(Jt(i))}),[t,i]),(0,N.useEffect)((function(){a&&Y(Jt(a)),r&&ee(Jt(r))}),[a,r]),(0,N.useEffect)((function(){ve.current||(ie(!1),function(){if(L(!0),s.localDialect){var e=Se(),a=[],r=[];if(t.map((function(t){if(!e.includes(t.claimURI)||t.claimURI===A&&Oe())r.push(t);else{var n=Yt(Yt({},t),{},{mandatory:Ce(t.claimURI),requested:Ie(t.claimURI)});a.push(n)}})),l(a),n(r),V(r),"CUSTOM"===(null==E?void 0:E.dialect)){var u=[];E.claimMappings.map((function(e){if(e&&e.localClaim&&(e.localClaim.uri!==A||!Oe())){var t={addMapping:!0,applicationClaim:e.applicationClaim,localClaim:{displayName:e.localClaim.displayName,id:e.localClaim.id,uri:e.localClaim.uri}};u.push(t)}})),d(u)}else{var p=[];a.map((function(e){var t={addMapping:!1,applicationClaim:"",localClaim:{displayName:e.displayName,id:e.id,uri:e.claimURI}};p.push(t)})),d(p)}ie(!0)}else{var m,f=Se(),v=[],g=[];i.map((function(e){if(f.includes(e.mappedLocalClaimURI)){var t=Yt(Yt({},e),{},{mandatory:Ce(e.mappedLocalClaimURI),requested:!0});v.push(t)}else g.push(e)}));var h=Jt(J);null==E||null===(m=E.claimMappings)||void 0===m||m.map((function(e){null==t||t.map((function(t){if(e.localClaim.uri===t.claimURI){var n={claimDialectURI:t.dialectURI,claimURI:t.claimURI,id:t.id,localClaimDisplayName:t.displayName,mandatory:t.mandatory,mappedLocalClaimURI:e.localClaim.uri,requested:t.requested};v.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}))||v.push(n)}}))})),ee(h),c(v),o(g),W(g),ie(!0)}}(),ve.current=!0)}),[E]);var we,Te,Le=function(e){if(s.localDialect){var u=a.find((function(t){return t.claimURI===e}));l(a.filter((function(t){return t.claimURI!==e}))),t.find((function(t){return t.claimURI===e}))||n([u].concat(Jt(t))),y&&m(e)}else{var d=r.find((function(t){return t.mappedLocalClaimURI===e}));c(r.filter((function(t){return t.mappedLocalClaimURI!==e}))),ee(J.filter((function(t){return t.mappedLocalClaimURI!==e})));var p=i.find((function(t){return t.mappedLocalClaimURI===e}));p||o([d].concat(Jt(i)))}},_e=function(e){fe(e),u===Ne(e)&&A!==e?de(!0):Le(e)},Ne=function(e){if(y){var t=f(e);return void 0!==t?t.applicationClaim:e}return e},Pe=function(e){var t=!1;return null==be||be.map((function(n){n.mappedLocalClaimURI!==e.mappedLocalClaimURI&&e.mappedLocalClaimURI!==A||(t=!0)})),t};return!T&&E&&ne?N.createElement(N.Fragment,null,N.createElement(Ee.Z.Row,{"data-testid":k},N.createElement(Ee.Z.Column,{computer:16,tablet:16,largeScreen:12,widescreen:12},N.createElement(R.X6,{as:"h4"},M("applications:edit.sections.attributes.selection.heading")),N.createElement(R.X6,{as:"h6",color:"grey"},M("applications:edit.sections.attributes.selection.description"),(Te=void 0,Te=s.localDialect?x("develop.applications.editApplication.samlApplication.attributes.learnMore"):x("develop.applications.editApplication.oidcApplication.attributes.learnMore"),N.createElement(R.eb,{link:Te},M("common:learnMore")))),a.length>0||r.length>0?N.createElement(N.Fragment,null,N.createElement(Ee.Z.Row,{className:"user-role-edit-header-segment clearing attributes"},N.createElement(ot.Z,{"data-testid":"".concat(k,"-action-bar"),basic:"very",compact:!0},N.createElement(ot.Z.Body,null,N.createElement(ot.Z.Row,null,N.createElement(ot.Z.Cell,{collapsing:!0,width:"6"},N.createElement(rt.Z,{icon:N.createElement(D.Z,{name:"search"}),iconPosition:"left",onChange:function(e){var t=e.target.value;t.length>0?function(e){if(s.localDialect){var t=a.filter((function(t){return-1!==t.displayName.toLowerCase().indexOf(e.toLowerCase())})),n=a.filter((function(t){return-1!==t.claimURI.toLowerCase().indexOf(e.toLowerCase())}));Y((0,dt.Z)((0,pt.Z)(t,n),"displayName"))}else{var i=r.filter((function(t){return-1!==t.localClaimDisplayName.toLowerCase().indexOf(e.toLowerCase())})),o=r.filter((function(t){return-1!==t.claimURI.toLowerCase().indexOf(e.toLowerCase())}));ee((0,dt.Z)((0,pt.Z)(i,o),"localClaimDisplayName"))}}(t):s.localDialect?Y(a):ee(r)},placeholder:M("applications:edit.sections.attributes.selection.mappingTable.searchPlaceholder"),floated:"left",size:"small","data-testid":"".concat(k,"-search")})),s.localDialect&&N.createElement(ot.Z.Cell,{textAlign:"right"},N.createElement(Rt.Z,{toggle:!0,checked:y,onChange:function(){y?Q?S(!0):C(!1):C(!0)},label:M("applications:edit.sections.attributes.selection.mappingTable.actions.enable"),readOnly:O,"data-testid":"".concat(k,"-cliam-mapping-toggle")})),!O&&N.createElement(ot.Z.Cell,{textAlign:"right"},N.createElement(lt.Z,{size:"medium",icon:"pencil",floated:"right",onClick:Re,"data-testid":"".concat(k,"-update-button")})))))),j.length>0&&N.createElement(R.v0,{type:"error",content:M("applications:notifications.updateClaimConfig.error.description")}),N.createElement(ct.Z,{className:"user-role-edit-header-segment attributes"},N.createElement(Ee.Z.Row,null,s.localDialect?N.createElement(ot.Z,{singleLine:!0,compact:!0,"data-testid":"".concat(k,"-list"),fixed:!0},N.createElement(ot.Z.Header,null,y?N.createElement(ot.Z.Row,null,N.createElement(ot.Z.HeaderCell,{width:"8"},N.createElement("strong",null,M("applications:edit.sections.attributes.selection.mappingTable.columns.attribute"))),N.createElement(ot.Z.HeaderCell,{width:"8"},N.createElement("strong",null,M("applications:edit.sections.attributes.selection.mappingTable.columns.appAttribute")),N.createElement(R.kW,{icon:"info circle",popup:!0},M("applications:edit.sections.attributes.selection.mappingTable.mappedAtributeHint"))),N.createElement(ot.Z.HeaderCell,{width:"4",textAlign:"center"},N.createElement("strong",null,M("applications:edit.sections.attributes.selection.mappingTable.columns.mandatory")),N.createElement(R.kW,{icon:"info circle",popup:!0},M("applications:edit.sections.attributes.selection.mandatoryAttributeHint",{productName:he.ui.productName}))),N.createElement(ot.Z.HeaderCell,{width:"2"})):N.createElement(ot.Z.Row,null,N.createElement(ot.Z.HeaderCell,{width:"10"},N.createElement("strong",null,M("applications:edit.sections.attributes.selection.mappingTable.columns.attribute"))),N.createElement(ot.Z.HeaderCell,{width:"8",textAlign:"center"},N.createElement("strong",null,M("applications:edit.sections.attributes.selection.mappingTable.columns.mandatory")),N.createElement(R.kW,{icon:"info circle",popup:!0},M("applications:edit.sections.attributes.selection.mandatoryAttributeHint",{productName:he.ui.productName}))),N.createElement(ot.Z.HeaderCell,{width:"2"}))),N.createElement(ot.Z.Body,null,null==K?void 0:K.map((function(e){return N.createElement(zt,{key:e.id,claimURI:e.claimURI,displayName:e.displayName,mappedURI:e.claimURI,localDialect:s.localDialect,updateMapping:v,addToMapping:g,mapping:f(e.claimURI),isDefaultMappingChanged:B,initialMandatory:u===Ne(e.claimURI)||e.mandatory,initialRequested:e.requested,selectMandatory:ye,selectRequested:Ae,claimMappingOn:y,claimMappingError:I,readOnly:O,subject:u===Ne(e.claimURI),deleteAttribute:function(){_e(e.claimURI)},duplicatedMappingValues:j,"data-testid":e.claimURI})})))):N.createElement(ot.Z,{singleLine:!0,compact:!0,"data-testid":"".concat(k,"-list"),fixed:!0},N.createElement(ot.Z.Header,null,N.createElement(ot.Z.Row,null,N.createElement(ot.Z.HeaderCell,{width:"10"},N.createElement("strong",null,M("applications:edit.sections.attributes.selection.mappingTable.columns.attribute"))),N.createElement(ot.Z.HeaderCell,{textAlign:"center",width:"8"},N.createElement("strong",null,M("applications:edit.sections.attributes.selection.mappingTable.columns.mandatory")),N.createElement(R.kW,{icon:"info circle",popup:!0},M("applications:edit.sections.attributes.selection.mandatoryAttributeHint",{productName:he.ui.productName}))),N.createElement(ot.Z.HeaderCell,{width:"2"}))),N.createElement(ot.Z.Body,null,null==J?void 0:J.map((function(e){return N.createElement(zt,{key:e.id,claimURI:e.claimURI,displayName:e.claimURI,mappedURI:e.mappedLocalClaimURI,localDialect:s.localDialect,initialMandatory:u===e.mappedLocalClaimURI&&!_||e.mandatory,selectMandatory:ye,initialRequested:e.requested,"data-testid":e.claimURI,readOnly:u===e.mappedLocalClaimURI&&!_||!Pe(e)||O,localClaimDisplayName:e.localClaimDisplayName,deleteAttribute:function(){return _e(e.mappedLocalClaimURI)},subject:u===e.mappedLocalClaimURI&&!_,isOIDCMapping:!Pe(e)})}))))))):N.createElement(ct.Z,null,N.createElement(R.$J,{title:ue.tZ.attributeSettings.attributeSelection.showAttributePlaceholderTitle&&M("applications:placeholders.emptyAttributesList.title"),subtitle:[M("applications:placeholders.emptyAttributesList.subtitles")],action:!O&&N.createElement(R.KM,{basic:!0,onClick:Re},N.createElement(D.Z,{name:"plus"}),M("applications:placeholders.emptyAttributesList.action")),image:(0,We.jF)().emptyList,imageSize:"tiny","data-testid":"".concat(k,"-empty-placeholder")})),!O&&ue.tZ.attributeSettings.attributeSelection.showShareAttributesHint(s)?N.createElement(R.kW,null,N.createElement(Z.c,{i18nKey:"applications:edit.sections.attributes.selection.attributeComponentHint"},"Manage the user attributes you want to share with this application via",N.createElement(R.rU,{external:!1,onClick:function(){b.m.push(h.$.getPaths().get("OIDC_SCOPES"))}}," OpenID Connect Scopes."),"You can map additional attributes under",N.createElement(R.rU,{external:!1,onClick:function(){b.m.push(h.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",Dt.QN.OIDC))}}," Attribute."))):N.createElement(R.kW,null,N.createElement(Z.c,{i18nKey:"applications:edit.sections.attributes.selection.attributeComponentHintAlt"},"Manage the user attributes you want to share with this application. You can add new attributes and mappings by navigating to",N.createElement(R.rU,{external:!1,onClick:function(){b.m.push(h.$.getPaths().get("LOCAL_CLAIMS"))}}," Attribute."))))),s.localDialect?N.createElement(Bt,{selectedClaims:a,setSelectedClaims:Y,setInitialSelectedClaims:l,showAddModal:oe,setShowAddModal:re,availableClaims:t,setAvailableClaims:n,createMapping:p,removeMapping:m,updateMappings:w,"data-testid":"".concat(k,"-wizard")}):N.createElement(kt.K,{selectedExternalClaims:r,setSelectedExternalClaims:ee,setInitialSelectedExternalClaims:c,showAddModal:oe,setShowAddModal:re,availableExternalClaims:i,setAvailableExternalClaims:o,"data-testid":"".concat(k,"-wizard-other-dialects")}),(we=t.find((function(e){return e.claimURI===A})),N.createElement(R.cV,{onClose:function(){return de(!1)},type:"negative",open:ce,primaryAction:M("common:confirm"),secondaryAction:M("common:cancel"),onSecondaryActionClick:function(){de(!1)},onPrimaryActionClick:function(){Le(me),de(!1)},"data-testid":"".concat(k,"-delete-confirmation-modal"),closeOnDimmerClick:!1},N.createElement(R.cV.Header,{"data-testid":"".concat(k,"-delete-confirmation-modal-header")},M("applications:confirmations.removeApplicationUserAttribute.header")),N.createElement(R.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(k,"-delete-confirmation-modal-message")},M("applications:confirmations.removeApplicationUserAttribute.subHeader")),N.createElement(R.cV.Content,{"data-testid":"".concat(k,"-delete-confirmation-modal-content")},N.createElement(Z.c,{i18nKey:"applications:confirmations.removeApplicationUserAttribute.content",i18nOptions:{default:null==we?void 0:we.displayName}},"If you remove this, the subject attribute will be set to the ",N.createElement("strong",null,null==we?void 0:we.displayName)))))):null};an.defaultProps={"data-testid":"application-attribute-selection"};var on=n(12638);function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){sn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=rn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=rn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e){return function(e){if(Array.isArray(e))return mn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||pn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){if(e){if("string"==typeof e)return mn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var fn=function(e){var t=e.claims,n=e.externalClaims,i=e.externalClaimsGroupedByScopes,a=e.setExternalClaimsGroupedByScopes,o=e.setExternalClaims,r=e.unfilteredExternalClaimsGroupedByScopes,l=e.setUnfilteredExternalClaimsGroupedByScopes,c=e.selectedExternalClaims,s=e.selectedDialect,u=e.setSelectedExternalClaims,d=e.selectedSubjectValue,p=e.claimConfigurations,m=e.defaultSubjectAttribute,f=e.readOnly,v=e.isUserAttributesLoading,g=e.setUserAttributesLoading,E=e.onlyOIDCConfigured,y=e.appVersion,A=e["data-testid"],C=e["data-componentid"],I=(0,P.$)().t,O=(0,R.fQ)().getLink,w="openid",T=dn((0,N.useState)([]),2),L=T[0],_=T[1],j=dn((0,N.useState)([]),2),k=j[0],M=j[1],x=dn((0,N.useState)([]),2),H=x[0],F=x[1],V=dn((0,N.useState)(""),2),z=V[0],G=V[1],W=dn((0,N.useState)(!1),2),q=W[0],Q=W[1],B=(0,N.useRef)(!1),$=(0,U.v9)((function(e){return e.config})),K=dn((0,N.useState)(n),1)[0],Y=dn((0,N.useState)([w]),2),X=Y[0],J=Y[1],ee=(0,U.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t?void 0:t.applications}));(0,N.useEffect)((function(){var e,t=un(k);null==p||null===(e=p.claimMappings)||void 0===e||e.map((function(e){if(!k.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}))){var n=L.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}));n&&t.push(n)}})),u(t),M(t)}),[p]),(0,N.useEffect)((function(){if(0!=r.length){var e=[w];r.map((function(t){t.selected&&""!==t.name&&e.push(t.name)})),J(e)}}),[r]),(0,N.useEffect)((function(){q&&p&&(L.length>0||c.length>0)&&g(!1)}),[L,p,q]),(0,N.useEffect)((function(){n&&_(un(n))}),[n]),(0,N.useEffect)((function(){c&&M(un(c))}),[c]),(0,N.useEffect)((function(){B.current||(Q(!1),le(),B.current=!0)}),[p]);var te,ne=function(e,t){var n=un(r);n.forEach((function(n){n.claims.forEach((function(n){n.claimURI===e&&(n.mandatory=t)}))})),a(n),l(n),re(z)},ie=function(e,t){var n=un(r);n.forEach((function(n){var i=!1;n.claims.forEach((function(n){n.claimURI===e&&(n.requested=t),n.requested&&(i=!0)})),n.selected=i})),a(n),l(n),re(z)},ae=function(e,t){var n;null===(n=un(r).find((function(e){if(e.name===t.value)return e.selected=t.checked,e})))||void 0===n||n.claims.map((function(e){ie(e.claimURI,t.checked),t.checked||ne(e.claimURI,t.checked)}))},oe=function(e){var t;if("CUSTOM"===p.dialect){var n,i=null===(n=p.claimMappings.find((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.uri)===e})))||void 0===n?void 0:n.applicationClaim;if(i){var a=p.requestedClaims.find((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===i}));if(a)return a.mandatory}}return null===(t=p.requestedClaims.find((function(t){var n;return(null==t||null===(n=t.claim)||void 0===n?void 0:n.uri)===e})))||void 0===t?void 0:t.mandatory},re=function(e){if(""!==e){var t=r.filter((function(t){var n,i;return-1!==(null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(i=t.displayName)||void 0===i?void 0:i.toLowerCase().indexOf(e.toLowerCase()))})),n=un(r),i=[],o=[];n.forEach((function(n){var a=n.claims.filter((function(t){var n,i,a,o;return-1!==(null===(n=t.claimURI)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(i=t.claimDialectURI)||void 0===i?void 0:i.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(a=t.localClaimDisplayName)||void 0===a?void 0:a.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(o=t.mappedLocalClaimURI)||void 0===o?void 0:o.toLowerCase().indexOf(e.toLowerCase()))}));if(void 0!==a&&0!==a.length){i.includes(n.name)||i.push(n.name);var r=cn(cn({},n),{},{claims:a});o.push(r)}t.map((function(e){e.name===n.name&&0===a.length&&o.push(n)}))})),a(o),F(i)}},le=function(){var e;g(!0);var i,a,r=(a=[],"CUSTOM"===(null==p?void 0:p.dialect)?null===(i=p.claimMappings)||void 0===i||i.map((function(e){a.push(e.localClaim.uri)})):"LOCAL"===(null==p?void 0:p.dialect)&&p.requestedClaims.map((function(e){a.push(e.claim.uri)})),a),l=[],c=[];n.map((function(e){if(r.includes(e.mappedLocalClaimURI)){var t=cn(cn({},e),{},{mandatory:oe(e.mappedLocalClaimURI),requested:!0});l.push(t)}else c.push(e)}));var s=un(k);null==p||null===(e=p.claimMappings)||void 0===e||e.map((function(e){null==t||t.map((function(t){if(e.localClaim.uri===t.claimURI){var n={claimDialectURI:t.dialectURI,claimURI:t.claimURI,id:t.id,localClaimDisplayName:t.displayName,mandatory:t.mandatory,mappedLocalClaimURI:t.claimURI,requested:t.requested};l.find((function(t){var n;return(null==t?void 0:t.mappedLocalClaimURI)===(null==e||null===(n=e.localClaim)||void 0===n?void 0:n.uri)}))||l.push(n)}}))})),M(s),u(l),_(c),o(c.concat(l)),Q(!0)},ce=function(e){var t=!1;return null==K||K.map((function(n){n.mappedLocalClaimURI!==e.mappedLocalClaimURI&&e.mappedLocalClaimURI!==m||(t=!0)})),t},se=function(e){return e.claims.map((function(e){return e.mappedLocalClaimURI})).includes(d)&&d!==m},ue=function(e){var t=e.claims.find((function(e){return e.mappedLocalClaimURI==d})).localClaimDisplayName;return t.charAt(0).toUpperCase()+t.slice(1)},de=function(e){var t;return N.createElement(on.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(A,"-item-heading"),"data-componentId":"".concat(C,"-item-heading")},N.createElement(R.JT,{image:N.createElement(R.Xo,{name:e.displayName,size:"mini","data-testid":"".concat(A,"-item-image-inner"),"data-componentId":"".concat(C,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(A,"-item-image"),"data-componentId":"".concat(C,"-item-image")}),""===e.name?N.createElement(on.Z.Content,{className:"align-self-center"},N.createElement(R.kW,{warning:!0,popup:!0,compact:!0},I("applications:edit.sections.attributes.selection.scopelessAttributes.hint")),e.displayName,N.createElement(on.Z.Subheader,null," "+(null!==(t=e.description)&&void 0!==t?t:""))):N.createElement(on.Z.Content,{className:se(e)?"align-self-center":null},se(e)&&N.createElement(R.kW,{warning:!0,popup:!0,compact:!0},N.createElement(Z.c,{i18nKey:"applications:edit.sections.attributes.selection.subjectAttributeSelectedHint",tOptions:{subjectattribute:ue(e)}})),e.displayName,N.createElement(on.Z.Subheader,null,N.createElement(R.EK,{withBackground:!0},e.name))))},pe=function(e){return N.createElement(ot.Z,{singleLine:!0,compact:!0,"data-testid":"".concat(A,"-list"),"data-componentId":"".concat(C,"-list"),fixed:!0},N.createElement(ot.Z.Header,{className:"table-header-oidc-user-attribute"},N.createElement(ot.Z.Row,null,N.createElement(ot.Z.HeaderCell,{width:"1"}),N.createElement(ot.Z.HeaderCell,{width:"10"},I("applications:edit.sections.attributes.selection.mappingTable.columns.attribute")),N.createElement(ot.Z.HeaderCell,{textAlign:"center",width:"4"},I("applications:edit.sections.attributes.selection.mappingTable.columns.requested")),N.createElement(ot.Z.HeaderCell,{width:"4"},I("applications:edit.sections.attributes.selection.mappingTable.columns.mandatory"),N.createElement(R.kW,{icon:"info circle",popup:!0},I("applications:edit.sections.attributes.selection.mandatoryAttributeHint",{productName:$.ui.productName}))))),N.createElement(ot.Z.Body,null,N.createElement(N.Fragment,null,e.map((function(e){return N.createElement(zt,{key:e.id,"data-testid":"".concat(A,"-").concat(e.claimURI),claimURI:e.claimURI,displayName:e.claimURI,mappedURI:e.mappedLocalClaimURI,localDialect:s.localDialect,initialMandatory:d===e.mappedLocalClaimURI&&!E||e.mandatory,selectMandatory:ne,selectRequested:ie,initialRequested:e.requested,readOnly:d===e.mappedLocalClaimURI&&!E||!ce(e)||f,localClaimDisplayName:e.localClaimDisplayName,subject:d===e.mappedLocalClaimURI&&d!==m,isOIDCMapping:!ce(e),onlyOIDCConfigured:E})})))))},me=function(e){var t=un(H);null!=H&&H.includes(e.name)?t=t.filter((function(t){return t!==e.name})):t.push(e.name),F(t)},fe=function(e){return[{checked:e.selected,defaultChecked:e.selected,disabled:se(e),onChange:ae,popoverText:e.selected?I("applications:edit.sections.attributes.selection.mappingTable.listItem.actions.removeScopeRequested"):I("applications:edit.sections.attributes.selection.mappingTable.listItem.actions.makeScopeRequested"),type:"checkbox popup",value:e.name}]};return!v&&p&&q?N.createElement(N.Fragment,null,N.createElement(Ee.Z.Row,{"data-testid":A,"data-componentid":C},N.createElement(Ee.Z.Column,{computer:16,tablet:16,largeScreen:12,widescreen:12},N.createElement(R.X6,{as:"h4"},I("applications:edit.sections.attributes.selection.heading")),N.createElement(R.X6,{as:"h6",color:"grey"},I("applications:edit.sections.attributes.selection.description"),(te=O("develop.applications.editApplication.oidcApplication.attributes.learnMore"),N.createElement(R.eb,{link:te},I("common:learnMore")))),N.createElement(N.Fragment,null,N.createElement(Ee.Z.Row,{className:"user-role-edit-header-segment clearing attributes"},N.createElement(ot.Z,{"data-testid":"".concat(A,"-action-bar"),"data-componentid":"".concat(C,"-action-bar"),basic:"very",compact:!0},N.createElement(ot.Z.Body,null,N.createElement(ot.Z.Row,null,N.createElement(ot.Z.Cell,{collapsing:!0,width:"16"},N.createElement(rt.Z,{icon:N.createElement(D.Z,{name:"search"}),iconPosition:"left",onChange:function(e){var t=e.target.value;G(t),t.length>0?re(t):(F([]),a(r))},placeholder:I("applications:edit.sections.attributes.selection.mappingTable.searchPlaceholder"),floated:"left",size:"small","data-testid":"".concat(A,"-search"),"data-componentid":"".concat(C,"-search")})),N.createElement(ot.Z.Cell,{textAlign:"right"}))))),(0,S.cr)(ee,"applications.accessTokenAttributes")&&Tt.y.isAppVersionAllowed(y,Qe.jo.APP_VERSION_2)&&N.createElement(R.v0,{type:"info",content:N.createElement(Z.c,{i18nKey:I("applications:edit.sections.attributes.selection.note")},"Please note that the user attributes added from this section will only be included in the ID token.")}),N.createElement(Ee.Z.Row,{className:"mb-5"},0!==i.length?N.createElement(R.el,{fluid:!0,"data-testid":"".concat(A,"-oidc-scopes"),"data-componentid":"".concat(C,"-oidc-scopes"),viewType:"table-view"},i.map((function(e){if(""!==e.name)return N.createElement(N.Fragment,{key:e.name},N.createElement(R.el.Title,{id:e.name,"data-testid":"".concat(A,"-").concat(e.name,"-title"),"data-componentid":"".concat(C,"-").concat(e.name,"\n                                                                                    -title"),active:(null==H?void 0:H.includes(e.name))||!1,accordionIndex:e.name,onClick:function(){return me(e)},content:de(e),hideChevron:!1,actions:fe(e),disabled:f}),N.createElement(R.el.Content,{active:(null==H?void 0:H.includes(e.name))||!1,"data-testid":"".concat(A,"-").concat(e.name,"-content"),"data-componentid":"".concat(C,"-").concat(e.name,"\n                                                                                    -content"),children:pe(e.claims),disabled:f}))}))):N.createElement(R.$J,{image:(0,We.jF)().emptySearch,imageSize:"tiny",title:I("applications:edit.sections.attributes.emptySearchResults.title"),subtitle:[I("applications:edit.sections.attributes.emptySearchResults.subtitles.0",{searchQuery:z}),I("applications:edit.sections.attributes.emptySearchResults.subtitles.1")],"data-testid":"".concat(A,"-empty-search-placeholder")})),N.createElement(Ee.Z.Row,null,N.createElement(R.el,{fluid:!0,"data-testid":"".concat(A,"-oidc-scopes"),"data-componentid":"".concat(C,"-oidc-scopes"),viewType:"table-view"},i.map((function(e){if(""===e.name)return N.createElement(N.Fragment,{key:e.name},N.createElement(R.el.Title,{id:e.name,"data-testid":"".concat(A,"-").concat(e.name,"-title"),"data-componentid":"".concat(C,"-").concat(e.name,"\n                                                                    -title"),active:(null==H?void 0:H.includes(e.name))||!1,accordionIndex:e.name,onClick:function(){return me(e)},content:de(e),hideChevron:!1,actions:fe(e),disabled:f}),N.createElement(R.el.Content,{active:(null==H?void 0:H.includes(e.name))||!1,"data-testid":"".concat(A,"-").concat(e.name,"-content"),"data-componentid":"".concat(C,"-").concat(e.name,"\n                                                                    -content"),children:pe(e.claims),disabled:f}))}))))),N.createElement(R.kW,null,N.createElement(Z.c,{i18nKey:"applications:edit.sections.attributes.selection.attributeComponentHint"},"Use",N.createElement(R.rU,{external:!1,onClick:function(){b.m.push(h.$.getPaths().get("OIDC_SCOPES"))}}," OpenID Connect Scopes"),"to manage user attribute to a scope. You can add new attributes by navigating to",N.createElement(R.rU,{external:!1,onClick:function(){b.m.push(h.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",Dt.QN.OIDC))}},"Attributes."))))),N.createElement(Ee.Z.Row,{className:"mt-5"},N.createElement(Ee.Z.Column,null,N.createElement(Ee.Z.Row,null,N.createElement(be.Z,null,N.createElement(be.Z.Field,null,N.createElement("div",{className:"display-flex"},N.createElement(R.OR,{className:"copy-input spaced",value:X.join(" "),"data-componentid":"".concat(C,"-selected-scope-area")}))))))),N.createElement(R.kW,null,N.createElement(Z.c,{i18nKey:"applications:edit.sections.attributes.selection.selectedScopesComponentHint"},"Request these scopes from your application to retrieve the user attributes you selected."),O("develop.applications.editApplication.attributeManagement.manageOIDCScopes")&&N.createElement(R.eb,{link:O("develop.applications.editApplication.attributeManagement.manageOIDCScopes")},I("applications:edit.sections.attributes.selection.howToUseScopesHint")))):null};function vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}fn.defaultProps={"data-componentid":"application-attribute-selection-oidc","data-testid":"application-attribute-selection-oidc"};var hn=function(e){var t,n=e.initialMappings,i=e.readOnly,a=e.onChange,o=e["data-testid"],r=(0,P.$)().t,l=(0,ce.Z)().UIConfig,c=(0,U.I0)(),s=vn((0,N.useState)(),2),u=s[0],d=s[1];return(0,N.useEffect)((function(){(0,yt.Sd)(null).then((function(e){if(200===e.status){var t=e.data;d(t.Resources)}})).catch((function(){c((0,I.V_)({description:r("roles:notifications.fetchRoles.genericError.description"),level:C.QU.ERROR,message:r("roles:notifications.fetchRoles.genericError.message")}))}))}),[n]),N.createElement(N.Fragment,null,(null==l||null===(t=l.legacyMode)||void 0===t?void 0:t.roleMapping)&&N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:10},N.createElement(R.X6,{as:"h5"},r("applications:edit.sections.attributes.roleMapping.heading")),N.createElement(O.e9,{bottomMargin:!1,data:n?n.map((function(e){return{key:e.localRole.includes("/")?e.localRole.split("/")[1]:e.localRole,value:e.applicationRole}})):[],keyType:"dropdown",keyData:u?u.filter((function(e){return!(e.displayName.includes("Application/")||e.displayName.includes("Internal/"))})).map((function(e){return{id:e.displayName,value:e.displayName}})):[],keyName:r("applications:edit.sections.attributes.forms.fields.dynamic.localRole.label"),valueName:r("applications:edit.sections.attributes.forms.fields.dynamic.applicationRole.label"),keyRequiredMessage:r("applications:edit.sections.attributes.forms.fields.dynamic.localRole.validations.empty"),valueRequiredErrorMessage:r("applications:edit.sections.attributes.forms.fields.dynamic.applicationRole.validations.empty"),duplicateKeyErrorMsg:r("applications:edit.sections.attributes.forms.fields.dynamic.applicationRole.validations.duplicate"),readOnly:i,"data-testid":"".concat(o,"-dynamic-field"),listen:function(e){if(a){var t,n=null!==(t=null==e?void 0:e.map((function(e){return{applicationRole:e.value,localRole:e.key.includes("/")?e.key:"Internal/"+e.key}})))&&void 0!==t?t:[];a(n)}}}))))};function bn(e){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(e)}function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){An(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function An(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=bn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=bn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sn(e){return function(e){if(Array.isArray(e))return On(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||In(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||In(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(e,t){if(e){if("string"==typeof e)return On(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(e,t):void 0}}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}hn.defaultProps={"data-testid":"application-role-mapping"};var Rn="http://wso2.org/claims/userid",wn=function(e){var t,n,i,a,o,r=e.appId,l=e.appVersion,c=e.applicationTemplateId,s=e.technology,u=e.featureConfig,d=e.claimConfigurations,m=e.onlyOIDCConfigured,f=e.onUpdate,v=e.readOnly,g=e.inboundProtocolConfig,h=e["data-componentid"],b=(0,P.$)().t,E=(0,U.I0)(),y=(0,p.EV)(null==u||null===(t=u.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),A=Cn((0,N.useState)(""),2),S=A[0],O=A[1],w=Cn((0,N.useState)([]),2),T=w[0],L=w[1],Z=Cn((0,N.useState)(),2),j=Z[0],D=Z[1],M=Cn((0,N.useState)(null),2),x=M[0],F=M[1],V=Cn((0,N.useState)(null),2),z=V[0],G=V[1],W=Cn((0,N.useState)([]),2),q=W[0],Q=W[1],B=Cn((0,N.useState)(!0),2),$=B[0],K=B[1],Y=Cn((0,N.useState)([]),2),X=Y[0],J=Y[1],ee=Cn((0,N.useState)([]),2),te=ee[0],ne=ee[1],ie=Cn((0,N.useState)([]),2),ae=ie[0],oe=ie[1],re=Cn((0,N.useState)(!0),2),le=re[0],ce=re[1],de=Cn((0,N.useState)([]),2),pe=de[0],me=de[1],fe=Cn((0,N.useState)([]),2),ve=fe[0],he=fe[1],be=Cn((0,N.useState)(!1),2),ye=be[0],Ae=be[1],Se=Cn((0,N.useState)([]),2),Ce=Se[0],Ie=Se[1],Oe=Cn((0,N.useState)(!1),2),Re=Oe[0],we=Oe[1],Te=Cn((0,N.useState)(!1),2),Le=Te[0],_e=Te[1],Ne=Cn((0,N.useState)(),2),Pe=Ne[0],Ze=Ne[1],Ue=Cn((0,N.useState)(),2),je=Ue[0],De=Ue[1],ke=Cn((0,N.useState)(null!==(n=null==d||null===(i=d.role)||void 0===i?void 0:i.mappings)&&void 0!==n?n:[]),2),Me=ke[0],xe=ke[1],He=Cn((0,N.useState)(!0),2),Fe=He[0],Ve=He[1],ze=Cn((0,N.useState)(void 0),2),Ge=ze[0],We=ze[1],qe=se.l.getInstance(),Qe=(0,Ct.KD)(),Be=Qe.data,$e=Qe.isLoading,Ke=Qe.isValidating,Ye=Cn((0,N.useState)([]),2),Xe=Ye[0],Je=Ye[1];(0,N.useEffect)((function(){var e=ae.filter((function(e){return 0!==X.filter((function(t){return t.claimURI===e.mappedLocalClaimURI})).length}));e.forEach((function(e){var t=e.mappedLocalClaimURI,n=X.filter((function(e){return e.claimURI===t}));n&&n[0]&&n[0].displayName&&(e.localClaimDisplayName=n[0].displayName)})),ne(e)}),[X,ae]),(0,N.useEffect)((function(){if(!$e&&!Ke)return F(Be),ot(),rt(),void st()}),[$e,Ke,Be]),(0,N.useEffect)((function(){it()}),[te]),(0,N.useEffect)((function(){(0,_.Z)(T)||(K(!0),m?ct("http://wso2.org/oidc/claim"):(K(!1),ct(S)))}),[m,T]),(0,N.useEffect)((function(){if(Pe){var e=pt();null!==e&&vt(e)}}),[Pe]),(0,N.useEffect)((function(){"CUSTOM"===(null==d?void 0:d.dialect)&&we(!0)}),[d]);var et,tt=function(e){var t=te.find((function(t){return t.claimURI===e}));if(t){var n,i=null===(n=d.requestedClaims.find((function(e){var n;return(null==e||null===(n=e.claim)||void 0===n?void 0:n.uri)===t.mappedLocalClaimURI})))||void 0===n?void 0:n.mandatory;if(void 0!==i)return i}return!1},nt=function(e){var t=te.find((function(t){return t.claimURI===e}));return!!t&&void 0!==d.requestedClaims.find((function(e){var n;return(null==e||null===(n=e.claim)||void 0===n?void 0:n.uri)===t.mappedLocalClaimURI}))},it=function(){var e=Sn(te),t=[],n=[];if(null!=x&&0!==x.length&&0!==X.length){x.map((function(i){if("openid"!==i.name){var a=[],o=!1;i.claims.map((function(t){e.map((function(e){if(t===e.claimURI){var i=yn(yn({},e),{},{mandatory:tt(e.claimURI),requested:nt(e.claimURI)});i.requested&&(o=!0),a.push(i),n.push(e)}}))}));var r=yn(yn({},i),{},{claims:a,selected:o});t.push(r)}}));var i=e.filter((function(e){return!n.includes(e)})),a=[],o=!1;i.map((function(e){var t=nt(e.claimURI);a.push(yn(yn({},e),{},{mandatory:tt(e.claimURI),requested:nt(e.claimURI)})),o=t})),t.push({claims:a,description:b("applications:edit.sections.attributes.selection.scopelessAttributes.description"),displayName:b("applications:edit.sections.attributes.selection.scopelessAttributes.displayName"),name:b("applications:edit.sections.attributes.selection.scopelessAttributes.name"),selected:o})}Q((0,dt.Z)(t,"name")),G((0,dt.Z)(t,"name")),ce(!1)},ot=function(){Ve(!0);(0,at.WN)({"exclude-hidden-claims":!0,filter:null,limit:null,offset:null,sort:null}).then((function(e){J(e)})).catch((function(){E((0,I.V_)({description:b("claims:local.notifications.fetchLocalClaims.genericError.description"),level:C.QU.ERROR,message:b("claims:local.notifications.fetchLocalClaims.genericError.message")}))})).finally((function(){Ve(!1)}))},rt=function(){(0,at.jp)(null).then((function(e){L(e)})).catch((function(){E((0,I.V_)({description:b("claims:dialects.notifications.fetchDialects.genericError.description"),level:C.QU.ERROR,message:b("claims:dialects.notifications.fetchDialects.genericError.message")}))}))},ct=function(e){if(null!==e){var t=(a=e,o="",T.map((function(e){e.dialectURI===a&&(o=e.id)})),o),n=!0;e!==S&&(n=!1),D({dialectURI:e,id:t,localDialect:n}),n||null!==(i=t)&&(0,at.gR)(i,null).then((function(e){K(!0),ce(!0),oe(e)})).catch((function(){E((0,I.V_)({description:b("claims:external.notifications.fetchExternalClaims.genericError.description"),level:C.QU.ERROR,message:b("claims:external.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){K(!1)}))}var i,a,o},st=function(){var e;(0,_.Z)(S)&&O((e="http://wso2.org/claims",(0,at.WN)(null).then((function(t){var n=t.slice(0,1)[0].dialectURI;(0,_.Z)(n)||(e=n)})),e))},ut=function(){var e=[];if(j.localDialect){if(Re){var t=!1,n=[],i=Sn(Ce);if(Ce.map((function(e){if(e&&e.localClaim){var i={key:null==e?void 0:e.localClaim.uri,text:N.createElement(St,{key:e.localClaim.id,displayName:e.applicationClaim?e.applicationClaim:e.localClaim.uri,claimURI:e.localClaim.uri,value:e.applicationClaim}),value:e.applicationClaim};e.localClaim.uri===Rn&&(t=!0),n.push(i)}})),0===i.length||!t){var a=X.filter((function(e){return e.claimURI===Rn}))[0];if(null!=a){var o={key:a.claimURI,text:N.createElement(St,{key:a.id,displayName:a.displayName,claimURI:a.claimURI,value:a.claimURI}),value:a.claimURI};n.push(o)}}return(0,dt.Z)(n,"key")}var r=!1;if(pe.map((function(t){var n={key:t.claimURI,text:N.createElement(St,{key:t.id,displayName:t.displayName,claimURI:t.claimURI,value:t.claimURI}),value:t.claimURI};e.push(n),t.claimURI===Rn&&(r=!0)})),!r){var l=X.filter((function(e){return e.claimURI===Rn}))[0];if(null!=l){var c={key:l.claimURI,text:N.createElement(St,{key:l.id,displayName:l.displayName,claimURI:l.claimURI,value:l.claimURI}),value:l.claimURI};e.push(c)}}}else{var s=!1;if(q.map((function(t){null==t||t.claims.map((function(t){if(t.requested){var n={key:t.claimURI,text:N.createElement(St,{key:t.id,displayName:t.localClaimDisplayName,claimURI:t.claimURI,value:t.mappedLocalClaimURI}),value:t.mappedLocalClaimURI};e.push(n),t.mappedLocalClaimURI===Rn&&(s=!0)}}))})),!s){var u=[].concat(Sn(te),Sn(ve)).filter((function(e){return e.mappedLocalClaimURI===Rn}))[0];if(null!=u){var d={key:u.claimURI,text:N.createElement(St,{key:u.id,displayName:u.localClaimDisplayName,claimURI:u.claimURI,value:u.mappedLocalClaimURI}),value:u.mappedLocalClaimURI};e.push(d)}}}return(0,dt.Z)(e,"value")},pt=function(){var e=[],t=!0;return _e(!1),Sn(Ce).map((function(n){if(n.addMapping)if((0,_.Z)(null==n?void 0:n.applicationClaim))_e(!0),t=!1;else{var i,a={applicationClaim:null==n?void 0:n.applicationClaim,localClaim:{uri:null==n||null===(i=n.localClaim)||void 0===i?void 0:i.uri}};e.push(a)}})),t?e:null},mt=function(e){var t,n,i=null==e?void 0:e.subject.includeUserDomain;return m&&"string"==typeof(null==e||null===(t=e.subject)||void 0===t?void 0:t.claim)&&(null==e||null===(n=e.subject)||void 0===n?void 0:n.claim)===Rn&&(i=!1),i},ft=function(e){var t,n,i=null==e?void 0:e.subject.includeTenantDomain;return m&&"string"==typeof(null==e||null===(t=e.subject)||void 0===t?void 0:t.claim)&&(null==e||null===(n=e.subject)||void 0===n?void 0:n.claim)===Rn&&(i=!1),i},vt=function(e){var t,n,i,a=!1,o=[],l=null==Pe||null===(t=Pe.subject)||void 0===t?void 0:t.claim;if(j.localDialect?pe.map((function(t){var n,i,a,r,c=e.length>0?(n=t.claimURI,r=n,(i=e).length>0&&(r=null===(a=i.find((function(e){var t;return(null==e||null===(t=e.localClaim)||void 0===t?void 0:t.uri)===n})))||void 0===a?void 0:a.applicationClaim),r):null;if(c){if(t.requested){var s={claim:{uri:c},mandatory:l&&c===l.toString()?ue.tZ.attributeSettings.makeSubjectMandatory:t.mandatory};o.push(s)}}else{var u={claim:{uri:t.claimURI},mandatory:l&&t.claimURI===l.toString()?ue.tZ.attributeSettings.makeSubjectMandatory:t.mandatory};o.push(u)}})):q.map((function(e){null==e||e.claims.map((function(e){if(e.requested){var t={claim:{uri:e.mappedLocalClaimURI},mandatory:e.mandatory};o.find((function(e){return e.claim.uri===t.claim.uri}))||o.push(t)}}))})),e.findIndex((function(e){return e.localClaim.uri===Rn}))<0&&l&&l.toString()===Rn&&(a=!0),e.length>0&&a){var c={applicationClaim:Rn,localClaim:{uri:Rn}};e.push(c)}var u={claimConfiguration:{claimMappings:e.length>0?e:[],dialect:e.length>0?"CUSTOM":"LOCAL",requestedClaims:o,role:{claim:{uri:null==Pe?void 0:Pe.role.claim},includeUserDomain:null==Pe?void 0:Pe.role.includeUserDomain,mappings:Me.length>0?Me:[]},subject:{claim:{uri:null==Pe?void 0:Pe.subject.claim},includeTenantDomain:ft(Pe),includeUserDomain:mt(Pe),mappedLocalSubjectMandatory:null==Pe?void 0:Pe.subject.mappedLocalSubjectMandatory,useMappedLocalSubject:null==Pe?void 0:Pe.subject.useMappedLocalSubject}}},d=null==Pe?void 0:Pe.oidc;(0,_.Z)(u.claimConfiguration.claimMappings)&&delete u.claimConfiguration.claimMappings,(0,_.Z)(u.claimConfiguration.role.mappings)&&delete u.claimConfiguration.role.mappings,ue.tZ.attributeSettings.roleMapping||delete u.claimConfiguration.role,ue.tZ.excludeSubjectClaim&&m&&delete u.claimConfiguration.subject;var p;null!=(null==d||null===(n=d.clientAuthentication)||void 0===n?void 0:n.tokenEndpointAuthMethod)&&"private_key_jwt"==(null==d||null===(i=d.clientAuthentication)||void 0===i?void 0:i.tokenEndpointAuthMethod)||(null==d||null===(p=d.clientAuthentication)||void 0===p||delete p.tokenEndpointAllowReusePvtKeyJwt);var v=function(){E((0,I.V_)({description:b("applications:notifications.updateClaimConfig.genericError.description"),level:C.QU.ERROR,message:b("applications:notifications.updateClaimConfig.genericError.message")}))},g=function(){f(r),E((0,I.V_)({description:b("applications:notifications.updateClaimConfig.success.description"),level:C.QU.SUCCESS,message:b("applications:notifications.updateClaimConfig.success.message")}))};if(!m||u.claimConfiguration.subject.claim.uri===Rn||u.claimConfiguration.requestedClaims.map((function(e){return e.claim.uri})).includes(u.claimConfiguration.subject.claim.uri)){var h=!(null==s||!s.find((function(e){return e.type===H.AI.OAUTH2})));(0,k.aA)(r,u).then((function(){h?(0,k.lp)(r,d,H.AI.OIDC).then(g).catch(v):g()})).catch(v)}else E((0,I.V_)({description:b("applications:notifications.updateClaimConfig.mistmatchAlternativesubjectIdentifierError.description"),level:C.QU.ERROR,message:b("applications:notifications.updateClaimConfig.mistmatchAlternativesubjectIdentifierError.message")}))},gt=function(e){e?(we(!0),Ae(!1)):(we(!1),Ae(!1))};return $||!j||Fe&&(0,_.Z)(te)||le?N.createElement(R.pJ,{padded:"very"},N.createElement(R.pO,{inline:"centered",active:!0})):N.createElement(R.pJ,{padded:"very"},N.createElement(Ee.Z,{className:"claim-mapping"},N.createElement("div",{className:"form-container with-max-width"},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:12},m?N.createElement(fn,{claims:X,externalClaims:te,externalClaimsGroupedByScopes:z,setExternalClaimsGroupedByScopes:G,unfilteredExternalClaimsGroupedByScopes:q,setUnfilteredExternalClaimsGroupedByScopes:Q,setExternalClaims:ne,selectedExternalClaims:ve,setSelectedExternalClaims:he,selectedDialect:j,selectedSubjectValue:je,claimMapping:Ce,claimConfigurations:d,defaultSubjectAttribute:Rn,readOnly:v||!y,isUserAttributesLoading:Ge,setUserAttributesLoading:We,onlyOIDCConfigured:m,"data-testid":"".concat(h,"-attribute-selection-oidc"),"data-componentid":"".concat(h,"-attribute-selection-oidc"),appVersion:l}):N.createElement(an,{claims:X,setClaims:J,externalClaims:te,setExternalClaims:ne,selectedClaims:pe,selectedExternalClaims:ve,setSelectedClaims:me,setSelectedExternalClaims:he,selectedDialect:j,selectedSubjectValue:je,claimMapping:Ce,setClaimMapping:Ie,createMapping:function(e){if(j.localDialect){var t=Sn(Ce);e.map((function(e){var n={addMapping:!1,applicationClaim:"",localClaim:{displayName:e.displayName,id:e.id,uri:e.claimURI}};t.some((function(t){return t.localClaim.uri===e.claimURI}))||t.push(n),Ie(t)}))}},removeMapping:function(e){var t,n=Sn(Ce);n.map((function(n){n.localClaim.uri===e&&(t=n)})),t&&(n.splice(n.indexOf(t),1),Ie(n))},updateMappings:function(e,t){if(j.localDialect){var n=Sn(Ce);e.map((function(e){var t={addMapping:!1,applicationClaim:"",localClaim:{displayName:e.displayName,id:e.id,uri:e.claimURI}};n.some((function(t){return t.localClaim.uri===e.claimURI}))||n.push(t)})),t.map((function(e){var t;n.map((function(n){n.localClaim.uri===e.claimURI&&(t=n)})),t&&n.splice(n.indexOf(t),1)})),Ie(n)}},getCurrentMapping:function(e){var t;return Sn(Ce).map((function(n){n.localClaim.uri===e&&(t=n)})),t},updateClaimMapping:function(e,t,n){var i=Sn(Ce),a={},o=[];i.forEach((function(i){i.localClaim.uri===e&&(i.applicationClaim=t),n&&(a[i.applicationClaim]?o.push(i.applicationClaim):a[i.applicationClaim]=!0)})),n&&Je(o),Ie(i)},addToClaimMapping:function(e,t){var n=Sn(Ce);n.forEach((function(n){n.localClaim.uri===e&&(n.addMapping=t)})),Ie(n)},claimConfigurations:d,claimMappingOn:Re,defaultSubjectAttribute:Rn,showClaimMappingRevertConfirmation:Ae,setClaimMappingOn:we,claimMappingError:Le,readOnly:v||!y,isUserAttributesLoading:Ge,setUserAttributesLoading:We,onlyOIDCConfigured:m,duplicatedMappingValues:Xe,"data-testid":"".concat(h,"-attribute-selection")})))),!1===Ge?N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(jt,{dropDownOptions:function(){var e=[];if(e=ut(),m){var t=e.findIndex((function(e){return(null==e?void 0:e.value)===Rn}));e=e.filter((function(e,n){return n!==t}))}return e}(),triggerSubmission:function(e){et=e},claimConfigurations:d,setSubmissionValues:Ze,setSelectedValue:De,defaultSubjectAttribute:Rn,initialRole:null==d?void 0:d.role,initialSubject:null==d?void 0:d.subject,claimMappingOn:Re,readOnly:v||!y,technology:s,applicationTemplateId:c,onlyOIDCConfigured:m,oidcInitialValues:(0,It.Z)(g,H.AI.OIDC)?g[H.AI.OIDC]:void 0,"data-testid":"".concat(h,"-advanced-attribute-settings-form"),appVersion:l}))),N.createElement(R.cV,{onClose:function(){return Ae(!1)},type:"warning",open:ye,primaryAction:b("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmPrimaryAction"),secondaryAction:b("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmSecondaryAction"),onSecondaryActionClick:function(){return gt(!0)},onPrimaryActionClick:function(){return gt(!1)}},N.createElement(R.cV.Header,null,b("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmationHeading")),N.createElement(R.cV.Message,{warning:!0},b("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmationMessage")),N.createElement(R.cV.Content,null,b("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmationContent"))),!v&&ue.tZ.attributeSettings.roleMapping&&N.createElement(hn,{onChange:xe,initialMappings:null==d||null===(a=d.role)||void 0===a?void 0:a.mappings,readOnly:v||!y,"data-testid":"".concat(h,"-role-mapping")}),!v&&N.createElement(p.di,{when:null==u||null===(o=u.applications)||void 0===o||null===(o=o.scopes)||void 0===o?void 0:o.update},N.createElement(ge.Z,{hidden:!0}),N.createElement(Ee.Z.Row,null,N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(lt.Z,{primary:!0,size:"small",onClick:function(){qe.publish("application-user-attribute-click-update-button");var e=new Set(Ce.map((function(e){return e.applicationClaim})));Re&&e.size!==Ce.length?E((0,I.V_)({description:b("applications:notifications.updateClaimConfig.error.description",{description:"Mapped user attributes cannot be duplicated."}),level:C.QU.ERROR,message:b("applications:notifications.updateClaimConfig.error.message")})):et()},"data-testid":"".concat(h,"-submit-button")},b("common:update")))))):null)};wn.defaultProps={"data-componentid":"application-attribute-settings"};var Tn=n(900),Ln=n(15513),_n=n(29851),Nn=n(8976),Pn=n(66132),Zn=n(90375),Un=n(58613),jn=n(34194),Dn=n(33852),kn=n(88837),Mn=n(55931),xn=n(92546),Hn=n(41121),Fn=["key","setActiveOption","primaryText","userStore","option","activeOption"];function Vn(){return Vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vn.apply(null,arguments)}function zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Wn=function(e){var t=e.key,n=e.setActiveOption,i=e.primaryText,a=e.userStore,o=e.option,r=e.activeOption,c=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Fn),s=zn((0,N.useState)(null),2),d=s[0],p=s[1],m=function(){p(null),n(null)};return N.createElement(N.Fragment,null,N.createElement(Mn.Z,Vn({},c,{key:t,label:i,onMouseEnter:function(e){p(e.currentTarget),n(o)},onMouseLeave:m})),(null==r?void 0:r.id)===o.id&&N.createElement(Hn.ZP,{className:"role-chip-popover",open:!!d,anchorEl:d,onClose:m,anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{horizontal:"left",vertical:"top"},elevation:0,disableRestoreFocus:!0},N.createElement(xn.Z,null,N.createElement(Dn.Z,{className:"role-chip-more-details"},N.createElement(kn.Z,null,N.createElement(l.Z,{container:!0,alignItems:"center",columnSpacing:2},N.createElement(l.Z,{container:!0,alignItems:"center",justifyContent:"flex-start"},N.createElement(l.Z,null,N.createElement(R.JT,{image:N.createElement(R.Xo,{name:i,size:"mini"}),size:"mini"})),N.createElement(l.Z,null,N.createElement(u.Z,{primary:i}))),N.createElement(l.Z,{justifyContent:"flex-end"},N.createElement(Mn.Z,{icon:N.createElement(R.dn,{inline:!0,size:"default",transparent:!0,icon:(0,We.Uz)().userStore,verticalAlign:"middle"}),label:a}))))))))},qn=n(20305);function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Qn.apply(null,arguments)}var Bn=function(e){var t=e.selected,n=e.displayName,i=e.userStore,a=e.renderOptionProps,o=e["data-componentid"];return N.createElement("li",Qn({},a,{"data-componentid":o}),N.createElement(l.Z,{container:!0,justifyContent:"space-between",alignItems:"center",xs:12},N.createElement(l.Z,{container:!0,alignItems:"center",xs:8},N.createElement(qn.Z,{checked:t}),N.createElement(u.Z,{primary:n})),N.createElement(l.Z,{justifyContent:"flex-end"},N.createElement(Mn.Z,{icon:N.createElement(R.dn,{inline:!0,size:"default",transparent:!0,icon:(0,We.Uz)().userStore,verticalAlign:"middle"}),label:i}))))},$n=n(96124),Kn=n(76271),Yn=n(61720),Xn={};Xn.styleTagTransform=je(),Xn.setAttributes=Ne(),Xn.insert=Le().bind(null,"head"),Xn.domAPI=we(),Xn.insertStyleElement=Ze();Oe()(Yn.Z,Xn);Yn.Z&&Yn.Z.locals&&Yn.Z.locals;function Jn(e){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(e)}function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ei.apply(null,arguments)}function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ni(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Jn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Jn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ai(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ai(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var oi="application-general-details",ri=function(e){return e.EVERYONE="everyone",e.USER_GROUPS="user-groups",e}(ri||{}),li=[{label:"applications:forms.generalDetails.fields.discoverableGroups.radioOptions.everyone",value:ri.EVERYONE},{label:"applications:forms.generalDetails.fields.discoverableGroups.radioOptions.userGroups",value:ri.USER_GROUPS}],ci=function(e){var t,n,i,a,o=e.appId,r=e.name,l=e.description,c=e.discoverability,s=e.hiddenFields,u=e.imageUrl,d=e.accessUrl,p=e.onSubmit,m=e.readOnly,f=e.hasRequiredScope,v=e.isSubmitting,g=e.isManagementApp,E=e.application,y=e.template,A=e.isBrandingSectionHidden,S=e["data-testid"],O=void 0===S?"application-general-settings-form":S,w=e["data-componentid"],T=void 0===w?"application-general-settings-form":w,_=(0,P.$)().t,j=(0,U.I0)(),D=(0,R.fQ)().getLink,M=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t?void 0:t.ui})),x=null==M||null===(t=M.features)||void 0===t||null===(t=t.applications)||void 0===t?void 0:t.featureFlags,H=(0,U.v9)((function(e){var t;return null==e||null===(t=e.organization)||void 0===t?void 0:t.organizationType})),F=ii((0,N.useState)(c),2),z=F[0],G=F[1],W=ii((0,N.useState)(h.$.DEFAULT_MY_ACCOUNT_STATUS),2),q=W[0],Q=W[1],B=ii((0,N.useState)(!1),2),$=B[0],K=B[1],Y=ii((0,N.useState)(null===ue.wO||void 0===ue.wO?void 0:ue.wO.primaryUserstoreName),2),X=Y[0],J=Y[1],ee=ii((0,N.useState)(null),2),te=ee[0],ne=ee[1],ie=ii((0,N.useState)({}),2),ae=ie[0],oe=ie[1],re=ii((0,N.useState)(null),2),le=re[0],ce=re[1],se=ii((0,N.useState)(ri.EVERYONE),2),de=se[0],me=se[1],fe=window.AppUtils.getConfig().organizationName,ve=H===pe.$B.SUBORGANIZATION,he=ii((0,N.useState)(),2),be=he[0],ye=he[1];(0,N.useEffect)((function(){(null==y?void 0:y[Qe.jo.ORIGINAL_TEMPLATE_ID_PROPERTY])===wt.u.MCP_CLIENT_APPLICATION&&ye(!0)}),[y]);var Ae=(0,k.pv)(!fe&&(null===ue.tZ||void 0===ue.tZ||null===(n=ue.tZ.advancedConfigurations)||void 0===n?void 0:n.showMyAccountStatus)),Ie=Ae.data,Oe=Ae.isLoading,Re=(0,Un.Z)(),we=Re.userStoresList,Te=Re.isLoading,Le=function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a={headers:{Accept:"application/json","Content-Type":"application/json"},method:C.f2.GET,params:{domain:e,filter:t?"name co ".concat(t):void 0},url:null===Kn.h||void 0===Kn.h||null===(n=Kn.h.getState())||void 0===n||null===(n=n.config)||void 0===n||null===(n=n.endpoints)||void 0===n?void 0:n.groupMetadata},o=(0,$n.Z)(i?a:null),r=o.data,l=o.error,c=o.isValidating,s=o.mutate;return{data:r,error:l,isLoading:o.isLoading,isValidating:c,mutate:s}}(X,te),_e=Le.data,Ne=Le.isLoading,Pe=Le.error,Ze=(null==E||null===(i=E.advancedConfigurations)||void 0===i?void 0:i.fragment)||!1;(0,N.useEffect)((function(){var e;E&&((null==E||null===(e=E.advancedConfigurations)||void 0===e||null===(e=e.discoverableGroups)||void 0===e?void 0:e.length)>0?me(ri.USER_GROUPS):me(ri.EVERYONE))}),[E]);var Ue=(0,N.useMemo)((function(){var e=[{key:-1,text:null===ue.wO||void 0===ue.wO?void 0:ue.wO.primaryUserstoreName,value:null===ue.wO||void 0===ue.wO?void 0:ue.wO.primaryUserstoreName}];return(null==we?void 0:we.length)>0&&we.forEach((function(t,n){var i;(null==t||null===(i=t.name)||void 0===i?void 0:i.toUpperCase())!==(null===ue.wO||void 0===ue.wO?void 0:ue.wO.primaryUserstoreName)&&null!=t&&t.enabled&&e.push({key:n,text:t.name,value:t.name})})),e}),[we]);(0,N.useEffect)((function(){var e,t,n,i={};if(null==E||null===(e=E.advancedConfigurations)||void 0===e||!e.discoverableGroups||0===(null==E||null===(t=E.advancedConfigurations)||void 0===t||null===(t=t.discoverableGroups)||void 0===t?void 0:t.length))return oe(i);null==E||null===(n=E.advancedConfigurations)||void 0===n||n.discoverableGroups.forEach((function(e){i[e.userStore]=e.groups})),oe(i)}),[E]),(0,N.useEffect)((function(){Pe&&j((0,I.V_)({description:_("groups:notifications.fetchGroups.genericError.description"),level:C.QU.ERROR,message:_("groups:notifications.fetchGroups.genericError.message")}))}),[Pe]);var je=(0,N.useMemo)((function(){var e="";return Qe.jo.FORM_FIELD_CONSTRAINTS.ACCESS_URL_ALLOWED_PLACEHOLDERS.forEach((function(t,n){e+=0==n?t:"|".concat(t)})),new RegExp(e,"g")}),[]),De=function(e){var t,n,i,a,r,l,c;p(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach((function(t){ni(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({accessUrl:null===(t=e.accessUrl)||void 0===t?void 0:t.toString(),advancedConfigurations:{discoverableByEndUsers:e.discoverableByEndUsers,discoverableGroups:(c=[],de!==ri.EVERYONE&&z?(Object.keys(ae).forEach((function(e){var t;(null===(t=ae[e])||void 0===t?void 0:t.length)>0&&c.push({groups:ae[e],userStore:e})})),(0,V.Z)(null!==(r=null==E||null===(l=E.advancedConfigurations)||void 0===l?void 0:l.discoverableGroups)&&void 0!==r?r:[],c)?void 0:c):c)},description:null===(n=e.description)||void 0===n?void 0:n.toString().trim(),id:o,name:null===(i=e.name)||void 0===i?void 0:i.toString()},!(null!=s&&s.includes("imageUrl"))&&{imageUrl:null===(a=e.imageUrl)||void 0===a?void 0:a.toString()}))};return(0,N.useEffect)((function(){K((null==E?void 0:E.templateId)===Qe.jo.M2M_APP_TEMPLATE_ID)}),[E]),(0,N.useEffect)((function(){var e=h.$.DEFAULT_MY_ACCOUNT_STATUS;if(Ie){var t=Ie.value;t&&"false"===t&&(e=!1)}Q(e)}),[Oe]),Oe?N.createElement(R.pJ,{padded:"very"},N.createElement(R.pO,{inline:"centered",active:!0})):N.createElement(qe.l0,{id:oi,uncontrolledForm:!0,onSubmit:function(e){De(e)},initialValues:{accessUrl:d,description:l,name:r},validate:function(e){var t={accessUrl:void 0};return z&&!e.accessUrl&&(t.accessUrl=_("applications:forms.generalDetails.fields.accessUrl.validations.empty")),t}},N.createElement(Ee.Z,{className:"application-general-settings"},N.createElement(Ge.l,{tabId:ue.N0.GENERAL},g&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(R.v0,{type:"info",content:N.createElement(N.Fragment,null,_("applications:forms.generalDetails.managementAppBanner"),N.createElement(R.eb,{link:D("develop.applications.managementApplication.learnMore")},_("common:learnMore")))}))),!M.systemAppsIdentifiers.includes(r)&&!Ze&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.Input,{ariaLabel:"Application name",inputType:"name",name:"name",label:_("applications:forms.generalDetails.fields.name.label"),required:!0,placeholder:_("applications:forms.generalDetails.fields.name.placeholder"),value:r,readOnly:m,validation:function(e){return function(e){if(!e||!e.match(Qe.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_PATTERN))return"Please enter a valid input."}(e.toString().trim())},maxLength:Qe.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_MAX_LENGTH,minLength:3,"data-testid":"".concat(O,"-application-name-input"),width:16}))),r!==Qe.jo.MY_ACCOUNT_APP_NAME&&!Ze&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.Textarea,{ariaLabel:"Application description",name:"description",label:_("applications:forms.generalDetails.fields.description.label"),required:!1,placeholder:_("applications:forms.generalDetails.fields.description.placeholder"),value:l,readOnly:m,maxLength:300,minLength:3,"data-testid":"".concat(O,"-application-description-textarea"),width:16}))),!Ze&&!(null!=s&&s.includes("imageUrl"))&&N.createElement(Ee.Z.Row,{columns:1,"data-componentid":"application-edit-general-details-form-image-url"},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.Input,{ariaLabel:"Application image URL",inputType:"url",name:"imageUrl",label:_("applications:forms.generalDetails.fields.imageUrl.label"),required:!1,placeholder:_("applications:forms.generalDetails.fields.imageUrl.placeholder"),value:u,readOnly:m,"data-testid":"".concat(O,"-application-image-url-input"),maxLength:200,minLength:3,hint:_("applications:forms.generalDetails.fields.imageUrl.hint"),width:16}))),!$&&q&&!ve&&!be&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},!ve&&N.createElement(ge.Z,null),N.createElement(R.X6,{as:"h4"},_("applications:forms.generalDetails.fields.discoverable.label")),N.createElement(qe.gN.Checkbox,{ariaLabel:"Make application discoverable by end users",name:"discoverableByEndUsers",required:!1,label:_("common:enable"),initialValue:z,readOnly:m,"data-testid":"".concat(O,"-application-discoverable-checkbox"),listen:function(e){G(e),e&&Object.keys(ae).length>0?me(ri.USER_GROUPS):me(ri.EVERYONE)},hint:N.createElement(Z.c,{i18nKey:E.templateId===Qe.jo.MOBILE?"applications:forms.inboundOIDC.mobileApp.discoverableHint":"applications:forms.generalDetails.fields.discoverable.hint",tOptions:{myAccount:"My Account"}}," ",void 0===D("develop.applications.managementApplication.selfServicePortal")?N.createElement("strong",{"data-testid":"application-name-assertion"},"My Account"):N.createElement("strong",{className:"link pointing","data-testid":"application-name-assertion",onClick:function(){return window.open(D("develop.applications.managementApplication.selfServicePortal"),"_blank")}},"My Account")),width:16}))),!$&&q&&!ve&&!be&&N.createElement(Ee.Z.Row,{columns:16,className:"discoverable-groups"},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(R.X6,{as:"h6"},_("applications:forms.generalDetails.fields.discoverableGroups.label"))),N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16,className:de===ri.USER_GROUPS?"radio-section":""},li.map((function(e){return N.createElement(qe.gN.Radio,{key:e.value,ariaLabel:_(e.label),label:_(e.label),name:"discoverableGroupType",type:"radio",value:e.value,checked:de===e.value,listen:function(){return me(e.value)},readOnly:m,"data-componentid":"".concat(T,"-discoverable-group-radio-")+"option-".concat(e.value),disabled:!z})}))),de===ri.USER_GROUPS&&N.createElement(Ee.Z.Column,{mobile:16,tablet:6,computer:4,stretched:!0},N.createElement(_n.Z,{value:X,onChange:function(e){return J(e.target.value)},"data-componentid":"".concat(T,"-group-store-domain-dropdown"),disabled:!z},Te?N.createElement("p",null,_("common:loading")):null==Ue?void 0:Ue.map((function(e){return N.createElement(Ln.Z,{key:e.key,value:e.value},e.text)})))),de===ri.USER_GROUPS&&N.createElement(Ee.Z.Column,{mobile:16,tablet:10,computer:12,stretched:!0},N.createElement(Tn.Z,{multiple:!0,style:{padding:0},disableCloseOnSelect:!0,loading:Ne,options:null!=_e?_e:[],value:null!==(a=ae[X])&&void 0!==a?a:[],"data-componentid":"".concat(T,"-discoverable-group")+"-search-text-input",getOptionLabel:function(e){return null==e?void 0:e.name},renderInput:function(e){return N.createElement(Nn.Z,ei({},e,{placeholder:_("applications:forms.generalDetails.fields.discoverableGroups.action.assign")}))},onChange:function(e,t){var n=(0,L.Z)(ae);n[X]=t,oe(n)},filterOptions:function(e){return e},inputValue:te,onInputChange:function(e,t,n){"input"===n&&ne(t)},isOptionEqualToValue:function(e,t){return e.id===t.id},renderTags:function(e,t){return e.map((function(e,n){return N.createElement(Wn,ei({},t({index:n}),{key:n,primaryText:e.name,userStore:X,option:e,activeOption:le,setActiveOption:ce,variant:"filled"}))}))},renderOption:function(e,t,n){var i=n.selected;return N.createElement(Bn,{selected:i,displayName:t.name,userStore:X,"data-componentid":"".concat(T,"-discoverable-group-")+"option-".concat(t.name),renderOptionProps:e})},disabled:!z}))),!$&&!ve&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},N.createElement(qe.gN.Input,{ariaLabel:_("applications:forms.generalDetails.fields.accessUrl.ariaLabel"),inputType:"url",name:"accessUrl",label:_("applications:forms.generalDetails.fields.accessUrl.label"),required:z,placeholder:_("applications:forms.generalDetails.fields.accessUrl.placeholder"),value:d,readOnly:!f||m&&ue.tZ.generalSettings.getFieldReadOnlyStatus(E,"ACCESS_URL"),validation:function(e){var t,n,i=null==e||null===(t=e.trim())||void 0===t?void 0:t.replace(je,"");return!i||Ot.URLUtils.isURLValid(i,!0)&&jn.I.url(i)||(n=_("applications:forms.generalDetails.fields.accessUrl.validations.invalid")),n},maxLength:Qe.jo.FORM_FIELD_CONSTRAINTS.ACCESS_URL_MAX_LENGTH,minLength:Qe.jo.FORM_FIELD_CONSTRAINTS.ACCESS_URL_MIN_LENGTH,"data-testid":"".concat(O,"-application-access-url-input"),hint:_("applications:forms.generalDetails.fields.accessUrl.hint"),width:16}))),N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:16},!A&&!$&&!Ze&&N.createElement(ge.Z,null),!A&&!$&&N.createElement(N.Fragment,null,N.createElement(R.X6,{as:"h4"},_("applications:forms.generalDetails.sections.branding.title"),N.createElement(Pn.Z,{featureFlags:x,featureKey:Zn.Z.FEATURE_FLAG_KEY_MAP.APPLICATION_EDIT_BRANDING_LINK,type:"chip"})),N.createElement(Ce.kh,{fill:"#ff7300"})," \xa0",N.createElement(Se.Z,{className:"application-branding-link",color:"primary","data-componentid":"".concat(O,"-application-branding-link"),onClick:function(){b.m.push({pathname:h.$.getPaths().get("BRANDING"),state:o})}},_("applications:forms.generalDetails.brandingLink.label")),N.createElement(R.kW,null,_("applications:forms.generalDetails.brandingLink.hint"))))))),N.createElement(qe.gN.Button,{form:oi,size:"small",buttonType:"primary_btn",ariaLabel:"Update button",name:"update-button","data-testid":"".concat(O,"-submit-button"),disabled:v,loading:v,label:_("common:update"),hidden:Ze||!f||m&&ue.tZ.generalSettings.getFieldReadOnlyStatus(E,"ACCESS_URL")}))};function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ui(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ui(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var di=function(e){var t,n,i,a,o,r,l=e.appId,c=e.name,s=e.description,u=e.discoverability,d=e.featureConfig,m=e.imageUrl,f=e.accessUrl,v=e.isLoading,g=e.onDelete,E=e.onUpdate,y=e.readOnly,A=e.isManagementApp,S=e.application,O=e.template,w=e.isBrandingSectionHidden,T=e["data-componentid"],L=(0,U.I0)(),_=(0,P.$)().t,j=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t?void 0:t.ui})),D=(0,p.EV)(null==d||null===(t=d.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),M=si((0,N.useState)(!1),2),x=M[0],H=M[1],F=si((0,N.useState)(!1),2),V=F[0],z=F[1],G=si((0,N.useState)(!1),2),W=G[0],q=G[1],Q=si((0,N.useState)(!1),2),B=Q[0],$=Q[1],K=si((0,N.useState)(!1),2),Y=K[0],X=K[1],J=si((0,N.useState)(!1),2),ee=J[0],te=J[1],ne=function(e,t){te(!t.checked),z(!0)};return v?N.createElement(R.pJ,{padded:"very"},N.createElement(R.pO,{inline:"centered",active:!0})):N.createElement(N.Fragment,null,N.createElement(R.pJ,{padded:"very"},N.createElement(ci,{name:c,appId:l,application:S,description:s,discoverability:u,onSubmit:function(e){q(!0),(0,k.hN)(e).then((function(){L((0,I.V_)({description:_("applications:notifications.updateApplication.success.description"),level:C.QU.SUCCESS,message:_("applications:notifications.updateApplication.success.message")})),E(l)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?L((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:_("applications:notifications.updateApplication.error.message")})):L((0,I.V_)({description:_("applications:notifications.updateApplication.genericError.description"),level:C.QU.ERROR,message:_("applications:notifications.updateApplication.genericError.message")}))})).finally((function(){q(!1)}))},imageUrl:m,accessUrl:f,readOnly:y||!D,hasRequiredScope:D,isBrandingSectionHidden:w,"data-testid":"".concat(T,"-form"),isSubmitting:W,isManagementApp:A,template:O})),N.createElement(ge.Z,{hidden:!0}),D?j.systemAppsIdentifiers.includes(c)?null:ue.tZ.editApplication.showDangerZone(S)?null!=S&&null!==(n=S.advancedConfigurations)&&void 0!==n&&n.fragment?null:N.createElement(p.di,{when:(null==d||null===(i=d.applications)||void 0===i||null===(i=i.scopes)||void 0===i?void 0:i.delete)||(null==d||null===(a=d.applications)||void 0===a||null===(a=a.scopes)||void 0===a?void 0:a.update)},N.createElement(R.v9,{sectionHeader:_("applications:dangerZoneGroup.header")},N.createElement(p.di,{when:null==d||null===(o=d.applications)||void 0===o||null===(o=o.scopes)||void 0===o?void 0:o.update},N.createElement(R.cN,{actionTitle:_("applications:dangerZoneGroup.disableApplication.actionTitle"),header:_("applications:dangerZoneGroup.disableApplication.header"),subheader:_("applications:dangerZoneGroup.disableApplication.subheader"),onActionClick:void 0,toggle:{checked:!S.applicationEnabled,onChange:ne},"data-testid":"".concat(T,"-danger-zone-disable")})),N.createElement(p.di,{when:null==d||null===(r=d.applications)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.delete},N.createElement(R.cN,{actionTitle:_("applications:dangerZoneGroup.deleteApplication.actionTitle"),header:_("applications:dangerZoneGroup.deleteApplication.header"),subheader:_("applications:dangerZoneGroup.deleteApplication.subheader"),onActionClick:function(){return H(!0)},"data-testid":"".concat(T,"-danger-zone")})))):null:null,N.createElement(R.cV,{onClose:function(){return H(!1)},type:"negative",open:x,assertionHint:_("applications:confirmations.deleteApplication.assertionHint"),assertionType:"checkbox",primaryAction:_("common:confirm"),secondaryAction:_("common:cancel"),onSecondaryActionClick:function(){return H(!1)},onPrimaryActionClick:function(){return $(!0),void(0,k.rw)(l).then((function(){$(!1),L((0,I.V_)({description:_("applications:notifications.deleteApplication.success.description"),level:C.QU.SUCCESS,message:_("applications:notifications.deleteApplication.success.message")})),H(!1),g()})).catch((function(e){$(!1),e.response&&e.response.data&&e.response.data.description?L((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:_("applications:notifications.deleteApplication.error.message")})):L((0,I.V_)({description:_("applications:notifications.deleteApplication.genericError.description"),level:C.QU.ERROR,message:_("applications:notifications.deleteApplication.genericError.message")}))}))},closeOnDimmerClick:!1,primaryActionLoading:B,"data-testid":"".concat(T,"-application-delete-confirmation-modal")},Tt.y.isChoreoApplication(S)?N.createElement(N.Fragment,null,N.createElement(R.cV.Header,{"data-testid":"".concat(T,"-application-delete-confirmation-modal-header")},_("applications:confirmations.deleteChoreoApplication.header")),N.createElement(R.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(T,"-application-delete-confirmation-modal-message")},_("applications:confirmations.deleteChoreoApplication.message")),N.createElement(R.cV.Content,{"data-testid":"".concat(T,"-application-delete-confirmation-modal-content")},N.createElement(Z.c,{i18nKey:"applications:confirmations.deleteChoreoApplication.content"},"Deleting this application will break the authentication flows and cause the associated Choreo application to be unusable with its credentials.",N.createElement("b",null,"Proceed at your own risk.")))):N.createElement(N.Fragment,null,N.createElement(R.cV.Header,{"data-testid":"".concat(T,"-application-delete-confirmation-modal-header")},_("applications:confirmations.deleteApplication.header")),N.createElement(R.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(T,"-application-delete-confirmation-modal-message")},_("applications:confirmations.deleteApplication.message")),N.createElement(R.cV.Content,{"data-testid":"".concat(T,"-application-delete-confirmation-modal-content")},_("applications:confirmations.deleteApplication.content")))),N.createElement(R.cV,{onClose:function(){return z(!1)},type:"warning",open:V,primaryAction:_("common:confirm"),secondaryAction:_("common:cancel"),onSecondaryActionClick:function(){return z(!1)},onPrimaryActionClick:function(){return X(!0),void(0,k.GB)(l,ee).then((function(){L((0,I.V_)({description:_("applications:notifications.disableApplication.success.description",{state:ee?"enabled":"disabled"}),level:C.QU.SUCCESS,message:_("applications:notifications.disableApplication.success.message",{state:ee?"enabled":"disabled"})})),z(!1),E(l)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?L((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:_("applications:notifications.disableApplication.error.message")})):L((0,I.V_)({description:_("applications:notifications.disableApplication.genericError.description",{state:ee?"enable":"disable"}),level:C.QU.ERROR,message:_("applications:notifications.disableApplication.genericError.message")}))})).finally((function(){X(!1),q(!1)}))},closeOnDimmerClick:!1,primaryActionLoading:Y,"data-testid":"".concat(T,"-application-disable-confirmation-modal")},N.createElement(R.cV.Header,{"data-testid":"".concat(T,"-application-disable-confirmation-modal-header")},_(ee?"applications:confirmations.enableApplication.header":"applications:confirmations.disableApplication.header")),N.createElement(R.cV.Message,{attached:!0,warning:!0,"data-testid":"".concat(T,"-application-disable-confirmation-modal-message")},_(ee?"applications:confirmations.enableApplication.message":"applications:confirmations.disableApplication.message")),N.createElement(R.cV.Content,{"data-testid":"".concat(T,"-application-disable-confirmation-modal-content")},ee?_("applications:confirmations.enableApplication.content"):N.createElement(N.Fragment,null,N.createElement(Z.c,{i18nKey:"applications:confirmations.disableApplication.content.0"},"This may prevent consumers from accessing the application, but it can be resolved by re-enabling the application."),N.createElement("br",null),N.createElement("br",null),N.createElement(Z.c,{i18nKey:"applications:confirmations.disableApplication.content.1"},"Ensure that the references to the application in",N.createElement(R.rU,{"data-componentid":"".concat(T,"-link-email-templates-page"),onClick:function(){return b.m.push(h.$.getPaths().get("EMAIL_MANAGEMENT"))},external:!1},"email templates")," and other relevant locations are updated to reflect the application status accordingly.")))))};di.defaultProps={"data-componentid":"application-general-settings"};var pi=n(89608),mi=n(56514),fi=n(29903),vi=function(e){var t=e.oidcConfigurations,n=e["data-componentid"],i=(0,P.$)().t;return N.createElement("div",{"data-componentid":n},N.createElement(Ee.Z,{verticalAlign:"middle"},N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.par,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-componentid":"".concat(n,"-mtls-pushed-authorization-request-label")},i("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.pushedAuthorizationRequest"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==t?void 0:t.mtlsPushedAuthorizationRequestEndpoint,"data-componentid":"".concat(n,"-mtls-pushed-authorization-request-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.token,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-componentid":"".concat(n,"-mtls-token-label")},i("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.token"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==t?void 0:t.mtlsTokenEndpoint,"data-componentid":"".concat(n,"-mtls-token-readonly-input")})))))};vi.defaultProps={"data-componentid":"applications-help-panel-mtls-oidc-configs"};var gi=n(2292);function hi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Ei=gi.AsgardeoSPAClient.getInstance(),yi=function(e){var t,n=(0,P.$)().t,i=(0,U.I0)(),a=(0,U.v9)((function(e){return e.config.ui.features})),o=e.oidcConfigurations,r=e.templateId,l=e["data-testid"],c=hi((0,N.useState)(void 0),2),s=c[0],u=c[1];return(0,N.useEffect)((function(){void 0===s&&Ei.getOIDCServiceEndpoints().then((function(e){u({authorize:null==e?void 0:e.authorizationEndpoint,jwks:null==e?void 0:e.jwksUri,logout:null==e?void 0:e.endSessionEndpoint,oidcSessionIFrame:null==e?void 0:e.checkSessionIframe,revoke:null==e?void 0:e.revocationEndpoint,token:null==e?void 0:e.tokenEndpoint})})).catch((function(){i((0,I.V_)({description:n("applications:notifications.fetchOIDCServiceEndpoints.genericError.description"),level:C.QU.ERROR,message:n("applications:notifications.fetchOIDCServiceEndpoints.genericError.message")}))}))})),N.createElement(be.Z,null,N.createElement(Ee.Z,{verticalAlign:"middle"},N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.issuer,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-introspection-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.issuer"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.tokenEndpoint,"data-testid":"".concat(l,"-introspection-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.wellKnown,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-introspection-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.wellKnown"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.wellKnownEndpoint,"data-testid":"".concat(l,"-introspection-readonly-input")}))),r!==Qe.jo.M2M_APP_TEMPLATE_ID&&N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.authorize,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-authorize-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.authorize"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.authorizeEndpoint,"data-testid":"".concat(l,"-authorize-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.token,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-token-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.token"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.tokenEndpoint,"data-testid":"".concat(l,"-token-readonly-input")}))),r!==Qe.jo.M2M_APP_TEMPLATE_ID&&N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.userInfo,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-userInfo-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.userInfo"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.userEndpoint,"data-testid":"".concat(l,"-userInfo-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.introspect,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-introspection-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.introspection"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.introspectionEndpoint,"data-testid":"".concat(l,"-introspection-readonly-input")}))),r!==Qe.jo.M2M_APP_TEMPLATE_ID&&N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.jwks,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-jwks-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.jwks"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.jwksEndpoint,"data-testid":"".concat(l,"-jwks-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.revoke,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-token-revoke-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.revoke"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.tokenRevocationEndpoint,"data-testid":"".concat(l,"-token-revoke-readonly-input")}))),r!==Qe.jo.M2M_APP_TEMPLATE_ID&&N.createElement(N.Fragment,null,N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.logout,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-logout-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.endSession"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.endSessionEndpoint,"data-testid":"".concat(l,"-logout-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.par,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-pushed-authorization-request-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.pushedAuthorizationRequest"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.pushedAuthorizationRequestEndpoint,"data-testid":"".concat(l,"-pushed-authorization-request-readonly-input")})))),(null==a||null===(t=a.server)||void 0===t?void 0:t.enabled)&&N.createElement(N.Fragment,null,(r===Qe.jo.CUSTOM_APPLICATION_OIDC||r===Qe.jo.TEMPLATE_IDS.get("oidcWeb")||r===Qe.jo.TEMPLATE_IDS.get("spa"))&&N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,computer:6},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.sessionIframe,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(l,"-session-iframe-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.sessionIframe"))),N.createElement(Ee.Z.Column,{mobile:8,computer:10},N.createElement(R.OR,{value:null==o?void 0:o.sessionIframeEndpoint,"data-testid":"".concat(l,"-session-iframe-readonly-input")}))))))};yi.defaultProps={"data-testid":"applications-help-panel-oidc-configs"};var Ai=n(12887),Si=function(e){var t,n=e.samlConfigurations,i=e["data-testid"],a=(0,P.$)().t,o=Kn.h.getState().config.deployment.tenant;return N.createElement(be.Z,null,N.createElement(Ee.Z,{verticalAlign:"middle"},N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:5},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.issuer,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(i,"-issuer-label")},a("applications:helpPanel.tabs.start.content.samlConfigurations.labels.issuer"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:11},N.createElement(R.OR,{value:null==n?void 0:n.issuer,"data-testid":"".concat(i,"-issuer-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:5},N.createElement(R.dn,{icon:N.createElement(Ce.XT,{className:"icon"}),size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(i,"-sso-label")},a("applications:helpPanel.tabs.start.content.samlConfigurations.labels.sso"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:11},N.createElement(R.OR,{value:null==n?void 0:n.ssoUrl,"data-testid":"".concat(i,"-sso-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:5},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.logout,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(i,"-slo-label")},a("applications:helpPanel.tabs.start.content.samlConfigurations.labels.slo"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:11},N.createElement(R.OR,{value:null==n?void 0:n.sloUrl,"data-testid":"".concat(i,"-slo-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:5},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.destination,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(i,"-destination-url-label")},a("applications:helpPanel.tabs.start.content.samlConfigurations.labels.destinationURL"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:11},N.createElement(R.OR,{value:null==n||null===(t=n.destinationURLs)||void 0===t||null===(t=t.toString())||void 0===t?void 0:t.replace(/,/g,", "),"data-testid":"".concat(i,"-destination-url-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:5},N.createElement(R.dn,{icon:N.createElement(Ce.hb,{className:"icon"}),size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(i,"-artifact-resolution-url-label")},a("applications:helpPanel.tabs.start.content.samlConfigurations.labels.artifactResolutionUrl"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:11},N.createElement(R.OR,{value:null==n?void 0:n.artifactResolutionUrl,"data-testid":"".concat(i,"-artifact-resolution-url-readonly-input")}))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:5},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.certificate,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(i,"-certificate-label")},a("applications:helpPanel.tabs.start.content.samlConfigurations.labels.certificate"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:11},N.createElement(lt.Z,{"data-testid":"".concat(i,"-certificate-button"),className:"idp-certificate-download-button",basic:!0,size:"tiny",color:"orange",onClick:function(){return Ot.CertificateManagementUtils.exportCertificate(o,null==n?void 0:n.certificate)}},N.createElement(D.Z,{name:"download"}),a("applications:helpPanel.tabs.start.content.samlConfigurations.buttons.certificate")))),N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:5},N.createElement(R.dn,{icon:N.createElement(Ce.$l,{className:"icon"}),size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-testid":"".concat(i,"-metadata-label")},a("applications:helpPanel.tabs.start.content.samlConfigurations.labels.metadata"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:11},N.createElement(lt.Z,{"data-testid":"".concat(i,"-metadata-button"),basic:!0,size:"tiny",color:"orange",onClick:function(){var e=new Blob([null==n?void 0:n.metadata],{type:"text/xml"});(0,Ai.saveAs)(e,"SAML-Metadata.xml")}},N.createElement(D.Z,{name:"download"}),a("applications:helpPanel.tabs.start.content.samlConfigurations.buttons.metadata"))))))};Si.defaultProps={"data-testid":"applications-help-panel-saml-configs"};var Ci=n(80854),Ii=n(43939);function Oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ri(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ri(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var wi=function(e){var t=e["data-componentid"],n=(0,P.$)().t,i=(0,U.I0)(),a=Oi((0,N.useState)(void 0),2),o=a[0],r=a[1],l=(0,Ci.xR)(),c=l.data,s=l.isLoading,u=l.error;(0,N.useEffect)((function(){c instanceof Ii.u||u?d():c&&r({passiveStsUrl:c.passiveSTSUrl})}),[c]);var d=function(){i((0,I.V_)({description:n("wsFederationConfig:notifications.getConfiguration.error.description"),level:C.QU.ERROR,message:n("wsFederationConfig:notifications.getConfiguration.error.message")}))};return!s&&N.createElement(be.Z,null,N.createElement(Ee.Z,{verticalAlign:"middle"},N.createElement(Ee.Z.Row,{columns:2},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:5},N.createElement(R.dn,{icon:(0,fi.RO)().endpoints.issuer,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),N.createElement("label",{"data-componentid":"".concat(t,"-issuer-label")},n("applications:helpPanel.tabs.start.content.wsFedConfigurations.labels.passiveSTSUrl"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:11},N.createElement(R.OR,{value:null==o?void 0:o.passiveStsUrl,"data-componentid":"".concat(t,"-passive-sts-readonly-input")})))))};function Ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Li(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Li(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}wi.defaultProps={"data-componentid":"applications-help-panel-ws-federation-configs"};var _i=function(e){var t=e.appId,n=e.inboundProtocols,i=e.isOIDCConfigLoading,a=e.isSAMLConfigLoading,o=e.templateId,r=e["data-componentid"],l=(0,U.v9)((function(e){return e.application.oidcConfigurations})),c=(0,U.v9)((function(e){return e.application.samlConfigurations})),s=(0,P.$)().t,u=(0,R.fQ)().getLink,d=Ti((0,N.useState)(!1),2),p=d[0],m=d[1],f=Ti((0,N.useState)(!1),2),v=f[0],g=f[1],E=Ti((0,N.useState)(!1),2),y=E[0],A=E[1],S=Ti((0,N.useState)(!1),2),C=S[0],I=S[1],O=void 0!==l.mtlsTokenEndpoint&&o!==Qe.jo.M2M_APP_TEMPLATE_ID;return(0,N.useEffect)((function(){null!=n&&n.length>0&&n.map((function(e){"oauth2"==e.type&&(m(!0),I(i)),"samlsso"==e.type&&(g(!0),I(a)),"passivests"==e.type&&A(!0)}))}),[n]),(0,N.useEffect)((function(){o===Qe.jo.CUSTOM_APPLICATION_PASSIVE_STS&&A(!0)}),[o]),C?N.createElement(R.pJ,{padded:"very"},N.createElement(R.pO,{inline:"centered",active:!0})):N.createElement(R.pJ,{loading:C,padded:"very","data-componentid":r,"data-testid":r},N.createElement(Ee.Z,{className:"form-container with-max-width"},N.createElement(Ee.Z.Row,null,N.createElement(Ee.Z.Column,null,(p||o===pi.id||o===Qe.jo.CUSTOM_APPLICATION_OIDC)&&N.createElement(N.Fragment,null,N.createElement(R.X6,{ellipsis:!0,as:"h4"},s("applications:edit.sections.info.oidcHeading")),N.createElement(R.X6,{as:"h6",color:"grey",compact:!0},s("applications:edit.sections.info.oidcSubHeading"),N.createElement(R.eb,{link:o===mi.id?u("develop.applications.editApplication.singlePageApplication.info.learnMore"):u("develop.applications.editApplication.oidcApplication.info.learnMore")},s("common:learnMore"))),N.createElement(ge.Z,{hidden:!0}),N.createElement(yi,{oidcConfigurations:l,templateId:o}),ue.tZ.advancedConfigurations.showMtlsAliases&&O&&N.createElement(N.Fragment,null,N.createElement(R.X6,{ellipsis:!0,as:"h4"},s("applications:edit.sections.info.mtlsOidcHeading")),N.createElement(R.X6,{as:"h6",color:"grey",compact:!0},s("applications:edit.sections.info.mtlsOidcSubHeading"),"Navigate to",N.createElement(R.rU,{external:!1,onClick:function(){b.m.push({pathname:h.$.getPaths().get("APPLICATION_EDIT").replace(":id",t),search:"?"+Qe.jo.IS_PROTOCOL+"=true"})}}," protocol "),"tab to configure MTLS and certificate token binding."),N.createElement(ge.Z,{hidden:!0}),N.createElement(vi,{oidcConfigurations:l,templateId:o}))),p&&v?N.createElement(N.Fragment,null,N.createElement(ge.Z,{className:"x2",hidden:!0})):null,(v||o===Qe.jo.CUSTOM_APPLICATION_SAML)&&N.createElement(N.Fragment,null,N.createElement(R.X6,{ellipsis:!0,as:"h4"},s("applications:edit.sections.info.samlHeading")),N.createElement(R.X6,{as:"h6",color:"grey",compact:!0},s("applications:edit.sections.info.samlSubHeading"),N.createElement(R.eb,{link:u("develop.applications.editApplication.samlApplication.info.learnMore")},s("common:learnMore"))),N.createElement(ge.Z,{hidden:!0}),N.createElement(Si,{samlConfigurations:c})),y&&N.createElement(N.Fragment,null,N.createElement(R.X6,{ellipsis:!0,as:"h4"},s("applications:edit.sections.info.wsFedHeading")),N.createElement(R.X6,{as:"h6",color:"grey",compact:!0},s("applications:edit.sections.info.wsFedSubHeading"),N.createElement(R.eb,{link:u("develop.applications.editApplication.wsFedApplication.info.learnMore")},s("common:learnMore"))),N.createElement(ge.Z,{hidden:!0}),N.createElement(wi,null))))))};_i.defaultProps={"data-componentid":"application-server-endpoints"};var Ni=n(23658),Pi=n(48704);function Zi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ui(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ui(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var ji="application-provisioning-configuration-form",Di=function(e){var t,n,i,a,o,r,l,c,s,u=e.config,d=e.onSubmit,p=e.readOnly,m=e.isSubmitting,f=e["data-testid"],v=(0,U.v9)((function(e){var t,n;return null!==(t=null==e||null===(n=e.config)||void 0===n||null===(n=n.ui)||void 0===n?void 0:n.primaryUserStoreDomainName)&&void 0!==t?t:Pi.w.primaryUserstoreName})),g=(0,P.$)().t,h=(0,me.z)().isSuperOrganization,b=(0,Un.Z)(),E=b.isLoading,y=b.isUserStoreReadOnly,A=b.userStoresList,S=Zi((0,N.useState)(!1),2),C=S[0],I=S[1],O=(0,N.useMemo)((function(){var e=[{key:-1,text:v,value:v}];return p||h()&&!E&&(null==A?void 0:A.length)>0&&A.forEach((function(t,n){var i=y(t.name),a=t.enabled;if(t.name.toUpperCase()!==Pi.w.primaryUserstoreName&&!i&&a){var o={key:n,text:t.name,value:t.name};e.push(o)}})),e}),[E,A]);(0,N.useEffect)((function(){var e,t;null!=u&&null!==(e=u.inboundProvisioning)&&void 0!==e&&e.proxyMode&&I(null==u||null===(t=u.inboundProvisioning)||void 0===t?void 0:t.proxyMode)}),[u]);var R=function(e){var t={provisioningConfigurations:{inboundProvisioning:{provisioningUserstoreDomain:e.provisioningUserstoreDomain,proxyMode:!!e.proxyMode}}};d(t)};return N.createElement(qe.l0,{id:ji,uncontrolledForm:!1,onSubmit:function(e){R(e)}},N.createElement(qe.gN.CheckboxLegacy,{ariaLabel:"Proxy mode",name:"proxyMode",label:g("applications:forms.provisioningConfig.fields.proxyMode.label"),required:!1,value:null!=u&&null!==(t=u.inboundProvisioning)&&void 0!==t&&t.proxyMode?["modeOn"]:[],listen:function(e){return I(e)},readOnly:p,"data-testid":"".concat(f,"-proxy-mode-checkbox"),hint:g("applications:forms.provisioningConfig.fields.proxyMode.hint")}),p?N.createElement(qe.gN.Input,{ariaLabel:"Provisioning userstore domain",name:"provisioningUserstoreDomain",inputType:"text",minLength:null,maxLength:null,label:g("applications:forms.provisioningConfig.fields.userstoreDomain.label"),required:!1,default:(null==O?void 0:O.length)>0&&(null===(n=O[0])||void 0===n?void 0:n.value),value:null!==(i=null==u||null===(a=u.inboundProvisioning)||void 0===a?void 0:a.provisioningUserstoreDomain)&&void 0!==i?i:null===(o=O[0])||void 0===o?void 0:o.value,disabled:C,readOnly:p,"data-testid":"".concat(f,"-provisioning-userstore-domain-input"),hint:g("applications:forms.provisioningConfig.fields.userstoreDomain.hint")}):N.createElement(qe.gN.Dropdown,{ariaLabel:"Provisioning userstore domain",name:"provisioningUserstoreDomain",label:g("applications:forms.provisioningConfig.fields.userstoreDomain.label"),required:!1,default:(null==O?void 0:O.length)>0&&(null===(r=O[0])||void 0===r?void 0:r.value),value:null!==(l=null==u||null===(c=u.inboundProvisioning)||void 0===c?void 0:c.provisioningUserstoreDomain)&&void 0!==l?l:null===(s=O[0])||void 0===s?void 0:s.value,options:O,disabled:C,readOnly:p,"data-testid":"".concat(f,"-provisioning-userstore-domain-dropdown"),hint:g("applications:forms.provisioningConfig.fields.userstoreDomain.hint")}),N.createElement(qe.gN.Button,{form:ji,size:"small",buttonType:"primary_btn",ariaLabel:"Update button",name:"update-button","data-testid":"".concat(f,"-submit-button"),disabled:m,loading:m,label:g("common:update"),hidden:p}))};function ki(e){return function(e){if(Array.isArray(e))return Hi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||xi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xi(e,t){if(e){if("string"==typeof e)return Hi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Di.defaultProps={"data-testid":"application-inbound-provisioning-configurations-form"};var Fi=function(e){var t,n=e.appId,i=e.provisioningConfigurations,a=e.onUpdate,o=e.featureConfig,r=e.defaultActiveIndexes,l=e.readOnly,c=e["data-testid"],s=(0,P.$)().t,u=(0,U.I0)(),d=(0,p.EV)(null==o||null===(t=o.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),m=Mi((0,N.useState)(r),2),f=m[0],v=m[1],g=Mi((0,N.useState)(!1),2),h=g[0],b=g[1];return N.createElement(N.Fragment,null,N.createElement(R.X6,{as:"h4"},s("applications:edit.sections.provisioning.inbound.heading")),N.createElement(R.X6,{subHeading:!0,as:"h6"},s("applications:edit.sections.provisioning.inbound.subHeading")),N.createElement(ge.Z,{hidden:!0}),N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,null,N.createElement(Ee.Z.Column,null,N.createElement(Ni.U,{globalActions:[],authenticators:[{content:N.createElement(Di,{config:i,onSubmit:function(e){b(!0),(0,k.TH)(n,e).then((function(){u((0,I.V_)({description:s("applications:notifications.updateInboundProvisioningConfig.success.description"),level:C.QU.SUCCESS,message:s("applications:notifications.updateInboundProvisioningConfig.success.message")})),a(n)})).catch((function(){u((0,I.V_)({description:s("applications:notifications.updateInboundProvisioningConfig.genericError.description"),level:C.QU.ERROR,message:s("applications:notifications.updateInboundProvisioningConfig.genericError.message")}))})).finally((function(){b(!1)}))},readOnly:l||!d,"data-testid":"".concat(c,"-form"),isSubmitting:h}),id:"scim",title:"SCIM"}],accordionActiveIndexes:f,accordionIndex:0,handleAccordionOnClick:function(e,t){if(t){var n=ki(f);if(n.includes(t.accordionIndex)){var i=n.indexOf(t.accordionIndex);n.splice(i,1)}else n.push(t.accordionIndex);v(n)}},"data-testid":"".concat(c,"-inbound-connector-accordion")})))))};Fi.defaultProps={"data-testid":"application-inbound-provisioning-configurations",defaultActiveIndexes:[-1]};var Vi=n(46448);function zi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Wi=function(e){var t=e.initialValues,n=e.idpList,i=e.triggerSubmit,a=e.onSubmit,o=e.isEdit,r=e.readOnly,l=e.isSubmitting,c=e["data-testid"],s=(0,P.$)().t,u=zi((0,N.useState)([]),2),d=u[0],p=u[1],m=zi((0,N.useState)(void 0),2),f=m[0],v=m[1],g=zi((0,N.useState)(),2),h=g[0],b=g[1],E=zi((0,N.useState)(null==t?void 0:t.blocking),2),y=E[0],A=E[1],S=zi((0,N.useState)(null==t?void 0:t.jit),2),C=S[0],I=S[1],w=zi((0,N.useState)(null==t?void 0:t.rules),2),T=w[0],L=w[1],_=zi((0,N.useState)(null==t?void 0:t.connector),2),Z=_[0],U=_[1],j=(0,ce.Z)().UIConfig;(0,N.useEffect)((function(){if(n&&null!=t&&t.idp){var e=null==n?void 0:n.find((function(e){return e.name===(null==t?void 0:t.idp)}));b(null==e?void 0:e.id)}}),[n]),(0,N.useEffect)((function(){if(n){var e=[],t={key:-1,text:"",value:""};n.map((function(n,i){t={key:i,text:n.name,value:n.id},e.push(t)})),p(e)}}),[n]),(0,N.useEffect)((function(){if(h){var e=[],t={key:-1,text:"",value:""};(0,Vi.Wv)(h).then((function(n){n.provisioning.outboundConnectors.connectors.map((function(n,i){n.isEnabled&&(t={key:i,text:n.name,value:n.name},e.push(t))})),v(e)}))}}),[h]);return N.createElement(O.Es,{onSubmit:function(e){return a(function(e){var t=d.find((function(e){return e.value===h})).text;return{blocking:y||!!e.get("blocking").includes("blocking"),connector:Z,idp:t,jit:C||!!e.get("jit").includes("jit"),rules:T||!!e.get("blocking").includes("blocking")}}(e))},submitState:i&&i},N.createElement(Ee.Z,null,!o&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:10},N.createElement(O.gN,{type:"dropdown",label:s("applications:forms.outboundProvisioning.fields.idp.label"),placeholder:s("applications:forms.outboundProvisioning.fields.idp.placeholder"),name:"idp",children:d,requiredErrorMessage:s("applications:forms.outboundProvisioning.fields.idp.validations.empty"),readOnly:r,required:!1,value:null==t?void 0:t.idp,listen:function(e){b(e.get("idp").toString())},"data-testid":"".concat(c,"-idp-dropdown")}))),N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:10},N.createElement(O.gN,{type:"dropdown",label:s("applications:forms.outboundProvisioning.fields.connector.label"),placeholder:s("applications:forms.outboundProvisioning.fields.connector.placeholder"),name:"connector",children:f,requiredErrorMessage:s("applications:forms.outboundProvisioning.fields.connector.validations.empty"),readOnly:r,required:!0,value:null==t?void 0:t.connector,listen:function(e){U(e.get("connector").toString())},"data-testid":"".concat(c,"-provisioning-connector-dropdown")}),(null==f?void 0:f.length)<=0&&N.createElement(R.kW,{icon:"warning sign"},s("applications:edit.sections.provisioning.outbound.addIdpWizard.errors.noProvisioningConnector")))),(null==j?void 0:j.isXacmlConnectorEnabled)&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:10},N.createElement(O.gN,{name:"rules",required:!1,requiredErrorMessage:"",type:"checkbox",children:[{label:s("applications:forms.outboundProvisioning.fields.rules.label"),value:"rules"}],value:null!=t&&t.rules?["rules"]:[],listen:function(e){L(e.get("rules").includes("rules"))},readOnly:r,"data-testid":"".concat(c,"-rules-checkbox")}),N.createElement(R.kW,null,s("applications:forms.outboundProvisioning.fields.rules.hint")))),N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:10},N.createElement(O.gN,{name:"blocking",required:!1,requiredErrorMessage:"",type:"checkbox",children:[{label:s("applications:forms.outboundProvisioning.fields.blocking.label"),value:"blocking"}],readOnly:r,value:null!=t&&t.blocking?["blocking"]:[],listen:function(e){A(e.get("blocking").includes("blocking"))},"data-testid":"".concat(c,"-blocking-checkbox")}),N.createElement(R.kW,null,s("applications:forms.outboundProvisioning.fields.blocking.hint")))),N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:10},N.createElement(O.gN,{name:"jit",required:!1,requiredErrorMessage:"",type:"checkbox",children:[{label:s("applications:forms.outboundProvisioning.fields.jit.label"),value:"jit"}],value:null!=t&&t.jit?["jit"]:[],listen:function(e){I(e.get("jit").includes("jit"))},readOnly:r,"data-testid":"".concat(c,"-jit-checkbox")}),N.createElement(R.kW,null,s("applications:forms.outboundProvisioning.fields.jit.hint")))),o&&!r&&N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:10},N.createElement(R.KM,{type:"submit",size:"small",className:"form-button","data-testid":"".concat(c,"-submit-button"),loading:l,disabled:l},s("common:update"))))))};function qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Wi.defaultProps={"data-testid":"application-outbound-provisioning-wizard-idp-form"};var Bi=function(e){var t=e.application,n=e.closeWizard,i=e.currentStep,a=e.onUpdate,o=e["data-testid"],r=(0,P.$)().t,l=(0,U.I0)(),c=qi((0,O.cC)(),2),s=c[0],u=c[1],d=qi((0,N.useState)(void 0),2),p=d[0],m=d[1],f=qi((0,N.useState)(i),2),v=f[0],g=f[1],h=qi((0,N.useState)(void 0),2),b=h[0],E=h[1],y=qi((0,N.useState)(!1),2),A=y[0],S=y[1];(0,N.useEffect)((function(){void 0!==p&&(g(v-1),m(void 0))}),[p]),(0,N.useEffect)((function(){b||(0,Vi.E6)().then((function(e){E(e.identityProviders)}))}),[]);var w=function(){if(0===v)u()},T=function(e){var i;if(null!=t&&null!==(i=t.provisioningConfigurations)&&void 0!==i&&i.outboundProvisioningIdps.find((function(t){return t.connector===e.connector&&t.idp===e.idp})))return l((0,I.V_)({description:r("applications:notifications.updateOutboundProvisioning.genericError.description"),level:C.QU.ERROR,message:r("applications:notifications.updateOutboundProvisioning.genericError.message")})),void n();!function(e,i){S(!0),(0,k.TH)(e,i).then((function(){l((0,I.V_)({description:r("applications:notifications.updateApplication.success.description"),level:C.QU.SUCCESS,message:r("applications:notifications.updateApplication.success.message")})),a(t.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?l((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:r("applications:notifications.updateApplication.error.message")})):l((0,I.V_)({description:r("applications:notifications.updateApplication.genericError.description"),level:C.QU.ERROR,message:r("applications:notifications.updateApplication.genericError.message")}))})).finally((function(){S(!1),n()}))}(t.id,function(e){var n,i=null==t||null===(n=t.provisioningConfigurations)||void 0===n?void 0:n.outboundProvisioningIdps;return i.push(e),{provisioningConfigurations:{outboundProvisioningIdps:i}}}(e))},L=[{content:N.createElement(Wi,{initialValues:null,triggerSubmit:s,onSubmit:function(e){T(e)},idpList:b,"data-testid":"".concat(o,"-form"),isSubmitting:A}),icon:(0,fi.jK)().general,title:r("applications:edit.sections.provisioning.outbound.addIdpWizard.steps.details")}];return N.createElement(mt.Z,{open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:n,"data-testid":o,closeOnDimmerClick:!1,closeOnEscape:!0},N.createElement(mt.Z.Header,{className:"wizard-header"},r("applications:edit.sections.provisioning.outbound.addIdpWizard.heading"),N.createElement(R.X6,{as:"h6"},r("applications:edit.sections.provisioning.outbound.addIdpWizard.subHeading"))),N.createElement(mt.Z.Content,{className:"steps-container"},N.createElement(R.Rg.Group,{current:v,"data-testid":"".concat(o,"-steps")},L.map((function(e,t){return N.createElement(R.Rg.Step,{key:t,icon:e.icon,title:e.title,"data-testid":"".concat(o,"-step-").concat(t)})})))),N.createElement(mt.Z.Content,{className:"content-container",scrolling:!0},L[v].content),N.createElement(mt.Z.Actions,null,N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,{column:1},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:8},N.createElement(R.Qj,{floated:"left",onClick:function(){return n()},"data-testid":"".concat(o,"-cancel-button")},r("common:cancel"))),N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:8},v<L.length-1&&N.createElement(R.KM,{floated:"right",onClick:w,"data-testid":"".concat(o,"-next-button")},r("common:next"),N.createElement(D.Z,{name:"arrow right"})),v===L.length-1&&N.createElement(R.KM,{floated:"right",onClick:w,"data-testid":"".concat(o,"-finish-button"),loading:A,disabled:A},r("common:finish")),v>0&&N.createElement(R.Qj,{floated:"right",onClick:function(){m(v)},"data-testid":"".concat(o,"-previous-button")},N.createElement(D.Z,{name:"arrow left"}),r("common:previous")))))))};function $i(e){return function(e){if(Array.isArray(e))return Xi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Yi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ki(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||Yi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yi(e,t){if(e){if("string"==typeof e)return Xi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xi(e,t):void 0}}function Xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Bi.defaultProps={currentStep:0,"data-testid":"outbound-provisioning-idp-create-wizard"};var Ji=function(e){var t,n,i=e.application,a=e.onUpdate,o=e.readOnly,r=e.defaultActiveIndexes,l=e["data-testid"],c=(0,P.$)().t,s=(0,U.I0)(),u=Ki((0,N.useState)(!1),2),d=u[0],p=u[1],m=Ki((0,N.useState)(!1),2),f=m[0],v=m[1],g=Ki((0,N.useState)(!1),2),h=g[0],b=g[1],E=Ki((0,N.useState)(void 0),2),y=E[0],A=E[1],S=Ki((0,N.useState)(r),2),O=S[0],w=S[1],T=Ki((0,R.ZK)(),3),L=T[0],_=T[1],j=T[2],M=Ki((0,N.useState)(void 0),2),x=M[0],H=M[1];(0,N.useEffect)((function(){y||(0,Vi.E6)().then((function(e){A(e.identityProviders)}))}),[]);var F=function(e,t){if(t){var n=$i(O);if(n.includes(t.accordionIndex)){var i=n.indexOf(t.accordionIndex);n.splice(i,1)}else n.push(t.accordionIndex);w(n)}},V=function(e){!function(e,t){b(!0),(0,k.TH)(e,t).then((function(){s((0,I.V_)({description:c("applications:notifications.updateApplication.success.description"),level:C.QU.SUCCESS,message:c("applications:notifications.updateApplication.success.message")})),a(i.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?s((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:c("applications:notifications.updateApplication.error.message")})):s((0,I.V_)({description:c("applications:notifications.updateApplication.genericError.description"),level:C.QU.ERROR,message:c("applications:notifications.updateApplication.genericError.message")}))})).finally((function(){b(!1)}))}(i.id,function(e){var t,n=null==i||null===(t=i.provisioningConfigurations)||void 0===t?void 0:t.outboundProvisioningIdps,a=n.find((function(t){return t.idp===e.idp&&t.connector===e.connector}));return n.splice(n.indexOf(a),1),n.push(e),{provisioningConfigurations:{outboundProvisioningIdps:n}}}(e))};return N.createElement(N.Fragment,null,N.createElement(R.X6,{as:"h4"},c("applications:edit.sections.provisioning.outbound.heading")),N.createElement(R.X6,{subHeading:!0,as:"h6"},c("applications:edit.sections.provisioning.outbound.subHeading")),N.createElement(ge.Z,{hidden:!0}),(null==i||null===(t=i.provisioningConfigurations)||void 0===t||null===(t=t.outboundProvisioningIdps)||void 0===t?void 0:t.length)>0?N.createElement(Ee.Z,null,!o&&N.createElement(Ee.Z.Row,null,N.createElement(Ee.Z.Column,null,N.createElement(R.KM,{floated:"right",onClick:function(){return p(!0)},"data-testid":"".concat(l,"-new-idp-button")},N.createElement(D.Z,{name:"add"}),c("applications:edit.sections.provisioning.outbound.actions.addIdp")))),N.createElement(Ee.Z.Row,null,N.createElement(Ee.Z.Column,null,null==i||null===(n=i.provisioningConfigurations)||void 0===n||null===(n=n.outboundProvisioningIdps)||void 0===n?void 0:n.map((function(e,t){return N.createElement(Ni.U,{key:e.idp,globalActions:!o&&[{icon:"trash alternate",onClick:function(){v(!0),H(e)},type:"icon"}],authenticators:[{content:N.createElement(Wi,{initialValues:e,triggerSubmit:null,onSubmit:function(e){V(e)},idpList:y,isEdit:!0,"data-testid":"".concat(l,"-form"),isSubmitting:h}),id:null==e?void 0:e.idp,title:null==e?void 0:e.idp}],accordionActiveIndexes:O,accordionIndex:t,handleAccordionOnClick:F,"data-testid":"".concat(l,"-outbound-connector-accordion")})}))))):N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,null,N.createElement(Ee.Z.Column,{width:16},N.createElement(ct.Z,null,N.createElement(R.$J,{title:c("applications:placeholders.emptyOutboundProvisioningIDPs.title"),image:(0,We.jF)().emptyList,subtitle:[c("applications:placeholders.emptyOutboundProvisioningIDPs.subtitles")],imageSize:"tiny",action:!o&&N.createElement(R.KM,{onClick:function(){return p(!0)}},N.createElement(D.Z,{name:"add"}),c("applications:placeholders.emptyOutboundProvisioningIDPs.action"))}))))),x&&N.createElement(R.cV,{onClose:function(){return v(!1)},type:"negative",open:f,assertion:null==x?void 0:x.idp,assertionHint:N.createElement("p",null,N.createElement(Z.c,{i18nKey:"applications:confirmations.deleteOutboundProvisioningIDP.assertionHint",tOptions:{name:null==x?void 0:x.idp}},"Please type ",N.createElement("strong",null,null==x?void 0:x.idp)," to confirm.")),assertionType:"input",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){v(!1),_(null)},onPrimaryActionClick:function(){return function(e){var t,n=null==i||null===(t=i.provisioningConfigurations)||void 0===t?void 0:t.outboundProvisioningIdps,o=$i(n);o.splice(n.indexOf(e),1);var r={provisioningConfigurations:{outboundProvisioningIdps:o}};(0,k.TH)(i.id,r).then((function(){s((0,I.V_)({description:c("applications:notifications.updateApplication.success.description"),level:C.QU.SUCCESS,message:c("applications:notifications.updateApplication.success.message")})),a(i.id),v(!1)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?s(_({description:e.response.data.description,level:C.QU.ERROR,message:c("applications:notifications.updateApplication.error.message")})):s(_({description:c("applications:notifications.updateApplication.genericError.description"),level:C.QU.ERROR,message:c("applications:notifications.updateApplication.genericError.message")}))}))}(x)},"data-testid":"".concat(l,"-connector-delete-confirmation-modal"),closeOnDimmerClick:!1},N.createElement(R.cV.Header,{"data-testid":"".concat(l,"-connector-delete-confirmation-modal-header")},c("applications:confirmations.deleteOutboundProvisioningIDP.header")),N.createElement(R.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(l,"-connector-delete-confirmation-modal-message")},c("applications:confirmations.deleteOutboundProvisioningIDP.message")),N.createElement(R.cV.Content,{"data-testid":"".concat(l,"-connector-delete-confirmation-modal-content")},N.createElement("div",{className:"modal-alert-wrapper"}," ",L&&j),c("applications:confirmations.deleteOutboundProvisioningIDP.content"))),d&&N.createElement(Bi,{closeWizard:function(){return p(!1)},application:i,onUpdate:a,"data-testid":"".concat(l,"-idp-create-wizard")}))};Ji.defaultProps={"data-testid":"application-outbound-provisioning-configurations",defaultActiveIndexes:[-1]};var ea=function(e){var t,n=e.application,i=e.featureConfig,a=e.provisioningConfigurations,o=e.onUpdate,r=e.readOnly,l=e["data-componentid"],c=(0,N.useMemo)((function(){var e;return(null==n||null===(e=n.provisioningConfigurations)||void 0===e||null===(e=e.outboundProvisioningIdps)||void 0===e?void 0:e.length)>0}),[n]),s=(0,p.EV)(null==i||null===(t=i.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update);return N.createElement(R.pJ,{padded:"very"},N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,{columns:1},N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:12},N.createElement(Fi,{appId:n.id,provisioningConfigurations:a,onUpdate:o,readOnly:r||!s,"data-testid":"".concat(l,"-inbound-configuration")}))),c&&N.createElement(Ee.Z.Row,null,N.createElement(Ee.Z.Column,{mobile:16,tablet:16,computer:12},N.createElement(Ji,{application:n,provisioningConfigurations:a,onUpdate:o,readOnly:r||!s,"data-testid":"".concat(l,"-outbound-configuration")})))))};ea.defaultProps={"data-componentid":"provisioning-settings"};var ta=gi.AsgardeoSPAClient.getInstance().httpRequest.bind(gi.AsgardeoSPAClient.getInstance()),na=n(90302),ia=function(e){return e.FAILED="FAILED",e.SUCCESS="SUCCESS",e.IDLE="IDLE",e.IN_PROGRESS="IN_PROGRESS",e.PARTIALLY_COMPLETED="PARTIALLY_COMPLETED",e}({});function aa(e){return aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aa(e)}function oa(){oa=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,r=Object.create(o.prototype),l=new _(i||[]);return a(r,"_invoke",{value:R(e,n,l)}),r}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",f="executing",v="completed",g={};function h(){}function b(){}function E(){}var y={};s(y,r,(function(){return this}));var A=Object.getPrototypeOf,S=A&&A(A(N([])));S&&S!==n&&i.call(S,r)&&(y=S);var C=E.prototype=h.prototype=Object.create(y);function I(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(a,o,r,l){var c=d(e[a],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==aa(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,r,l)}),(function(e){n("throw",e,r,l)})):t.resolve(u).then((function(e){s.value=e,r(s)}),(function(e){return n("throw",e,r,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return o=o?o.then(a,a):a()}})}function R(t,n,i){var a=p;return function(o,r){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===o)throw r;return{value:e,done:!0}}for(i.method=o,i.arg=r;;){var l=i.delegate;if(l){var c=w(l,i);if(c){if(c===g)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===p)throw a=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=f;var s=d(t,n,i);if("normal"===s.type){if(a=i.done?v:m,s.arg===g)continue;return{value:s.arg,done:i.done}}"throw"===s.type&&(a=v,i.method="throw",i.arg=s.arg)}}}function w(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=d(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(aa(t)+" is not iterable")}return b.prototype=E,a(C,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:b,configurable:!0}),b.displayName=s(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},I(O.prototype),s(O.prototype,l,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,i,a,o){void 0===o&&(o=Promise);var r=new O(u(e,n,i,a),o);return t.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},I(C),s(C,c,"Generator"),s(C,r,(function(){return this})),s(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=N,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return l.type="throw",l.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],l=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var c=i.call(r,"catchLoc"),s=i.call(r,"finallyLoc");if(c&&s){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;L(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:N(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function ra(e,t,n,i,a,o,r){try{var l=e[o](r),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,a)}function la(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){ra(o,i,a,r,l,"next",e)}function l(e){ra(o,i,a,r,l,"throw",e)}r(void 0)}))}}function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var ua=n(37746),da=n(92529);const pa=function(e,t){var n={headers:{Accept:"application/json","Content-Type":"application/json"},method:C.f2.GET,url:"".concat(Kn.h.getState().config.endpoints.applications,"/").concat(e,"/share")},i=(0,$n.Z)(t?n:null,{shouldRetryOnError:!1}),a=i.data,o=i.error,r=i.isValidating;return{data:a,error:o,isLoading:i.isLoading,isValidating:r,mutate:i.mutate}};var ma=n(55495),fa=n(91009),va=n(719);function ga(e){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(e)}function ha(){ha=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,r=Object.create(o.prototype),l=new _(i||[]);return a(r,"_invoke",{value:R(e,n,l)}),r}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",f="executing",v="completed",g={};function h(){}function b(){}function E(){}var y={};s(y,r,(function(){return this}));var A=Object.getPrototypeOf,S=A&&A(A(N([])));S&&S!==n&&i.call(S,r)&&(y=S);var C=E.prototype=h.prototype=Object.create(y);function I(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(a,o,r,l){var c=d(e[a],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==ga(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,r,l)}),(function(e){n("throw",e,r,l)})):t.resolve(u).then((function(e){s.value=e,r(s)}),(function(e){return n("throw",e,r,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return o=o?o.then(a,a):a()}})}function R(t,n,i){var a=p;return function(o,r){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===o)throw r;return{value:e,done:!0}}for(i.method=o,i.arg=r;;){var l=i.delegate;if(l){var c=w(l,i);if(c){if(c===g)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===p)throw a=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=f;var s=d(t,n,i);if("normal"===s.type){if(a=i.done?v:m,s.arg===g)continue;return{value:s.arg,done:i.done}}"throw"===s.type&&(a=v,i.method="throw",i.arg=s.arg)}}}function w(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=d(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(ga(t)+" is not iterable")}return b.prototype=E,a(C,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:b,configurable:!0}),b.displayName=s(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},I(O.prototype),s(O.prototype,l,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,i,a,o){void 0===o&&(o=Promise);var r=new O(u(e,n,i,a),o);return t.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},I(C),s(C,c,"Generator"),s(C,r,(function(){return this})),s(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=N,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return l.type="throw",l.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],l=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var c=i.call(r,"catchLoc"),s=i.call(r,"finallyLoc");if(c&&s){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;L(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:N(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function ba(e,t,n,i,a,o,r){try{var l=e[o](r),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,a)}function Ea(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){ba(o,i,a,r,l,"next",e)}function l(e){ba(o,i,a,r,l,"throw",e)}r(void 0)}))}}function ya(e){return function(e){if(Array.isArray(e))return Ra(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(n),!0).forEach((function(t){Ca(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ca(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ga(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=ga(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ga(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||Oa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oa(e,t){if(e){if("string"==typeof e)return Ra(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ra(e,t):void 0}}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var wa=function(e){return e[e.SHARE_ALL=0]="SHARE_ALL",e[e.SHARE_SELECTED=1]="SHARE_SELECTED",e[e.UNSHARE=2]="UNSHARE",e}(wa||{}),Ta=function(e){var t=e.application,n=e.triggerApplicationShare,i=e.onApplicationSharingCompleted,a=e["data-componentid"],o=e.readOnly,r=e.isSharingInProgress,l=e.operationStatus,c=e.onOperationStarted,s=(0,U.I0)(),u=(0,P.$)().t,d=(0,U.v9)((function(e){return e.organization.organization})),p=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.applications})),m=(0,S.cr)(p,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_SHARED_ACCESS_STATUS")),f=Ia((0,N.useState)([]),2),v=f[0],g=f[1],h=Ia((0,N.useState)([]),2),b=h[0],E=h[1],y=Ia((0,N.useState)([]),2),A=y[0],O=y[1],w=Ia((0,N.useState)(wa.UNSHARE),2),T=w[0],L=w[1],_=Ia((0,N.useState)(!1),2),Z=_[0],j=_[1],D=(0,ua.Z)().isOrganizationManagementEnabled,k=Ia((0,N.useState)(!1),2),M=k[0],x=k[1],H=Ia((0,N.useState)(!0),2),F=H[0],V=H[1],z=Ia((0,N.useState)(""),2),G=z[0],W=z[1],q=Ia((0,N.useState)(null),2),Q=q[0],B=q[1],$=Ia((0,N.useState)({after:null,limit:15,shouldFetch:!0}),2),K=$[0],Y=$[1],X="name co ",J=(0,da.Z)(D&&K.shouldFetch,K.filter,K.limit,K.after,null,!0,!1),ee=J.data,te=J.isLoading,ne=J.isValidating,ie=J.error,ae=pa(null==t?void 0:t.id,D),oe=ae.data,re=ae.isLoading,le=ae.isValidating,ce=ae.error,se=ae.mutate,ue=(0,N.useMemo)((function(){return!!D&&(re||le)}),[re,le]);(0,N.useEffect)((function(){l===ia.PARTIALLY_COMPLETED&&(null==i||i())}),[l,i]),(0,N.useEffect)((function(){var e;if(ee&&!te&&!ne){Y((function(e){return Sa(Sa({},e),{},{shouldFetch:!1})}));var t=ee.organizations;g((function(e){return[].concat(ya(e),ya(t||[]))}));var n=!1;null==ee||null===(e=ee.links)||void 0===e||e.forEach((function(e){if("next"===e.rel){var t=e.href.split("after=")[1];B(t),V(!!t),n=!0}})),n||(B(""),V(!1))}}),[ee]),(0,N.useEffect)((function(){null!=oe&&oe.organizations?E(oe.organizations):E([])}),[oe]),(0,N.useEffect)((function(){var e,t,n,i,a;ie&&(null!=ie&&null!==(e=ie.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?s((0,I.V_)({description:null!==(t=null==ie||null===(n=ie.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:u("organizations:notifications.getOrganizationList.error.description"),level:C.QU.ERROR,message:null!==(i=null==ie||null===(a=ie.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)&&void 0!==i?i:u("organizations:notifications.getOrganizationList.error.message")})):s((0,I.V_)({description:u("organizations:notifications.getOrganizationList.genericError.description"),level:C.QU.ERROR,message:u("organizations:notifications.getOrganizationList.genericError.message")})))}),[ie]),(0,N.useEffect)((function(){var e,t,n,i,a;ce&&(null!=ce&&null!==(e=ce.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?s((0,I.V_)({description:null!==(t=null==ce||null===(n=ce.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:u("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.description"),level:C.QU.ERROR,message:null!==(i=null==ce||null===(a=ce.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)&&void 0!==i?i:u("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.message")})):s((0,I.V_)({description:u("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.description"),level:C.QU.ERROR,message:u("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.message")})))}),[ce]),(0,N.useEffect)((function(){return O(b||[])}),[b]),(0,N.useEffect)((function(){var e;if(t){var n,i,a=null==t||null===(e=t.advancedConfigurations)||void 0===e||null===(e=e.additionalSpProperties)||void 0===e?void 0:e.filter((function(e){return"shareWithAllChildren"===(null==e?void 0:e.name)}));if(a&&0!==a.length)j(!!JSON.parse(null===(n=a[0])||void 0===n?void 0:n.value)&&JSON.parse(null===(i=a[0])||void 0===i?void 0:i.value));else j(!1)}}),[t]),(0,N.useEffect)((function(){Z?L(wa.SHARE_ALL):(null==b?void 0:b.length)>0&&!Z?L(wa.SHARE_SELECTED):b&&0!==(null==b?void 0:b.length)||Z||L(wa.UNSHARE)}),[Z,b]),(0,N.useEffect)((function(){n&&de()}),[n]);var de=(0,N.useCallback)(Ea(ha().mark((function e(){var n,a,o,r;return ha().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&he(T),T!==wa.SHARE_ALL){e.next=5;break}n={shareWithAllChildren:!0},e.next=15;break;case 5:if(T!==wa.SHARE_SELECTED){e.next=15;break}if(!Z){e.next=12;break}return o=A.map((function(e){return e.id})),e.next=10,(0,Et.An)(t.id);case 10:e.next=14;break;case 12:o=(0,fa.Z)(A,b,"id").map((function(e){return e.id})),a=(0,fa.Z)(b,A,"id");case 14:n={shareWithAllChildren:!1,sharedOrganizations:o};case 15:T===wa.SHARE_ALL||T===wa.SHARE_SELECTED?((0,Et.Bn)(d.id,t.id,n).then((function(){m||s((0,I.V_)({description:u("applications:edit.sections.shareApplication.addSharingNotification.success.description"),level:C.QU.SUCCESS,message:u("applications:edit.sections.shareApplication.addSharingNotification.success.message")}))})).catch((function(e){e.response.data.message?s((0,I.V_)({description:e.response.data.message,level:C.QU.ERROR,message:u("applications:edit.sections.shareApplication.addSharingNotification.genericError.message")})):s((0,I.V_)({description:u("applications:edit.sections.shareApplication.addSharingNotification.genericError.description"),level:C.QU.ERROR,message:u("applications:edit.sections.shareApplication.addSharingNotification.genericError.message")}))})).finally((function(){T===wa.SHARE_SELECTED&&se(),i()})),null===(r=a)||void 0===r||r.forEach((function(e){(0,Et.NY)(d.id,t.id,e.id).then((function(){s((0,I.V_)({description:u("applications:edit.sections.shareApplication.stopSharingNotification.success.description",{organization:e.name}),level:C.QU.SUCCESS,message:u("applications:edit.sections.shareApplication.stopSharingNotification.success.message")}))})).catch((function(t){t.response.data.message?s((0,I.V_)({description:t.response.data.message,level:C.QU.ERROR,message:u("applications:edit.sections.shareApplication.stopSharingNotification.genericError.message")})):s((0,I.V_)({description:u("applications:edit.sections.shareApplication.stopSharingNotification.genericError.description",{organization:e.name}),level:C.QU.ERROR,message:u("applications:edit.sections.shareApplication.stopSharingNotification.genericError.message")}))}))}))):T===wa.UNSHARE&&(0,Et.An)(t.id).then((function(){s((0,I.V_)({description:u("applications:edit.sections.shareApplication.stopAllSharingNotification.success.description"),level:C.QU.SUCCESS,message:u("applications:edit.sections.shareApplication.stopAllSharingNotification.success.message")}))})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.message?s((0,I.V_)({description:e.response.data.message,level:C.QU.ERROR,message:u("applications:edit.sections.shareApplication.addSharingNotification.genericError.message")})):s((0,I.V_)({description:u("applications:edit.sections.shareApplication.addSharingNotification.genericError.description"),level:C.QU.ERROR,message:u("applications:edit.sections.shareApplication.addSharingNotification.genericError.message")}))})).finally((function(){E([]),i()}));case 16:case"end":return e.stop()}}),e)}))),[b,A,Et.NY,s,d.id,t.id,T]),pe=function(e,t){B(e),W(t),Y((function(n){return Sa(Sa({},n),{},{after:e||null,filter:t?"".concat(X).concat(t):"",shouldFetch:!0})}))},me=(0,N.useCallback)((function(){if(F){var e=G?"".concat(X).concat(G):"";Y((function(t){return t.after===Q&&t.filter===e?t:(B(Q),W(G),Sa(Sa({},t),{},{after:Q||"",filter:e,shouldFetch:!0}))}))}}),[Q,G,F]),fe=(0,N.useCallback)((0,ma.Z)((function(e,t){var n=t.value;g([]),pe("",n)}),500),[pe]),ve=(0,N.useCallback)((function(){A.length!==v.length?O(v):O([])}),[v,A]);function he(e){e!==wa.SHARE_ALL&&e!==wa.SHARE_SELECTED||(null==c||c(),s((0,I.V_)({description:u("applications:edit.sections.shareApplication.addAsyncSharingNotification.description"),level:C.QU.INFO,message:u("applications:edit.sections.shareApplication.addAsyncSharingNotification.message")})))}return ue?N.createElement(R.pO,{inline:"centered",active:!0}):N.createElement(N.Fragment,null,N.createElement(R.X6,{ellipsis:!0,as:"h6"},u("applications:edit.sections.sharedAccess.subTitle")),N.createElement(N.Fragment,null,N.createElement(R.cV,{"data-componentid":"".concat(a,"-in-progress-reshare-confirmation-modal"),onClose:function(){x(!1)},type:"warning",open:M,assertionHint:u("applications:confirmations.inProgressReshare.assertionHint"),assertionType:"checkbox",primaryAction:u("common:confirm"),secondaryAction:u("common:cancel"),onPrimaryActionClick:function(){de(),x(!1)},onSecondaryActionClick:function(){x(!1)},closeOnDimmerClick:!1},N.createElement(R.cV.Header,null,u("applications:confirmations.inProgressReshare.header")),N.createElement(R.cV.Message,{attached:!0,warning:!0},u("applications:confirmations.inProgressReshare.message")),N.createElement(R.cV.Content,null,u("applications:confirmations.inProgressReshare.content")))),N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,null,N.createElement(Ee.Z.Column,{width:8},N.createElement(va.Z,{disabled:o,label:u("organizations:unshareApplicationRadio"),onChange:function(){return L(wa.UNSHARE)},checked:T===wa.UNSHARE,"data-componentid":"".concat(a,"-share-with-all-checkbox")}),N.createElement(R.kW,{inline:!0,popup:!0},u("organizations:unshareApplicationInfo")),N.createElement(ge.Z,{hidden:!0,className:"mb-0 mt-0"}),N.createElement(va.Z,{disabled:o,label:u("organizations:shareWithSelectedOrgsRadio"),onChange:function(){return L(wa.SHARE_SELECTED)},checked:T===wa.SHARE_SELECTED,"data-componentid":"".concat(a,"-share-with-all-checkbox")}),N.createElement(ye.Z,{in:T===wa.SHARE_SELECTED,orientation:"vertical",timeout:"auto"},N.createElement(N.Fragment,null,Z&&N.createElement(R.v0,{warning:!0,className:"ml-4 mt-3"},N.createElement("p",null,u("applications:edit.sections.shareApplication.switchToSelectiveShareFromSharingWithAllSuborgsWarning"))),N.createElement(R.IX,{bordered:!1,className:"pl-2",disabled:T!==wa.SHARE_SELECTED,selectionComponent:!0,searchPlaceholder:u("transferList:searchPlaceholder",{type:"organizations"}),handleUnelectedListSearch:fe,"data-componentId":"application-share-modal-organization-transfer-component"},N.createElement(R.Jv,{disabled:T!==wa.SHARE_SELECTED,isListEmpty:!((null==v?void 0:v.length)>0),handleHeaderCheckboxChange:ve,isHeaderCheckboxChecked:(null==A?void 0:A.length)===(null==v?void 0:v.length),listType:"unselected",listHeaders:[u("transferList:list.headers.1"),""],emptyPlaceholderContent:""!==G?u("console:develop.placeholders.emptySearchResult.subtitles.0",{query:G})+". "+u("console:develop.placeholders.emptySearchResult.subtitles.1"):0===(null==v?void 0:v.length)?u("organizations:placeholders.emptyList.subtitles.0"):null,"data-testid":"application-share-modal-organization-transfer-component-all-items",emptyPlaceholderDefaultContent:u("organizations:placeholders.emptyList.subtitles.0"),hasMore:F,loadMore:me,isLoading:""===Q&&(te||ne)},null==v?void 0:v.map((function(e,t){var n=null==e?void 0:e.name,i=-1!==A.findIndex((function(t){return t.id===e.id}));return N.createElement(R.qT,{disabled:T!==wa.SHARE_SELECTED,handleItemChange:function(){return function(e){var t=ya(A),n=t.findIndex((function(t){return t.id===e.id}));-1!==n?(t.splice(n,1),O(t)):(t.push(e),O(t))}(e)},key:t,listItem:n,listItemId:e.id,listItemIndex:t,isItemChecked:i,showSecondaryActions:!1,"data-testid":"application-share-modal-organization-transfer-component-unselected-organizations"})})))))),N.createElement(ge.Z,{hidden:!0,className:"mb-0 mt-0"}),N.createElement(va.Z,{label:u("organizations:shareApplicationRadio"),onChange:function(){return L(wa.SHARE_ALL)},checked:T===wa.SHARE_ALL,"data-componentid":"".concat(a,"-share-with-all-checkbox")}),N.createElement(R.kW,{inline:!0,popup:!0},u("organizations:shareApplicationInfo")),N.createElement(ge.Z,{hidden:!0}),N.createElement(R.KM,{"data-componentid":"".concat(a,"-update-button"),onClick:r?function(){x(!0)}:de},u("common:update"))))))};Ta.defaultProps={"data-componentid":"application-share-form"};var La=n(73965),_a=n(54982),Na=n(94274),Pa=n(8076),Za=n(92938),Ua=n(35932);const ja=function(e,t,n,i,a,o,r){var l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=e===At.cv.APPLICATION?"audience.value eq ".concat(t):"audience.type eq ".concat(e.toLowerCase());(0,_.Z)(n)||(c="".concat(c," and ").concat(n));var s={method:C.f2.GET,params:{after:a,before:i,excludedAttributes:r,filter:c,limit:o},url:"".concat(Kn.h.getState().config.endpoints.rolesV2)},u=(0,$n.Z)(l?s:null);return{data:u.data,error:u.error,isLoading:u.isLoading,isValidating:u.isValidating,mutate:u.mutate,response:u.response}};var Da=n(97130),ka=n(37626),Ma=n(2279),xa=n(66466),Ha=n(81722),Fa={};Fa.styleTagTransform=je(),Fa.setAttributes=Ne(),Fa.insert=Le().bind(null,"head"),Fa.domAPI=we(),Fa.insertStyleElement=Ze();Oe()(Ha.Z,Fa);Ha.Z&&Ha.Z.locals&&Ha.Z.locals;function Va(){return Va=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Va.apply(null,arguments)}function za(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ga(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ga(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}const Wa=function(e){var t,n,i,a=e["data-componentid"],o=void 0===a?"console-roles-share-with-all":a,r=e.application,l=e.selectedRoles,c=e.setSelectedRoles,s=e.onRoleChange,u=(0,U.v9)((function(e){var t;return null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.applications})),d=(0,U.I0)(),m=(0,P.$)().t,f=!(0,p.EV)(null==u||null===(t=u.scopes)||void 0===t?void 0:t.update),v=za((0,N.useState)(),2),g=v[0],h=v[1],b=za((0,N.useState)(!1),2),E=b[0],y=b[1],A=null!==(n=null==r||null===(i=r.associatedRoles)||void 0===i?void 0:i.allowedAudience)&&void 0!==n?n:At.cv.ORGANIZATION,S=ja(A,null==r?void 0:r.id,g,null,null,null,"users,groups,permissions,associatedApplications"),O=S.data,w=S.isLoading,T=S.error,L=(0,N.useMemo)((function(){var e;if((null==O||null===(e=O.Resources)||void 0===e?void 0:e.length)>0)return O.Resources}),[O]);(0,N.useEffect)((function(){T&&d((0,I.V_)({description:m("applications:edit.sections.sharedAccess.notifications.rolesFetchError.description"),level:C.QU.ERROR,message:m("applications:edit.sections.sharedAccess.notifications.rolesFetchError.message")}))}),[T]);var Z=(0,N.useCallback)((0,ma.Z)((function(e){var t=e?'displayName co "'.concat(e,'"'):void 0;h(t),y(!1)}),1e3),[]);return N.createElement(N.Fragment,null,N.createElement(xa.Z,{variant:"body1",marginBottom:1},m("applications:edit.sections.sharedAccess.commonRoleSharingLabel"),N.createElement(R.kW,{inline:!0,popup:!0},m("applications:edit.sections.sharedAccess.commonRoleSharingHint"))),N.createElement(Tn.Z,{fullWidth:!0,multiple:!0,disableClearable:!0,size:"small",className:"role-select-autocomplete","data-componentid":"".concat(o,"-autocomplete"),loading:w||E,placeholder:m("applications:edit.sections.sharedAccess.modes.shareWithSelectedPlaceholder"),options:null!=L?L:[],value:l,onChange:function(e,t,n,i){!function(e,t,n){c(e);var i=n.option;(0,_.Z)(i)||("selectOption"===t?s(i,!0):"removeOption"===t&&s(i,!1))}(t,n,i)},disabled:f,noOptionsText:m("common:noResultsFound"),getOptionLabel:function(e){return null==e?void 0:e.displayName},isOptionEqualToValue:function(e,t){return(null==e?void 0:e.displayName)===t.displayName},renderInput:function(e){return N.createElement(Nn.Z,Va({},e,{size:"small",placeholder:m("applications:edit.sections.sharedAccess.searchAvailableRolesPlaceholder"),"data-componentid":"".concat(o,"-role-search-input"),onChange:function(e){var t=e.target.value.trim();y(!0),Z(t)}}))},renderTags:function(e,t){return e.map((function(e,n){return N.createElement(Mn.Z,Va({},t({index:n}),{key:n,label:e.displayName,variant:null!=l&&l.find((function(t){return t.id===e.id}))?"filled":"outlined"}))}))}}))};var qa=n(51630),Qa=n(72137),Ba=n(88490),$a=n(51284),Ka={};Ka.styleTagTransform=je(),Ka.setAttributes=Ne(),Ka.insert=Le().bind(null,"head"),Ka.domAPI=we(),Ka.insertStyleElement=Ze();Oe()($a.Z,Ka);$a.Z&&$a.Z.locals&&$a.Z.locals;function Ya(e){return Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ya(e)}function Xa(e){return function(e){if(Array.isArray(e))return lo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ro(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){to(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function to(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ya(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Ya(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ya(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function no(){no=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,r=Object.create(o.prototype),l=new _(i||[]);return a(r,"_invoke",{value:R(e,n,l)}),r}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",f="executing",v="completed",g={};function h(){}function b(){}function E(){}var y={};s(y,r,(function(){return this}));var A=Object.getPrototypeOf,S=A&&A(A(N([])));S&&S!==n&&i.call(S,r)&&(y=S);var C=E.prototype=h.prototype=Object.create(y);function I(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(a,o,r,l){var c=d(e[a],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Ya(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,r,l)}),(function(e){n("throw",e,r,l)})):t.resolve(u).then((function(e){s.value=e,r(s)}),(function(e){return n("throw",e,r,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return o=o?o.then(a,a):a()}})}function R(t,n,i){var a=p;return function(o,r){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===o)throw r;return{value:e,done:!0}}for(i.method=o,i.arg=r;;){var l=i.delegate;if(l){var c=w(l,i);if(c){if(c===g)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===p)throw a=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=f;var s=d(t,n,i);if("normal"===s.type){if(a=i.done?v:m,s.arg===g)continue;return{value:s.arg,done:i.done}}"throw"===s.type&&(a=v,i.method="throw",i.arg=s.arg)}}}function w(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=d(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ya(t)+" is not iterable")}return b.prototype=E,a(C,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:b,configurable:!0}),b.displayName=s(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},I(O.prototype),s(O.prototype,l,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,i,a,o){void 0===o&&(o=Promise);var r=new O(u(e,n,i,a),o);return t.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},I(C),s(C,c,"Generator"),s(C,r,(function(){return this})),s(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=N,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return l.type="throw",l.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],l=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var c=i.call(r,"catchLoc"),s=i.call(r,"finallyLoc");if(c&&s){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;L(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:N(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function io(e,t,n,i,a,o,r){try{var l=e[o](r),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,a)}function ao(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){io(o,i,a,r,l,"next",e)}function l(e){io(o,i,a,r,l,"throw",e)}r(void 0)}))}}function oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||ro(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(e,t){if(e){if("string"==typeof e)return lo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lo(e,t):void 0}}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var co=function(e){var t,n,a=e["data-componentid"],o=void 0===a?"application-share-form":a,c=e.application,s=e.triggerApplicationShare,u=e.onApplicationSharingCompleted,p=e.readOnly,m=e.isSharingInProgress,f=e.operationStatus,v=e.onOperationStarted,g=(0,U.I0)(),h=(0,P.$)().t,b=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.applications})),E=(0,S.cr)(b,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_SHARED_ACCESS_STATUS")),y=null!==(t=null==c||null===(n=c.associatedRoles)||void 0===n?void 0:n.allowedAudience)&&void 0!==t?t:At.cv.ORGANIZATION,A=oo((0,N.useState)(Ba.yw.UNSHARE),2),O=A[0],w=A[1],T=oo((0,N.useState)(Ba.ys.SHARE_WITH_ALL),2),L=T[0],Z=T[1],j=oo((0,N.useState)(Ba.ys.SHARE_SELECTED),2),D=j[0],k=j[1],M=(0,ua.Z)().isOrganizationManagementEnabled,x=oo((0,N.useState)(!1),2),H=x[0],F=x[1],V=oo((0,N.useState)(!1),2),z=V[0],G=V[1],W=oo((0,N.useState)(!1),2),q=W[0],Q=W[1],B=oo((0,N.useState)(Ba.MS.WITHOUT_UNSHARE),2),$=B[0],K=B[1],Y=oo((0,N.useState)([]),2),X=Y[0],J=Y[1],ee=oo((0,N.useState)([]),2),te=ee[0],ne=ee[1],ie=oo((0,N.useState)([]),2),ae=ie[0],oe=ie[1],re=oo((0,N.useState)({}),2),le=re[0],ce=re[1],se=oo((0,N.useState)({}),2),ue=se[0],de=se[1],pe=oo((0,N.useState)({}),2),me=pe[0],fe=pe[1],ve=oo((0,N.useState)({}),2),he=ve[0],be=ve[1],Ee=oo((0,N.useState)([]),2),ye=Ee[0],Ae=Ee[1],Se=oo((0,N.useState)([]),2),Ce=Se[0],Ie=Se[1],Oe=oo((0,N.useState)(!1),2),Re=Oe[0],we=Oe[1],Te=(0,Qa.Z)(null==c?void 0:c.id,!(0,_.Z)(null==c?void 0:c.id)&&M,!1,null,"roles",1,null,null,"sharingMode"),Le=Te.data,_e=Te.isLoading,Ne=Te.isValidating,Pe=Te.mutate,Ze=Te.error,Ue=ja(y,null==c?void 0:c.id,null,null,null,null,"users,groups,permissions,associatedApplications",!(0,_.Z)(null==c?void 0:c.id)),je=Ue.data,De=Ue.isLoading,ke=Ue.error,Me=(0,da.Z)(M,null,1,null,null,!1,!1),xe=Me.data,He=Me.error,Fe=(0,N.useMemo)((function(){var e;return!(!M||(0,_.Z)(xe))&&(null==xe||null===(e=xe.organizations)||void 0===e?void 0:e.length)>0}),[xe,M]),Ve=(0,N.useMemo)((function(){return!!M&&(_e||De||Ne)}),[_e,Ne,De]),ze=(0,N.useMemo)((function(){var e;if((null==je||null===(e=je.Resources)||void 0===e?void 0:e.length)>0)return je.Resources}),[je]);(0,N.useEffect)((function(){var e;if((0,_.Z)(Le))w(Ba.yw.UNSHARE);else if(Le.sharingMode){var t=null===(e=Le.sharingMode)||void 0===e?void 0:e.policy;if(t===Ua.wD.ALL_EXISTING_ORGS_ONLY&&w(Ba.yw.SHARE_SELECTED),t===Ua.wD.ALL_EXISTING_AND_FUTURE_ORGS){var n;w(Ba.yw.SHARE_ALL);var i=null==Le||null===(n=Le.sharingMode)||void 0===n||null===(n=n.roleSharing)||void 0===n?void 0:n.mode;if(i===Ua.yx.ALL)Z(Ba.ys.SHARE_WITH_ALL);else if(i===Ua.yx.SELECTED){var a;Z(Ba.ys.SHARE_SELECTED);var o=null==Le||null===(a=Le.sharingMode)||void 0===a||null===(a=a.roleSharing)||void 0===a||null===(a=a.roles)||void 0===a?void 0:a.map((function(e){return{audience:{display:e.audience.display,type:e.audience.type},displayName:e.displayName,id:e.displayName}}));(null==o?void 0:o.length)>0&&(J(o),ne(o))}else i===Ua.yx.NONE&&Z(Ba.ys.SHARE_SELECTED)}}else w(Ba.yw.SHARE_SELECTED)}),[Le]),(0,N.useEffect)((function(){f===ia.PARTIALLY_COMPLETED&&(null==u||u())}),[f,u]),(0,N.useEffect)((function(){var e,t,n,i,a;Ze&&(null!=Ze&&null!==(e=Ze.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?g((0,I.V_)({description:null!==(t=null==Ze||null===(n=Ze.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:h("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.description"),level:C.QU.ERROR,message:null!==(i=null==Ze||null===(a=Ze.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)&&void 0!==i?i:h("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.message")})):g((0,I.V_)({description:h("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.description"),level:C.QU.ERROR,message:h("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.message")})))}),[Ze]),(0,N.useEffect)((function(){ke&&g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.fetchApplicationRoles.genericError.description"),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.fetchApplicationRoles.genericError.message")}))}),[ke]),(0,N.useEffect)((function(){He&&g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.fetchOrganizations.genericError.description"),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.fetchOrganizations.genericError.message")}))}),[He]),(0,N.useEffect)((function(){s&&We()}),[s]);var Ge=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];J([]),ne([]),oe([]),ce({}),fe({}),be({}),Ae([]),Ie([]),de({}),we(!1),e&&Pe()},We=function(){E&&Je(O),O===Ba.yw.UNSHARE?qe():O===Ba.yw.SHARE_ALL?(L===Ba.ys.SHARE_SELECTED&&(JSON.stringify(X)!==JSON.stringify(te)?Q(!0):Ye()),L===Ba.ys.SHARE_WITH_ALL&&Be()):O===Ba.yw.SHARE_SELECTED&&(D===Ba.ys.SHARE_SELECTED&&$e(),D===Ba.ys.SHARE_WITH_ALL&&Ke(!0),D===Ba.ys.SHARE_NONE&&Ke(!1))},qe=function(){var e=ao(no().mark((function e(){var t;return no().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={applicationId:c.id},e.prev=1,e.next=4,(0,qa.ou)(t);case 4:return g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.unshare.success.description"),level:C.QU.SUCCESS,message:h("applications:edit.sections.sharedAccess.notifications.unshare.success.message")})),Ge(!1),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.unshare.error.description",{error:e.t0.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.unshare.error.message")})),e.abrupt("return",!1);case 13:return e.prev=13,u(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=ao(no().mark((function e(){var t,n,i=arguments;return no().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:Ua.wD.ALL_EXISTING_AND_FUTURE_ORGS,n={applicationId:c.id,policy:t,roleSharing:{mode:Ua.yx.ALL,roles:[]}},e.prev=2,e.next=5,(0,qa.Js)(n);case 5:return Ge(),g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.success.description"),level:C.QU.SUCCESS,message:h("applications:edit.sections.sharedAccess.notifications.share.success.message")})),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(2),g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.t0.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.share.error.message")})),e.abrupt("return",!1);case 14:return e.prev=14,u(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=ao(no().mark((function e(){var t,n,i,a,o,r,l,s,d,p,m,f;return no().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eo({},me),i=eo({},he),a=eo({},ue),o=[],r=!0,ye.length>0&&(l={applicationId:c.id,organizations:ye.map((function(e){return{orgId:e,policy:a[e]?Ua.wD.SELECTED_ORG_WITH_ALL_EXISTING_AND_FUTURE_CHILDREN:Ua.wD.SELECTED_ORG_ONLY,roleSharing:{mode:n[e]&&n[e].length>0?Ua.yx.SELECTED:Ua.yx.NONE,roles:n[e]&&n[e].length>0?n[e]:[]}}}))},o.push((0,qa.C_)(l).then((function(){ye.forEach((function(e){delete n[e],delete a[e]}))})).catch((function(e){r=!1,g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.share.error.message")}))})))),Ce.length>0&&(s={applicationId:c.id,orgIds:Ce},o.push((0,qa.Vi)(s).then((function(){Ce.forEach((function(e){delete i[e],delete a[e]}))})).catch((function(e){r=!1,g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.unshare.error.description",{error:e.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.unshare.error.message")}))})))),e.next=9,Promise.all(o);case 9:if(!(Object.keys(a).length>0)){e.next=20;break}return d={applicationId:c.id,organizations:Object.keys(a).map((function(e){var t,n=(null===(t=le[e])||void 0===t?void 0:t.filter((function(e){return e.selected})).map((function(e){return{audience:{display:e.audience.display,type:e.audience.type},displayName:e.displayName}})))||[];return{orgId:e,policy:a[e]?Ua.wD.SELECTED_ORG_WITH_ALL_EXISTING_AND_FUTURE_CHILDREN:Ua.wD.SELECTED_ORG_ONLY,roleSharing:{mode:n.length>0?Ua.yx.SELECTED:Ua.yx.NONE,roles:n}}}))},e.prev=11,e.next=14,(0,qa.C_)(d);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),r=!1,g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.t0.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.share.error.message")}));case 20:if(r){e.next=23;break}return u(),e.abrupt("return");case 23:p=Object.entries(n).map((function(e){var t=oo(e,2),n=t[0],i=t[1].map((function(e){return{audience:{display:e.audience.display,type:e.audience.type},displayName:e.displayName}}));return(0,_.Z)(i)?null:{op:"add",path:'organizations[orgId eq "'.concat(n,'"].roles'),value:i}})).filter((function(e){return null!==e})),m=Object.entries(i).map((function(e){var t=oo(e,2),n=t[0],i=t[1].map((function(e){return{audience:{display:e.audience.display,type:e.audience.type},displayName:e.displayName}}));return(0,_.Z)(i)?null:{op:"remove",path:'organizations[orgId eq "'.concat(n,'"].roles'),value:i}})).filter((function(e){return null!==e})),(null==(f={Operations:[].concat(Xa(p),Xa(m)),applicationId:c.id})||null===(t=f.Operations)||void 0===t?void 0:t.length)>0?(0,qa.Zw)(f).then((function(){g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.success.description"),level:C.QU.SUCCESS,message:h("applications:edit.sections.sharedAccess.notifications.share.success.message")})),Ge()})).catch((function(e){g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.share.error.message")}))})).finally((function(){u()})):(g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.success.description"),level:C.QU.SUCCESS,message:h("applications:edit.sections.sharedAccess.notifications.share.success.message")})),Ge());case 27:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=ao(no().mark((function e(t){var n,i,a,o,r,l;return no().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],i=eo({},ue),a=!0,ye.length>0&&(o={applicationId:c.id,organizations:ye.map((function(e){return{orgId:e,policy:i[e]?Ua.wD.SELECTED_ORG_WITH_ALL_EXISTING_AND_FUTURE_CHILDREN:Ua.wD.SELECTED_ORG_ONLY,roleSharing:{mode:t?Ua.yx.ALL:Ua.yx.NONE,roles:[]}}}))},n.push((0,qa.C_)(o).then((function(){ye.forEach((function(e){delete i[e]}))})).catch((function(e){a=!1,g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.share.error.message")}))})))),Ce.length>0&&(r={applicationId:c.id,orgIds:Ce},(0,qa.Vi)(r).then((function(){Ce.forEach((function(e){delete i[e]}))})).catch((function(e){a=!1,g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.unshare.error.description",{error:e.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.unshare.error.message")}))}))),e.next=7,Promise.all(n);case 7:if(!(Object.keys(i).length>0)){e.next=18;break}return l={applicationId:c.id,organizations:Object.keys(i).map((function(e){return{orgId:e,policy:i[e]?Ua.wD.SELECTED_ORG_WITH_ALL_EXISTING_AND_FUTURE_CHILDREN:Ua.wD.SELECTED_ORG_ONLY,roleSharing:{mode:t?Ua.yx.ALL:Ua.yx.NONE,roles:[]}}}))},e.prev=9,e.next=12,(0,qa.C_)(l);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(9),a=!1,g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.t0.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.share.error.message")}));case 18:a&&(g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.success.description"),level:C.QU.SUCCESS,message:h("applications:edit.sections.sharedAccess.notifications.share.success.message")})),Ge()),u();case 20:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){if((0,_.Z)(X)||JSON.stringify(X)!==JSON.stringify(te)){var e={applicationId:c.id,policy:Ua.wD.ALL_EXISTING_AND_FUTURE_ORGS,roleSharing:X.length>0?{mode:Ua.yx.SELECTED,roles:X.map((function(e){var t;return{audience:{display:null!==(t=e.audience.display)&&void 0!==t?t:null==c?void 0:c.name,type:e.audience.type},displayName:e.displayName}}))}:{mode:Ua.yx.NONE,roles:[]}};(0,qa.Js)(e).then((function(){Xe()})).catch((function(e){g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.share.error.message")}))})).finally((function(){u()}))}else Xe()},Xe=function(){var e,t=eo({},me),n=eo({},he),i=Object.entries(t).map((function(e){var t=oo(e,2),n=t[0],i=t[1].map((function(e){return{audience:{display:e.audience.display,type:e.audience.type},displayName:e.displayName}}));return(0,_.Z)(i)?null:{op:"add",path:'organizations[orgId eq "'.concat(n,'"].roles'),value:i}})).filter((function(e){return null!==e})),a=Object.entries(n).map((function(e){var t=oo(e,2),n=t[0],i=t[1].map((function(e){return{audience:{display:e.audience.display,type:e.audience.type},displayName:e.displayName}}));return(0,_.Z)(i)?null:{op:"remove",path:'organizations[orgId eq "'.concat(n,'"].roles'),value:i}})).filter((function(e){return null!==e})),o={Operations:[].concat(Xa(i),Xa(a)),applicationId:c.id};(null==o||null===(e=o.Operations)||void 0===e?void 0:e.length)>0?(0,qa.Zw)(o).then((function(){g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.success.description"),level:C.QU.SUCCESS,message:h("applications:edit.sections.sharedAccess.notifications.share.success.message")})),Ge()})).catch((function(e){g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.message}),level:C.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.share.error.message")}))})).finally((function(){u()})):(g((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.share.success.description"),level:C.QU.SUCCESS,message:h("applications:edit.sections.sharedAccess.notifications.share.success.message")})),Ge(),u())},Je=function(e){e!==Ba.yw.SHARE_ALL&&e!==Ba.yw.SHARE_SELECTED||(null==v||v(),g((0,I.V_)({description:h("applications:edit.sections.shareApplication.addAsyncSharingNotification.description"),level:C.QU.INFO,message:h("applications:edit.sections.shareApplication.addAsyncSharingNotification.message")})))},et=function(){var e=ao(no().mark((function e(){return no().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($!==Ba.MS.WITH_UNSHARE){e.next=8;break}return e.next=3,qe();case 3:e.sent&&(w(Ba.yw.SHARE_SELECTED),k(Ba.ys.SHARE_SELECTED)),G(!1),e.next=14;break;case 8:if($!==Ba.MS.WITHOUT_UNSHARE){e.next=14;break}return e.next=11,Be(Ua.wD.ALL_EXISTING_ORGS_ONLY);case 11:e.sent&&(w(Ba.yw.SHARE_SELECTED),k(Ba.ys.SHARE_SELECTED)),G(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Ve?N.createElement(R.pO,{inline:"centered",active:!0}):N.createElement(N.Fragment,null,N.createElement(l.Z,{container:!0,className:"share-application-form"},N.createElement(l.Z,{xl:8,xs:12},N.createElement(R.X6,{as:"h4"},h("applications:edit.sections.sharedAccess.title")),N.createElement(R.X6,{ellipsis:!0,as:"h6"},h("applications:edit.sections.sharedAccess.subTitle")),N.createElement(La.Z,{fullWidth:!0},N.createElement(Pa.Z,{value:O,onChange:function(e){var t=e.target.value;O!==Ba.yw.SHARE_ALL||t!==Ba.yw.SHARE_SELECTED?w(t):G(!0)},"data-componentid":"".concat(o,"-radio-group")},N.createElement(_a.Z,{value:Ba.yw.UNSHARE,label:N.createElement(N.Fragment,null,h("applications:edit.sections.sharedAccess.doNotShareApplication"),N.createElement(R.kW,{inline:!0,popup:!0},h("organizations:unshareApplicationInfo"))),control:N.createElement(Na.Z,null),disabled:p,"data-componentid":"".concat(o,"-unshare-with-all-orgs-checkbox")}),N.createElement(_a.Z,{value:Ba.yw.SHARE_ALL,label:h("applications:edit.sections.sharedAccess.shareAllApplication"),control:N.createElement(Na.Z,null),disabled:p,"data-componentid":"".concat(o,"-share-with-all-orgs-checkbox")}),N.createElement(ka.M,{mode:"wait"},O===Ba.yw.SHARE_ALL&&N.createElement(Ma.E.div,{key:"selected-orgs-block",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"ml-5"},N.createElement(_a.Z,{control:N.createElement(Za.Z,{checked:L===Ba.ys.SHARE_SELECTED,onChange:function(e,t){t?(Z(Ba.ys.SHARE_SELECTED),we(!0)):Z(Ba.ys.SHARE_WITH_ALL)},"data-componentid":"".concat(o,"-share-selected-roles-all-orgs-toggle")}),label:h("applications:edit.sections.sharedAccess.shareRoleSubsetWithAllOrgs")}),N.createElement(ge.Z,{hidden:!0,className:"mb-0 mt-2"}),L===Ba.ys.SHARE_WITH_ALL?N.createElement(i.Z,{severity:"info"},h("applications:edit.sections.sharedAccess.allRolesAndOrgsSharingMessage")):N.createElement("div",{className:"role-share-all-container"},N.createElement(Wa,{application:c,selectedRoles:X,setSelectedRoles:J,onRoleChange:function(e,t){var n=eo({},le);if(Object.keys(n).forEach((function(i){n[i]=n[i].map((function(n){return n.displayName===e.displayName?eo(eo({},n),{},{selected:t}):n}))})),ce(n),t){var i=eo({},he);Object.keys(i).forEach((function(t){i[t]=i[t].filter((function(t){return t.displayName!==e.displayName}))})),be(i)}else{var a=eo({},me);Object.keys(a).forEach((function(t){a[t]=a[t].filter((function(t){return t.displayName!==e.displayName}))})),fe(a)}}}),N.createElement(d.Z,{variant:"body1",marginTop:2,marginBottom:1},h("applications:edit.sections.sharedAccess.individualRoleSharingLabel"),N.createElement(R.kW,{inline:!0,popup:!0},h("applications:edit.sections.sharedAccess.individualRoleSharingHint"))),N.createElement(Da.Z,{applicationId:null==c?void 0:c.id,applicationRolesList:ze,selectedItems:ae,setSelectedItems:oe,addedOrgs:ye,setAddedOrgs:Ae,removedOrgs:Ce,setRemovedOrgs:Ie,roleSelections:le,setRoleSelections:ce,addedRoles:me,setAddedRoles:fe,removedRoles:he,setRemovedRoles:be,shareAllRoles:!1,newlyAddedCommonRoles:(0,fa.Z)(X,te,"displayName"),newlyRemovedCommonRoles:(0,fa.Z)(te,X,"displayName"),clearAdvancedRoleSharing:Re,disableOrgSelection:!0})))),N.createElement(_a.Z,{value:Ba.yw.SHARE_SELECTED,label:Fe?h("applications:edit.sections.sharedAccess.shareSelectedApplication"):N.createElement(N.Fragment,null,h("applications:edit.sections.sharedAccess.shareSelectedApplication"),N.createElement(R.kW,{inline:!0,popup:!0},h("organizations:placeholders.emptyList.subtitles.0"))),control:N.createElement(Na.Z,null),disabled:p||!Fe,"data-componentid":"".concat(o,"-share-with-selected-orgs-checkbox")}),N.createElement(ka.M,{mode:"wait"},O===Ba.yw.SHARE_SELECTED&&N.createElement(Ma.E.div,{key:"selected-orgs-block",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"ml-5"},N.createElement(l.Z,{xs:12},N.createElement(r.Z,{variant:"text",size:"small","data-componentid":"".concat(o,"-share-all-roles-with-selected-orgs-btn"),onClick:function(){D===Ba.ys.SHARE_WITH_ALL?k(Ba.ys.SHARE_SELECTED):D===Ba.ys.SHARE_SELECTED&&k(Ba.ys.SHARE_WITH_ALL)},disabled:p},D===Ba.ys.SHARE_WITH_ALL?h("applications:edit.sections.sharedAccess.shareSelectedRoles"):h("applications:edit.sections.sharedAccess.shareAllRoles")),N.createElement(Da.Z,{applicationId:null==c?void 0:c.id,applicationRolesList:ze,selectedItems:ae,setSelectedItems:oe,addedOrgs:ye,setAddedOrgs:Ae,removedOrgs:Ce,setRemovedOrgs:Ie,roleSelections:le,setRoleSelections:ce,addedRoles:me,setAddedRoles:fe,removedRoles:he,setRemovedRoles:be,shareAllRoles:D===Ba.ys.SHARE_WITH_ALL,shouldShareWithFutureChildOrgsMap:ue,setShouldShareWithFutureChildOrgsMap:de,disableOrgSelection:!1}))))))),N.createElement(ge.Z,{hidden:!0}),N.createElement(l.Z,{xs:8},N.createElement(r.Z,{className:"mt-5",variant:"contained",size:"small",disabled:p,"data-componentid":"".concat(o,"-update-button"),onClick:m?function(){F(!0)}:We},h("common:save")))),N.createElement(N.Fragment,null,N.createElement(R.cV,{"data-componentid":"".concat(o,"-in-progress-reshare-confirmation-modal"),onClose:function(){F(!1)},type:"warning",open:H,assertionHint:h("applications:confirmations.inProgressReshare.assertionHint"),assertionType:"checkbox",primaryAction:h("common:confirm"),secondaryAction:h("common:cancel"),onPrimaryActionClick:function(){We(),F(!1)},onSecondaryActionClick:function(){F(!1)},closeOnDimmerClick:!1},N.createElement(R.cV.Header,null,h("applications:confirmations.inProgressReshare.header")),N.createElement(R.cV.Message,{attached:!0,warning:!0},h("applications:confirmations.inProgressReshare.message")),N.createElement(R.cV.Content,null,h("applications:confirmations.inProgressReshare.content")))),N.createElement(N.Fragment,null,N.createElement(R.cV,{"data-componentid":"".concat(o,"-share-type-switch-modal"),onClose:function(){G(!1)},type:"negative",open:z,primaryAction:h("common:confirm"),secondaryAction:h("common:cancel"),onPrimaryActionClick:function(){(0,_.Z)($)||et()},onSecondaryActionClick:function(){G(!1)},closeOnDimmerClick:!1},N.createElement(R.cV.Header,null,h("applications:edit.sections.sharedAccess.shareTypeSwitchModal.header")),N.createElement(R.cV.Message,{attached:!0,negative:!0},h("applications:edit.sections.sharedAccess.shareTypeSwitchModal.message")),N.createElement(R.cV.Content,null,h("applications:edit.sections.sharedAccess.shareTypeSwitchModal.description"),N.createElement(Pa.Z,{value:$,onChange:function(e){K(e.target.value)},"data-componentid":"".concat(o,"-share-type-switch-group"),className:"mt-3"},N.createElement(_a.Z,{value:Ba.MS.WITHOUT_UNSHARE,label:N.createElement(d.Z,{variant:"body1"},N.createElement("b",null,h("applications:edit.sections.sharedAccess.shareTypeSwitchModal.preserveStateLabel1"),": "),h("applications:edit.sections.sharedAccess.shareTypeSwitchModal.preserveStateLabel2")),control:N.createElement(Na.Z,null),disabled:p,"data-componentid":"".concat(o,"-share-type-switch-without-unshare"),className:"mb-3"}),N.createElement(_a.Z,{value:Ba.MS.WITH_UNSHARE,label:N.createElement(d.Z,{variant:"body1"},N.createElement("b",null,h("applications:edit.sections.sharedAccess.shareTypeSwitchModal.resetToDefaultLabel1"),": "),h("applications:edit.sections.sharedAccess.shareTypeSwitchModal.resetToDefaultLabel2")),control:N.createElement(Na.Z,null),disabled:p,"data-componentid":"".concat(o,"-share-type-switch-with-unshare")}))))),N.createElement(N.Fragment,null,N.createElement(R.cV,{"data-componentid":"".concat(o,"-share-all-warning-modal"),onClose:function(){Q(!1)},type:"warning",open:q,primaryAction:h("common:confirm"),secondaryAction:h("common:cancel"),onPrimaryActionClick:function(){Ye(),Q(!1)},onSecondaryActionClick:function(){Q(!1)},assertionHint:h("applications:edit.sections.sharedAccess.showShareAllWarningModal.assertionHint"),assertionType:"checkbox",closeOnDimmerClick:!1},N.createElement(R.cV.Header,null,h("applications:edit.sections.sharedAccess.showShareAllWarningModal.header")),N.createElement(R.cV.Message,{attached:!0,warning:!0},h("applications:edit.sections.sharedAccess.showShareAllWarningModal.message")),N.createElement(R.cV.Content,null,h("applications:edit.sections.sharedAccess.showShareAllWarningModal.description")))))},so=n(17028),uo=n(27331),po=n(71619),mo=n(47625),fo=n(76302),vo={};vo.styleTagTransform=je(),vo.setAttributes=Ne(),vo.insert=Le().bind(null,"head"),vo.domAPI=we(),vo.insertStyleElement=Ze();Oe()(fo.Z,vo);fo.Z&&fo.Z.locals&&fo.Z.locals;function go(e){return go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},go(e)}function ho(e){return function(e){if(Array.isArray(e))return Co(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||So(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach((function(t){yo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=go(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=go(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==go(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||So(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function So(e,t){if(e){if("string"==typeof e)return Co(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Co(e,t):void 0}}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Io=function(e){var t=e.operationId,n=e.operationSummary,i=e["data-componentid"],a=na.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,o=Ao((0,N.useState)(Qe.b$.FAILED),2),r=o[0],l=o[1],c=Ao((0,N.useState)([]),2),s=c[0],u=c[1],d=Ao((0,N.useState)(null),2),p=d[0],m=d[1],f=Ao((0,N.useState)(!0),2),v=f[0],g=f[1],h=Ao((0,N.useState)(!0),2),b=h[0],E=h[1],y=Ao((0,N.useState)({after:null,filter:"status eq ".concat(r),limit:a,shouldFetch:!0}),2),A=y[0],S=y[1],I=(0,P.$)().t,O=function(e,t,n,i,a,o){var r={headers:{Accept:"application/json","Content-Type":"application/json"},method:C.f2.GET,params:{after:a,before:o,filter:n,limit:i},url:Kn.h.getState().config.endpoints.asyncStatus+"/"+e+"/unit-operations"},l=(0,$n.Z)(t?r:null,{shouldRetryOnError:!1});return{data:l.data,error:l.error,isLoading:l.isLoading,isValidating:l.isValidating,mutate:l.mutate}}(t,A.shouldFetch,A.filter,A.limit,A.after,null),w=O.data,T=O.isLoading,L=O.isValidating,_=O.error;(0,N.useEffect)((function(){var e;if(w&&!T&&!L){b&&E(!1),S((function(e){return Eo(Eo({},e),{},{shouldFetch:!1})}));var t=w.unitOperations||[];u((function(e){return[].concat(ho(e),ho(t))}));var n=!1;null==w||null===(e=w.links)||void 0===e||e.forEach((function(e){if("next"===e.rel){var t=new URLSearchParams(e.href.split("?")[1]).get("after");m(t),g(!!t),n=!0}})),n||(m(null),g(!1))}}),[w,T,L,b]),(0,N.useEffect)((function(){_&&(E(!1),g(!1))}),[_]);var Z=function(e){var t=e.id,n=Ao((0,N.useState)(!1),2),i=n[0],a=n[1],o=Ao((0,N.useState)(!1),2),r=o[0],l=o[1];return N.createElement("div",{className:"share-application-status-response-list"},N.createElement("div",{className:"org-id-wrapper",onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)}},N.createElement("span",{className:"ellipsis-text",title:t},t),N.createElement("span",{className:"copy-icon-container"},i&&N.createElement(D.Z,{name:r?"check":"copy outline",title:r?"Copied!":"Copy ID",className:"copy-icon visible",onClick:function(e){e.stopPropagation(),navigator.clipboard.writeText(t),l(!0),setTimeout((function(){return l(!1)}),1e3)},link:!0}))))},U=new Map([[ia.SUCCESS,I("applications:edit.sections.shareApplication.applicationShareFailureSummaryDefaultStatus.success")],[ia.FAILED,I("applications:edit.sections.shareApplication.applicationShareFailureSummaryDefaultStatus.failed")],[ia.PARTIALLY_COMPLETED,I("applications:edit.sections.shareApplication.applicationShareFailureSummaryDefaultStatus.partiallyCompleted")]]),j=[{key:"ALL",text:I("applications:edit.sections.sharedAccess.sharedAccessStatusOptions.all"),value:Qe.b$.ALL},{key:"SUCCESS",text:I("applications:edit.sections.sharedAccess.sharedAccessStatusOptions.success"),value:Qe.b$.SUCCESS},{key:"FAILED",text:I("applications:edit.sections.sharedAccess.sharedAccessStatusOptions.failed"),value:Qe.b$.FAILED},{key:"PARTIALLY_COMPLETED",text:I("applications:edit.sections.sharedAccess.sharedAccessStatusOptions.partiallyCompleted"),value:Qe.b$.PARTIALLY_COMPLETED}];return N.createElement(N.Fragment,null,N.createElement(Ee.Z.Row,{columns:2,verticalAlign:"middle"},N.createElement(Ee.Z.Column,{width:8},n&&N.createElement("p",null,I("applications:wizards.sharedAccessStatus.banner.partiallyCompleted"),n.partiallyCompletedCount," \xa0\xa0 | \xa0\xa0",I("applications:wizards.sharedAccessStatus.banner.failed"),n.failedCount),!n&&"Status counts unavailable"),N.createElement(Ee.Z.Column,{width:8,textAlign:"right"},N.createElement("div",{style:{display:"inline-block"}},N.createElement(mo.Z,{"data-testid":"".concat(i,"-filter-status-dropdown"),"data-componentid":"".concat(i,"-filter-status-dropdown"),selection:!0,options:j,onChange:function(e,t){var n=t.value;l(n),u([]),m(null),g(!0),E(!0),S({after:null,filter:n===Qe.b$.ALL?"":"status eq ".concat(n),limit:a,shouldFetch:!0})},value:r,disabled:b||T})))),N.createElement("div",{className:"share-application-status-response-list"},N.createElement(R.PS,{className:"custom-list-layout-override",id:"share-units",showPagination:!1,showTopActionPanel:!1,isLoading:b&&0===s.length,"data-testid":"".concat(i,"-list-layout"),"data-componentid":"".concat(i,"-list-layout"),totalDataSize:s.length,listItemLimit:a,showLayoutLoading:b&&0===s.length,onPageChange:function(){return null},totalPages:200},N.createElement("div",{id:"scrollableDiv",style:{height:"400px",overflow:"auto"}},0===s.length?N.createElement(R.$J,{"data-testid":"".concat(i,"-empty-list-placeholder"),action:null,image:(0,We.jF)().emptyList,imageSize:"micro",subtitle:[I("applications:edit.sections.attributes.emptySearchResults.title")]}):N.createElement(po.Z,{dataLength:s.length,next:function(){!T&&v&&S((function(e){return Eo(Eo({},e),{},{after:p,shouldFetch:!0})}))},hasMore:v,loader:N.createElement("div",{className:"infinite-scroll-loader"},N.createElement(uo.Z,{size:22,className:"list-item-loader"})),scrollableTarget:"scrollableDiv"},N.createElement(R.wQ,{className:"addon-field-wrapper",isLoading:b&&0===s.length,loadingStateOptions:{count:a,imageType:"circular"},actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"targetOrgId",id:"targetOrgId",key:"targetOrgId",render:function(e){return N.createElement("div",{className:"share-application-status-response-list"},N.createElement(on.Z,{className:"header","data-componentid":"".concat(i,"-application-item-heading")},N.createElement(on.Z.Subheader,{className:"org-handler"},null==e?void 0:e.targetOrgName),N.createElement(on.Z.Content,{className:"org-id"},N.createElement(Z,{id:null==e?void 0:e.targetOrgId}))))},title:"targetOrgId"},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return N.createElement(on.Z,{as:"h6","data-componentid":"".concat(i,"-status-item-heading")},N.createElement(on.Z.Content,null,N.createElement(D.Z,{name:"circle",color:(null==e?void 0:e.status)===ia.SUCCESS?"green":"red",size:"small","data-componentid":"".concat(i,"-status-icon")})))},title:"Status"},{allowToggleVisibility:!1,dataIndex:"statusMessage",id:"statusMessage",key:"statusMessage",render:function(e){return N.createElement(on.Z,{as:"h6","data-componentid":"".concat(i,"-status-item-heading")},N.createElement(on.Z.Content,null,null!=e&&e.statusMessage?null==e?void 0:e.statusMessage:U.get(null==e?void 0:e.status)))},title:"Status Message"}],data:s,onRowClick:function(){return null},transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(i,"-data-table"),"data-componentid":"".concat(i,"-data-table")}))))))};const Oo=function(e){var t=e.operationId,n=e.componentId,i=e.operationSummary;return N.createElement(Io,{operationId:t,operationSummary:i,"data-componentid":"".concat(n,"-list")})};function Ro(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var To=function(e){var t=e.status,n=e.sharingOperationId,l=e["data-componentid"],c=e.sharingOperationSummary,s=Ro((0,N.useState)(!1),2),u=s[0],d=s[1],p=(0,P.$)().t,m=function(e){d(e)},f=new Map([[ia.FAILED,"failed"],[ia.PARTIALLY_COMPLETED,"partiallyCompleted"]]);return N.createElement("div",{className:"banner-wrapper"},t===ia.IN_PROGRESS&&N.createElement("div",{className:"banner-wrapper"},N.createElement(i.Z,{severity:"warning"},N.createElement(a.Z,{className:"alert-title"},N.createElement(Z.c,{components:{strong:N.createElement("strong",null)}},p("applications:edit.sections.shareApplication.asyncOperationStatus.inProgress.heading"))),p("applications:edit.sections.shareApplication.asyncOperationStatus.inProgress.description"))),(t===ia.PARTIALLY_COMPLETED||t===ia.FAILED)&&N.createElement("div",{className:"banner-wrapper"},N.createElement(i.Z,{severity:"warning",action:N.createElement(o.Z,{display:"flex"},N.createElement(r.Z,{className:"banner-view-hide-details",onClick:function(){return m(!0)}},p("applications:edit.sections.shareApplication.asyncOperationStatus."+f.get(t)+".actionText")))},N.createElement(a.Z,{className:"alert-title"},N.createElement(Z.c,{components:{strong:N.createElement("strong",null)}},p("applications:edit.sections.shareApplication.asyncOperationStatus."+f.get(t)+".heading"))),p("applications:edit.sections.shareApplication.asyncOperationStatus."+f.get(t)+".description"))),N.createElement(so.wv,{"data-testid":"".concat(l,"-modal"),"data-componentid":"".concat(l,"-modal"),open:u,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:function(){return m(!1)},closeOnDimmerClick:!1,closeOnEscape:!0},N.createElement(so.wv.MainPanel,null,N.createElement(so.wv.Header,{className:"wizard-header"},p("applications:wizards.sharedAccessStatus.heading"),N.createElement(R.X6,{as:"h6"},p("applications:wizards.sharedAccessStatus.subHeading"))),N.createElement(so.wv.Content,{className:"content-container"},N.createElement(Ee.Z,null,N.createElement(Oo,{componentId:"".concat(l,"-wizard"),operationId:n,operationSummary:c,hasError:!1}))),N.createElement(so.wv.Actions,null,N.createElement(Ee.Z,null,N.createElement(Ee.Z.Row,{column:1},N.createElement(Ee.Z.Column,{mobile:8,tablet:8,computer:8},N.createElement(R.Qj,{"data-testid":"-close-button","data-componentid":"-close-button",floated:"left",onClick:function(){return m(!1)},disabled:!1},p("applications:wizards.sharedAccessStatus.actionText")))))))))};function Lo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var No=function(e){var t=e.application,n=e.onUpdate,i=e.readOnly,a=Lo((0,N.useState)(ia.IDLE),2),o=a[0],r=a[1],l=Lo((0,N.useState)(),2),c=l[0],s=l[1],u=Lo((0,N.useState)(),2),d=u[0],p=u[1],m=(0,U.I0)(),f=(0,P.$)().t,v=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.applications})),g=(0,S.cr)(v,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_SHARED_ACCESS_STATUS")),h=(0,S.cr)(v,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_ROLE_SHARING")),b=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.asyncOperationStatusPollingInterval})),E=new Map([[ia.SUCCESS,{alertLevel:C.QU.SUCCESS,i18nKey:"success"}],[ia.FAILED,{alertLevel:C.QU.ERROR,i18nKey:"failure"}],[ia.PARTIALLY_COMPLETED,{alertLevel:C.QU.ERROR,i18nKey:"partialSuccess"}]]),y=function(e){var t=e.operationType,n=e.subjectId,i=e.pollingInterval,a=e.onStatusChange,o=e.enabled,r=na.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,l={after:null,filter:"subjectId eq ".concat(n," and operationType eq ").concat(t),limit:r},c=(0,N.useRef)(null),s=ca((0,N.useState)(ia.IDLE),2),u=s[0],d=s[1],p=ca((0,N.useState)(null),2),m=p[0],f=p[1],v=(0,U.I0)(),g=(0,P.$)().t,h=function(){var e=la(oa().mark((function e(){var t,n,i,a,o,r,c,s,u,d,p,m,f,v,g;return oa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h=l.after,b=null,E=l.filter,y=l.limit,A=void 0,A={headers:{Accept:"application/json","Content-Type":"application/json"},method:C.f2.GET,params:{after:h,before:b,filter:E,limit:y},url:Kn.h.getState().config.endpoints.asyncStatus},ta(A).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to fetch async operation status.")):Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}));case 2:if(p=e.sent,null!==(t=p.data)&&void 0!==t&&t.operations&&0!==p.data.operations.length){e.next=5;break}return e.abrupt("return",{operationId:null,status:ia.IDLE,summary:{failedCount:0,partiallyCompletedCount:0,successCount:0}});case 5:return m=null===(n=p.data)||void 0===n?void 0:n.operations[0],f=null!==(i=null==m?void 0:m.status)&&void 0!==i?i:ia.IDLE,v=null!==(a=null==m?void 0:m.operationId)&&void 0!==a?a:null,g={failedCount:null!==(o=null==m||null===(r=m.unitOperationDetail)||void 0===r||null===(r=r.summary)||void 0===r?void 0:r.failed)&&void 0!==o?o:0,partiallyCompletedCount:null!==(c=null==m||null===(s=m.unitOperationDetail)||void 0===s||null===(s=s.summary)||void 0===s?void 0:s.partiallyCompleted)&&void 0!==c?c:0,successCount:null!==(u=null==m||null===(d=m.unitOperationDetail)||void 0===d||null===(d=d.summary)||void 0===d?void 0:d.success)&&void 0!==u?u:0},e.abrupt("return",{operationId:v,status:f,summary:g});case 10:case"end":return e.stop()}var h,b,E,y,A}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){o&&(d(ia.IN_PROGRESS),e||(f(null),null!==c.current&&(clearInterval(c.current),c.current=null)),c.current=window.setInterval(la(oa().mark((function e(){var t,n,i,o;return oa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:t=e.sent,n=t.operationId,i=t.status,o=t.summary,m?n===m&&i!==u&&(d(i),null==a||a(n,i,o)):(f(n),i!==u&&(d(i),null==a||a(n,i,o))),i!==ia.IN_PROGRESS&&(clearInterval(c.current),c.current=null,d(ia.IDLE),f(null)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),v((0,I.V_)({description:g("common:asyncOperationErrorMessage.message"),level:C.QU.ERROR,message:g("common:asyncOperationErrorMessage.description")})),clearInterval(c.current),c.current=null;case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),i))},E=function(){var e=la(oa().mark((function e(){var t,n,i,o;return oa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:if(t=e.sent,n=t.operationId,i=t.status,o=t.summary,i!==ia.IDLE){e.next=9;break}return e.abrupt("return");case 9:i!==u&&(null==a||a(n,i,o)),i===ia.IN_PROGRESS&&(d(ia.IN_PROGRESS),f(n),b(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v((0,I.V_)({description:g("common:asyncOperationErrorMessage.description"),level:C.QU.ERROR,message:g("common:asyncOperationErrorMessage.message")}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return(0,N.useEffect)((function(){if(o)return E(),function(){null!==c.current&&clearInterval(c.current)}}),[o]),{startPolling:b,status:u}}({enabled:g,onStatusChange:function(e,t,n){if(o!==ia.IDLE&&t!==ia.IN_PROGRESS){var i=E.get(t);i&&m((0,I.V_)({description:f("applications:edit.sections.shareApplication.completedSharingNotification."+i.i18nKey+".description"),level:i.alertLevel,message:f("applications:edit.sections.shareApplication.completedSharingNotification."+i.i18nKey+".message")}))}r(t),s(e),p(n)},operationType:Qe.jo.B2B_APPLICATION_SHARE,pollingInterval:b,subjectId:t.id}),A=y.status,O=y.startPolling,w=function(){r(ia.IN_PROGRESS),O()};return N.createElement(N.Fragment,null,N.createElement(To,{status:o,sharingOperationId:c,sharingOperationSummary:d}),N.createElement(R.pJ,{className:"advanced-configuration-section",padded:"very"},h?N.createElement(co,{application:t,onApplicationSharingCompleted:function(){return n(null==t?void 0:t.id)},readOnly:i,onOperationStarted:w,operationStatus:A,isSharingInProgress:o===ia.IN_PROGRESS}):N.createElement(Ta,{application:t,onApplicationSharingCompleted:function(){return n(null==t?void 0:t.id)},readOnly:i,onOperationStarted:w,operationStatus:A,isSharingInProgress:o===ia.IN_PROGRESS})))};No.defaultProps={"data-componentid":"application-shared-access"};var Po=n(82659);function Zo(e){return Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zo(e)}function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){Do(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Do(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Zo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Zo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ko(e){return function(e){if(Array.isArray(e))return Ho(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||xo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(e,t){if(e){if("string"==typeof e)return Ho(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ho(e,t):void 0}}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Fo=function(e){var t,n,i,a,o,r,l,c,s,u,d,m,f,v,g,E,y,A,O,w,T,j,D=e.application,M=e.featureConfig,x=e.isLoading,F=e.setIsLoading,V=e.getConfiguredInboundProtocolsList,z=e.getConfiguredInboundProtocolConfigs,G=e.onDelete,W=e.onUpdate,q=e.template,Q=e.readOnly,B=e.urlSearchParams,$=e["data-componentid"],K=(0,P.$)().t,Y=(0,me.z)(),X=Y.isSuperOrganization,ee=Y.isSubOrganization,te=(0,U.I0)(),ne=(0,ce.Z)().UIConfig,fe=(0,ae.Z)(),ye=fe.templateMetadata,Ae=fe.isTemplateMetadataRequestLoading,Se=(0,p.EV)(null==M||null===(t=M.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),Ce=(0,p.EV)(null==M||null===(n=M.branding)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.read),Ie=(0,U.v9)((function(e){return e.application.meta.inboundProtocols})),Oe=(0,U.v9)((function(e){return e.application.oidcConfigurations})),Re=(0,U.v9)((function(e){return e.application.samlConfigurations})),we=(0,U.v9)((function(e){return e.config.ui.isClientSecretHashEnabled})),Te=(0,U.v9)((function(e){return e.auth.tenantDomain})),Le=(0,U.v9)((function(e){return e.organization.isFirstLevelOrganization})),_e=(0,U.v9)((function(e){var t;return null==e||null===(t=e.organization)||void 0===t?void 0:t.organizationType})),Ne=Mo((0,N.useState)(!0),2),Pe=Ne[0],Ze=Ne[1],Ue=Mo((0,N.useState)(void 0),2),je=Ue[0],De=Ue[1],ke=Mo((0,N.useState)(void 0),2),Me=ke[0],xe=ke[1],Ge=Mo((0,N.useState)(!1),2),We=Ge[0],qe=Ge[1],Be=Mo((0,N.useState)(void 0),2),$e=Be[0],Ke=Be[1],Ye=Mo((0,N.useState)([]),2),Xe=Ye[0],Je=Ye[1],et=Mo((0,N.useState)(!1),2),tt=et[0],nt=et[1],at=Mo((0,N.useState)(!1),2),ot=at[0],rt=at[1],lt=Mo((0,N.useState)(!1),2),ct=lt[0],st=lt[1],ut=Mo((0,N.useState)({clientId:"",clientSecret:""}),2),dt=ut[0],pt=ut[1],mt=Mo((0,N.useState)(!1),2),ft=mt[0],vt=mt[1],gt=Mo((0,N.useState)(!1),2),ht=gt[0],bt=gt[1],Et=Mo((0,N.useState)(!1),2),yt=Et[0],At=Et[1],St=se.l.getInstance(),Ct=(null==D||null===(i=D.advancedConfigurations)||void 0===i?void 0:i.fragment)||!1,It=ko(null!==(a=null==ne?void 0:ne.hiddenAuthenticators)&&void 0!==a?a:[]),Ot=Qe.jo.MY_ACCOUNT_CLIENT_ID===(null==D?void 0:D.clientId)||Qe.jo.MY_ACCOUNT_APP_NAME===(null==D?void 0:D.name),Rt=null==M||null===(o=M.applications)||void 0===o||null===(o=o.scopes)||void 0===o?void 0:o.update,Lt=Mo((0,N.useState)(!1),2),_t=Lt[0],Nt=Lt[1],Pt=Mo((0,N.useState)(!1),2),Zt=Pt[0],Ut=Pt[1],jt=Mo((0,N.useState)(!1),2),Dt=jt[0],kt=jt[1],Mt=(0,U.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t||null===(t=t.branding)||void 0===t?void 0:t.disabledFeatures})),xt=function(e){rt(!0),Vt(),W(e)},Ht=function(e){var t=e;return"oauth2"===t?t=H.AI.OIDC:"passivests"===t?t=H.AI.WS_FEDERATION:"wstrust"===t?t=H.AI.WS_TRUST:"samlsso"===t&&(t=H.AI.SAML),t},Ft=function(e){var t,n={},i=[],a=[],o=[];(null==D||null===(t=D.inboundProtocols)||void 0===t?void 0:t.length)>0?(D.inboundProtocols.forEach((function(t){if("openid"!==t.type){var n=Ht(t.type);o.includes(n)||(o.push(n),a.push((0,k.S2)(e,n)))}})),Ze(!0),ve().all(a).then(ve().spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];t.forEach((function(e,t){n=jo(jo({},n),{},Do({},o[t],e)),i.push(o[t])}))}))).catch((function(e){var t,n;404!==(null==e||null===(t=e.response)||void 0===t?void 0:t.status)&&(null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(n=n.data)&&void 0!==n&&n.description?te((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:K("applications:notifications.getInboundProtocolConfig.error.message")})):te((0,I.V_)({description:K("applications:notifications.getInboundProtocolConfig.genericError.description"),level:C.QU.ERROR,message:K("applications:notifications.getInboundProtocolConfig.genericError.message")})))})).finally((function(){!function(e){var t="saml";if(e[t]){var n,i=null===(n=e[t].singleSignOnProfile)||void 0===n?void 0:n.assertion;if(i){var a=i.nameIdFormat;i.nameIdFormat=a.replace(/\//g,":")}}}(n),rt(!0),De(i),xe(n),Ze(!1),V(i),z(n)}))):(De([]),xe({}),Ze(!1),V([]),z({}))},Vt=function(){null!=D&&D.id&&Ft(D.id)},zt=function(e){!(0,_.Z)(e)&&e.clientSecret&&e.clientId&&(pt({clientId:e.clientId,clientSecret:e.clientSecret}),st(!0))},Gt=function(e,t){Ut(!(null!=t&&t.checked)),kt(!0)},Wt=function(){return N.createElement(N.Fragment,null,N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(Ve,null)),N.createElement(ge.Z,{hidden:!0}),!ee()&&N.createElement(p.di,{when:Rt},N.createElement(R.v9,{sectionHeader:K("applications:dangerZoneGroup.header")},N.createElement(R.cN,{actionTitle:K("applications:dangerZoneGroup.disableApplication.actionTitle"),header:K("applications:dangerZoneGroup.disableApplication.header"),subheader:K("applications:dangerZoneGroup.disableApplication.subheader"),onActionClick:void 0,toggle:{checked:!D.applicationEnabled,onChange:Gt},"data-testid":"".concat($,"-danger-zone-disable")}))),N.createElement(R.cV,{onClose:function(){return kt(!1)},type:"warning",open:Dt,primaryAction:K("common:confirm"),secondaryAction:K("common:cancel"),onSecondaryActionClick:function(){return kt(!1)},onPrimaryActionClick:function(){return Nt(!0),void(0,k.GB)(D.id,Zt).then((function(){te((0,I.V_)({description:K("applications:notifications.disableApplication.success.description",{state:Zt?"enabled":"disabled"}),level:C.QU.SUCCESS,message:K("applications:notifications.disableApplication.success.message",{state:Zt?"enabled":"disabled"})})),kt(!1),W(D.id)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?te((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:K("applications:notifications.disableApplication.error.message")})):te((0,I.V_)({description:K("applications:notifications.disableApplication.genericError.description",{state:Zt?"enable":"disable"}),level:C.QU.ERROR,message:K("applications:notifications.disableApplication.genericError.message")}))})).finally((function(){Nt(!1)}))},closeOnDimmerClick:!1,primaryActionLoading:_t,"data-testid":"".concat($,"-myAccount-disable-confirmation-modal")},N.createElement(R.cV.Header,{"data-testid":"".concat($,"-myAccount-disable-confirmation-modal-header")},K(Zt?"applications:confirmations.enableApplication.header":"applications:confirmations.disableApplication.header")),N.createElement(R.cV.Message,{attached:!0,warning:!0,"data-testid":"".concat($,"-myAccount-disable-confirmation-modal-message")},K(Zt?"applications:confirmations.enableApplication.message":"applications:confirmations.disableApplication.message")),N.createElement(R.cV.Content,{"data-testid":"".concat($,"-application-disable-confirmation-modal-content")},Zt?K("applications:confirmations.enableApplication.content"):N.createElement(N.Fragment,null,N.createElement(Z.c,{i18nKey:"applications:confirmations.disableApplication.content.0"},"This may prevent consumers from accessing the application, but it can be resolved by re-enabling the application."),N.createElement("br",null),N.createElement("br",null),N.createElement(Z.c,{i18nKey:"applications:confirmations.disableApplication.content.1"},"Ensure that the references to the application in",N.createElement(R.rU,{"data-componentid":"".concat($,"-link-email-templates-page"),onClick:function(){return b.m.push(h.$.getPaths().get("EMAIL_MANAGEMENT"))},external:!1},"email templates")," and other relevant locations are updated to reflect the application status accordingly.")))))},qt=function(){var e;return N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(di,{accessUrl:null==D?void 0:D.accessUrl,appId:null==D?void 0:D.id,description:null==D?void 0:D.description,discoverability:null==D||null===(e=D.advancedConfigurations)||void 0===e?void 0:e.discoverableByEndUsers,imageUrl:null==D?void 0:D.imageUrl,name:null==D?void 0:D.name,application:D,isLoading:x,onDelete:G,onUpdate:xt,featureConfig:M,template:q,isBrandingSectionHidden:Mt.includes(re.H.APP_WISE_BRANDING_FEATURE_TAG)||!Ce,readOnly:Q||ue.tZ.editApplication.getTabPanelReadOnlyStatus("APPLICATION_EDIT_GENERAL_SETTINGS",D),"data-componentid":"".concat($,"-general-settings"),isManagementApp:null==D?void 0:D.isManagementApp}))},Qt=function(){var e;return N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(ze.E,{application:D,allowedOriginList:Xe,certificate:null==D||null===(e=D.advancedConfigurations)||void 0===e?void 0:e.certificate,onAllowedOriginsUpdate:function(){return nt(!tt)},onApplicationSecretRegenerate:zt,appId:null==D?void 0:D.id,appName:null==D?void 0:D.name,applicationTemplateId:null==D?void 0:D.templateId,extendedAccessConfig:void 0!==$e,isLoading:x,setIsLoading:F,onUpdate:xt,onProtocolUpdate:Vt,isInboundProtocolConfigRequestLoading:Pe,inboundProtocolsLoading:Pe,inboundProtocolConfig:Me,inboundProtocols:je,featureConfig:M,template:q,readOnly:Q||ue.tZ.editApplication.getTabPanelReadOnlyStatus("APPLICATION_EDIT_ACCESS_CONFIG",D),isDefaultApplication:Qe.jo.DEFAULT_APPS.includes(null==D?void 0:D.name),isSystemApplication:Qe.jo.SYSTEM_APPS.includes(null==D?void 0:D.name),"data-componentid":"".concat($,"-access-settings")}))},Bt=function(){return N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(wn,{appId:D.id,appVersion:null==D?void 0:D.applicationVersion,technology:D.inboundProtocols,claimConfigurations:D.claimConfiguration,featureConfig:M,onlyOIDCConfigured:((null==D?void 0:D.templateId)===pi.id||(null==D?void 0:D.templateId)===Qe.jo.CUSTOM_APPLICATION_OIDC)&&0===(null==je?void 0:je.length)||1===(null==je?void 0:je.length)&&je[0]===H.AI.OIDC,onUpdate:xt,applicationTemplateId:null==D?void 0:D.templateId,inboundProtocolConfig:Me,readOnly:Q,"data-componentid":"".concat($,"-attribute-settings")}))},$t=function(){var e;return N.createElement(N.Fragment,null,N.createElement(He,null),N.createElement(de.Z,null,N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(Po.I,{application:D,appId:D.id,authenticationSequence:D.authenticationSequence,clientId:null==Me||null===(e=Me.oidc)||void 0===e?void 0:e.clientId,hiddenAuthenticators:It,isLoading:x,onUpdate:xt,featureConfig:M,readOnly:Q,"data-componentid":"".concat($,"-sign-on-methods")}))))},Kt=function(){return N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(it,{appId:D.id,advancedConfigurations:D.advancedConfigurations,onUpdate:xt,featureConfig:M,readOnly:Q,template:q,"data-componentid":"".concat($,"-advanced-settings")}))},Yt=function(){return ue.tZ.editApplication.showProvisioningSettings?N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(ea,{application:D,provisioningConfigurations:D.provisioningConfigurations,onUpdate:xt,featureConfig:M,readOnly:Q,"data-componentid":"".concat($,"-provisioning-settings")})):null},Xt=function(){return N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(No,{application:D,onUpdate:xt,readOnly:Q,"data-componentid":"".concat($,"-shared-access")}))},Jt=function(){return N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(_i,{appId:D.id,inboundProtocols:null==D?void 0:D.inboundProtocols,isOIDCConfigLoading:ft,isSAMLConfigLoading:ht,templateId:null==D?void 0:D.templateId,"data-componentid":"".concat($,"-server-endpoints")}))},en=function(e){var t,n=[];return null==ye||null===(t=ye.edit)||void 0===t||null===(t=t.tabs)||void 0===t||t.forEach((function(t){switch(null==t?void 0:t.contentType){case oe.bE.GUIDE:null!=t&&t.guide&&n.push({componentId:null==t?void 0:t.id,"data-tabid":null==t?void 0:t.id,menuItem:null==t?void 0:t.displayName,render:function(){return e=null==t?void 0:t.guide,i=Ht(null==D||null===(n=D.inboundProtocols)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.type),N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(ie,{application:D,inboundProtocolConfigurations:null==Me?void 0:Me[i],content:e,isLoading:x,protocolName:i}));var e,n,i}});break;case oe.bE.FORM:null!=t&&t.form&&n.push({componentId:null==t?void 0:t.id,"data-tabid":null==t?void 0:t.id,menuItem:null==t?void 0:t.displayName,render:function(){return function(e){var t,n=Ht(null==D||null===(t=D.inboundProtocols)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.type);return N.createElement(R.M$.Pane,{controlledSegmentation:!0},N.createElement(J,{tab:e,application:D,protocolName:n,inboundProtocolConfigurations:null==Me?void 0:Me[n],isLoading:x,onUpdate:xt,onProtocolUpdate:Vt,readOnly:Q}))}(t)}});break;default:i=t,(a=null==e?void 0:e.find((function(e){return(null==e?void 0:e["data-tabid"])===(null==i?void 0:i.id)})))&&(null!=i&&i.displayName&&(a.menuItem=null==i?void 0:i.displayName),n.push(a))}var i,a})),(null==n?void 0:n.length)>0?n:e},tn=(y=[],A=[],j=!$e&&ue.tZ.editApplication.extendTabs&&(null==D?void 0:D.templateId)!==Qe.jo.CUSTOM_APPLICATION_OIDC&&(null==D?void 0:D.templateId)!==Qe.jo.CUSTOM_APPLICATION_PASSIVE_STS&&(null==D?void 0:D.templateId)!==Qe.jo.CUSTOM_APPLICATION_SAML?[]:($e&&(null==$e?void 0:$e.length)>0&&A.push.apply(A,ko((0,L.Z)($e))),M?(Ot&&y.push({componentId:"overview",menuItem:K("applications:myaccount.overview.tabName"),render:Wt}),!(0,S.cr)(null==M?void 0:M.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_GENERAL_SETTINGS"))||ee()&&Mt.includes(re.H.APP_WISE_BRANDING_FEATURE_TAG)||Ot||ue.tZ.editApplication.isTabEnabledForApp(null==Me||null===(s=Me.oidc)||void 0===s?void 0:s.clientId,wt.wF.GENERAL,Te)&&y.push({componentId:"general","data-tabid":ue.N0.GENERAL,menuItem:N.createElement(he.Z.Item,{"data-tourid":"general"},K("applications:edit.sections.general.tabName")),render:function(){var e;return ue.tZ.editApplication.getOverriddenTab(null==Me||null===(e=Me.oidc)||void 0===e?void 0:e.clientId,wt.wF.GENERAL,qt(),D,Te)}}),!(0,S.cr)(null==M?void 0:M.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_ACCESS_CONFIG"))||Ct||Ot||ue.tZ.editApplication.isTabEnabledForApp(null==Me||null===(u=Me.oidc)||void 0===u?void 0:u.clientId,wt.wF.PROTOCOL,Te)&&y.push({componentId:"protocol","data-tabid":ue.N0.PROTOCOL,menuItem:K("applications:edit.sections.access.tabName"),render:Qt}),(0,S.cr)(null==M?void 0:M.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_ATTRIBUTE_MAPPING"))&&!Ct&&!yt&&(null!=ne&&null!==(r=ne.legacyMode)&&void 0!==r&&r.applicationSystemAppsSettings||(null==D?void 0:D.name)!==Qe.jo.MY_ACCOUNT_APP_NAME)&&ue.tZ.editApplication.isTabEnabledForApp(null==Me||null===(d=Me.oidc)||void 0===d?void 0:d.clientId,wt.wF.USER_ATTRIBUTES,Te)&&y.push({componentId:"user-attributes","data-tabid":ue.N0.USER_ATTRIBUTES,menuItem:N.createElement(he.Z.Item,{"data-tourid":"attributes"},K("applications:edit.sections.attributes.tabName")),render:function(){var e;return ue.tZ.editApplication.getOverriddenTab(null==Me||null===(e=Me.oidc)||void 0===e?void 0:e.clientId,wt.wF.USER_ATTRIBUTES,Bt(),D,Te)}}),(0,S.cr)(null==M?void 0:M.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_SIGN_ON_METHOD_CONFIG"))&&!yt&&(X()||ee()&&Ct||Le)&&ue.tZ.editApplication.isTabEnabledForApp(null==Me||null===(m=Me.oidc)||void 0===m?void 0:m.clientId,wt.wF.SIGN_IN_METHOD,Te)&&y.push({componentId:"sign-in-method","data-tabid":ue.N0.SIGN_IN_METHODS,menuItem:N.createElement(he.Z.Item,{"data-tourid":"sign-in-methods"},K("applications:edit.sections.signOnMethod.tabName")),render:$t}),ue.tZ.editApplication.showProvisioningSettings&&(0,S.cr)(null==M?void 0:M.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_PROVISIONING_SETTINGS"))&&!ee()&&!yt&&(null!=ne&&null!==(l=ne.legacyMode)&&void 0!==l&&l.applicationSystemAppsSettings||(null==D?void 0:D.name)!==Qe.jo.MY_ACCOUNT_APP_NAME)&&ue.tZ.editApplication.isTabEnabledForApp(null==Me||null===(f=Me.oidc)||void 0===f?void 0:f.clientId,wt.wF.PROVISIONING,Te)&&y.push({componentId:"provisioning","data-tabid":ue.N0.PROVISIONING,menuItem:K("applications:edit.sections.provisioning.tabName"),render:Yt}),(0,S.cr)(null==M?void 0:M.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_ADVANCED_SETTINGS"))&&!ee()&&!yt&&(null!=ne&&null!==(c=ne.legacyMode)&&void 0!==c&&c.applicationSystemAppsSettings||(null==D?void 0:D.name)!==Qe.jo.MY_ACCOUNT_APP_NAME)&&ue.tZ.editApplication.isTabEnabledForApp(null==Me||null===(v=Me.oidc)||void 0===v?void 0:v.clientId,wt.wF.ADVANCED,Te)&&y.push({componentId:"advanced","data-tabid":ue.N0.ADVANCED,menuItem:N.createElement(he.Z.Item,{"data-tourid":"advanced"},K("applications:edit.sections.advanced.tabName")),render:function(){var e;return ue.tZ.editApplication.getOverriddenTab(null==Me||null===(e=Me.oidc)||void 0===e?void 0:e.clientId,wt.wF.ADVANCED,Kt(),D,Te,xt,Q)}}),(0,S.cr)(null==M?void 0:M.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_SHARED_ACCESS"))&&!Ct&&!yt&&ue.tZ.editApplication.showApplicationShare&&(Le||window.AppUtils.getConfig().organizationName)&&Se&&_e!==pe.$B.SUBORGANIZATION&&!Qe.jo.SYSTEM_APPS.includes(null==D?void 0:D.clientId)&&ue.tZ.editApplication.isTabEnabledForApp(null==Me||null===(g=Me.oidc)||void 0===g?void 0:g.clientId,wt.wF.INFO,Te)&&y.push({componentId:"shared-access","data-tabid":ue.N0.SHARED_ACCESS,menuItem:K("applications:edit.sections.sharedAccess.tabName"),render:Xt}),!(0,S.cr)(null==M?void 0:M.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_INFO"))||ee()||Ot||ue.tZ.editApplication.isTabEnabledForApp(null==Me||null===(E=Me.oidc)||void 0===E?void 0:E.clientId,wt.wF.INFO,Te)&&y.push({componentId:"info","data-tabid":ue.N0.INFO,menuItem:{content:K("applications:edit.sections.info.tabName"),icon:"info circle"},render:Jt}),A.forEach((function(e){y.splice(null==e?void 0:e.index,0,e)})),y):[{componentId:"general","data-tabid":ue.N0.GENERAL,menuItem:K("applications:edit.sections.general.tabName"),render:qt},{componentId:"protocol","data-tabid":ue.N0.PROTOCOL,menuItem:K("applications:edit.sections.access.tabName"),render:Qt},{componentId:"user-attributes","data-tabid":ue.N0.USER_ATTRIBUTES,menuItem:K("applications:edit.sections.attributes.tabName"),render:Bt},{componentId:"sign-in-method","data-tabid":ue.N0.SIGN_IN_METHODS,menuItem:K("applications:edit.sections.signOnMethod.tabName"),render:$t},ue.tZ.editApplication.showProvisioningSettings&&{componentId:"provisioning","data-tabid":ue.N0.PROVISIONING,menuItem:K("applications:edit.sections.provisioning.tabName"),render:Yt},{componentId:"advanced","data-tabid":ue.N0.ADVANCED,menuItem:K("applications:edit.sections.advanced.tabName"),render:Kt},{componentId:"shared-access","data-tabid":ue.N0.SHARED_ACCESS,menuItem:K("applications:edit.sections.sharedAccess.tabName"),render:Xt},{componentId:"info","data-tabid":ue.N0.INFO,menuItem:{content:K("applications:edit.sections.info.tabName"),icon:"info circle grey"},render:Jt}]),null!=ye&&null!==(O=ye.edit)&&void 0!==O&&O.tabs&&Array.isArray(null==ye||null===(w=ye.edit)||void 0===w?void 0:w.tabs)&&(null==ye||null===(T=ye.edit)||void 0===T||null===(T=T.tabs)||void 0===T?void 0:T.length)>0?en(j):j);(0,N.useEffect)((function(){var e;(0,_.Z)(null===(e=window)||void 0===e||null===(e=e.location)||void 0===e?void 0:e.hash)&&(B.get(Qe.jo.APP_STATE_STRONG_AUTH_PARAM_KEY)===Qe.jo.APP_STATE_STRONG_AUTH_PARAM_VALUE?window.location.hash=R.iU+ue.N0.SIGN_IN_METHODS:"true"===B.get(Qe.jo.IS_PROTOCOL)?window.location.hash=R.iU+ue.N0.PROTOCOL:"true"===B.get(Qe.jo.IS_ROLES)&&(window.location.hash=R.iU+ue.N0.APPLICATION_ROLES))}),[B]),(0,N.useEffect)((function(){(null==q?void 0:q.id)===wt.u.M2M_APPLICATION&&At(!0)}),[q]),(0,N.useEffect)((function(){var e=[];X()&&(0,le.Z)().then((function(t){null==t||t.map((function(t){e.push(null==t?void 0:t.url)})),Je(e)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?te((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:K("applications:notifications.fetchAllowedCORSOrigins.error.message")})):te((0,I.V_)({description:K("applications:notifications.fetchAllowedCORSOrigins.genericError.description"),level:C.QU.ERROR,message:K("applications:notifications.fetchAllowedCORSOrigins.genericError.message")}))}))}),[tt]),(0,N.useEffect)((function(){(0,_.Z)(Ie)&&(qe(!0),Tt.y.getInboundProtocols(Fe.oK,!1).finally((function(){qe(!1)})))}),[Ie]),(0,N.useEffect)((function(){null!=D&&D.inboundProtocols&&null!=D&&D.id&&Ft(D.id)}),[JSON.stringify(null==D?void 0:D.inboundProtocols)]),(0,N.useEffect)((function(){void 0===Re&&(bt(!0),Tt.y.getSAMLApplicationMeta().finally((function(){bt(!1)})))}),[Re,Me]),(0,N.useEffect)((function(){void 0===Oe&&(vt(!0),Tt.y.getOIDCApplicationMeta().finally((function(){vt(!1)})))}),[Oe,Me]),(0,N.useEffect)((function(){var e;if((!$e||ot)&&null!=D&&D.id&&!Pe){Me&&Re&&null!=Re&&Re.certificate&&(Me.certificate=null==Re?void 0:Re.certificate,Me.ssoUrl=null==Re?void 0:Re.ssoUrl,Me.issuer=null==Re?void 0:Re.issuer);var t=ue.tZ.editApplication.getTabExtensions({application:D,content:null==q||null===(e=q.content)||void 0===e?void 0:e.quickStart,inboundProtocolConfig:Me,inboundProtocols:je,onApplicationUpdate:function(){xt(null==D?void 0:D.id)},onTriggerTabUpdate:function(e){b.m.push({hash:"#tab=".concat(e)})},template:q},M,Q,Te);Ke(t),rt(!1)}}),[$e,q,D,je,Me,Pe]),(0,N.useEffect)((function(){B.get(Qe.jo.CLIENT_SECRET_HASH_ENABLED_URL_SEARCH_PARAM_KEY)&&st(!0)}),[B.get(Qe.jo.CLIENT_SECRET_HASH_ENABLED_URL_SEARCH_PARAM_KEY)]);return!D||We||null==je||!$e&&ue.tZ.editApplication.extendTabs?N.createElement(R.pO,null):N.createElement(N.Fragment,null,N.createElement(R.M$,{isLoading:x||Ae,"data-componentid":"".concat($,"-resource-tabs"),controlTabRedirectionInternally:!0,defaultActiveTab:function(){var e,t,n=0;(ue.tZ.editApplication.extendTabs&&(null==q?void 0:q.id)!==pi.id&&!ee()&&(n=1),null!=ye&&null!==(e=ye.edit)&&void 0!==e&&e.defaultActiveTabId)&&(n=null==ye||null===(t=ye.edit)||void 0===t?void 0:t.defaultActiveTabId);return n}(),onTabChange:function(e,t){St.compute((function(){St.publish("application-switch-edit-application-tabs",{type:t.panes[t.activeIndex].componentId})}))},panes:tn}),ct&&function(){if(!we)return null;if(!je.includes(H.AI.OIDC)||(0,_.Z)(null==Me?void 0:Me.oidc)||!Me.oidc.clientId||!Me.oidc.clientSecret)return null;var e=dt.clientSecret||Me.oidc.clientSecret,t=dt.clientId||Me.oidc.clientId;return N.createElement(R.cV,{"data-componentid":"".concat($,"-client-secret-hash-disclaimer-modal"),type:"warning",open:!0,primaryAction:K("common:confirm"),onPrimaryActionClick:function(){st(!1),pt({clientId:"",clientSecret:""})}},N.createElement(R.cV.Header,{"data-componentid":"".concat($,"-client-secret-hash-disclaimer-modal-header")},K("applications:confirmations.clientSecretHashDisclaimer.modal.header")),N.createElement(R.cV.Message,{attached:!0,warning:!0,"data-componentid":"".concat($,"-client-secret-hash-disclaimer-modal-message")},K("applications:confirmations.clientSecretHashDisclaimer.modal.message")),N.createElement(R.cV.Content,{"data-componentid":"".concat($,"-client-secret-hash-disclaimer-modal-content")},N.createElement(be.Z,null,N.createElement(Ee.Z.Row,null,N.createElement(Ee.Z.Column,null,N.createElement(be.Z.Field,null,N.createElement("label",null,K("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientId.label")),N.createElement(R.OR,{value:t,hideSecretLabel:K("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientId.hide"),showSecretLabel:K("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientId.show"),"data-componentid":"".concat($,"-client-secret-readonly-input")})),N.createElement(be.Z.Field,null,N.createElement("label",null,K("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientSecret.label")),N.createElement(R.OR,{secret:!0,value:e,hideSecretLabel:K("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientSecret.hide"),showSecretLabel:K("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientSecret.show"),"data-componentid":"".concat($,"-client-secret-readonly-input")})))))))}())};Fo.defaultProps={"data-componentid":"edit-application",getConfiguredInboundProtocolConfigs:function(){return null},getConfiguredInboundProtocolsList:function(){return null}};var Vo=n(18723),zo=n(64197),Go={};Go.styleTagTransform=je(),Go.setAttributes=Ne(),Go.insert=Le().bind(null,"head"),Go.domAPI=we(),Go.insertStyleElement=Ze();Oe()(zo.Z,Go);zo.Z&&zo.Z.locals&&zo.Z.locals;function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Qo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Qo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qo(e){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(e)}function Bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Ko=function(e){var t,n,w,F,V,z,G,W=e.location,q=e["data-componentid"],Q=new URLSearchParams(W.search),B=(0,P.$)().t,$=(0,U.I0)(),K=(0,R.fQ)().getLink,Y=(0,N.useRef)(null),X=(0,y.Z)(A.P.APPLICATIONS).data,J=(0,U.v9)((function(e){return e.application.templates})),ee=(0,U.v9)((function(e){return e.config.ui.features})),te=(0,U.v9)((function(e){return e.auth.tenantDomain})),ne=(0,p.EV)(null==ee||null===(t=ee.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),ie=Bo((0,N.useState)(void 0),2),ae=ie[0],oe=ie[1],re=Bo((0,N.useState)(void 0),2),le=re[0],ce=re[1],se=Bo((0,N.useState)(void 0),2),ue=se[0],de=se[1],pe=Bo((0,N.useState)(void 0),2),me=pe[0],fe=pe[1],ve=Bo((0,N.useState)(void 0),2),ge=(ve[0],ve[1]),he=Bo((0,N.useState)(void 0),2),be=he[0],Ee=he[1],ye=Bo((0,N.useState)(!1),2),Ae=ye[0],Se=ye[1],Ce=Bo((0,N.useState)(!1),2),Ie=Ce[0],Oe=Ce[1],Re=Bo((0,N.useState)(),2),we=Re[0],Te=Re[1],Le=Bo((0,N.useState)(),2),_e=Le[0],Ne=Le[1],Pe=Bo((0,N.useState)(),2),Ze=Pe[0],Ue=Pe[1],je=Bo((0,N.useState)(!1),2),De=je[0],ke=je[1],Me=(0,M.b)(ae,!!ae),xe=Me.data,He=Me.mutate,Ve=Me.error,ze=(0,x.Z)(ae,H.bA.OIDC,!!ae).data,Ge=(0,v.u)(we,De).mutate,We=Bo((0,N.useState)(!1),2),qe=We[0],Be=We[1],$e=Bo((0,N.useState)(!1),2),Ke=$e[0],Ye=$e[1],Xe=Bo((0,N.useState)(!1),2),Je=Xe[0],et=Xe[1],tt=Bo((0,N.useState)(!1),2),nt=tt[0],it=tt[1],at=Bo((0,N.useState)(void 0),2),ot=at[0],rt=at[1],lt=(0,U.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t?void 0:t.applications}));(0,N.useEffect)((function(){var e;if(xe&&ze&&(null==xe||null===(e=xe.advancedConfigurations)||void 0===e||!e.fragment)){var t=Tt.y.isApplicationOutdated(null==xe?void 0:xe.applicationVersion,!0);Ye(t)}}),[xe,ze]),(0,N.useEffect)((function(){J&&J instanceof Array&&J.length>0||Vo.e.getApplicationTemplates().finally()}),[J]),(0,N.useEffect)((function(){var e,t,n=null===b.m||void 0===b.m||null===(e=b.m.location)||void 0===e||null===(e=e.pathname)||void 0===e?void 0:e.split("/"),i=null===(t=n[(null==n?void 0:n.length)-1])||void 0===t?void 0:t.split("#")[0];oe(i)}),[]);var ct=function(e){var t=function(e){return e===Qe.jo.CUSTOM_APPLICATION_OIDC||e===Qe.jo.CUSTOM_APPLICATION_SAML||e===Qe.jo.CUSTOM_APPLICATION_PASSIVE_STS?null==J?void 0:J.find((function(e){return(null==e?void 0:e.id)===pi.id})):null==J?void 0:J.find((function(t){return(null==t?void 0:t.id)===e}))},n=t(null==e?void 0:e.templateId);if(!n){var i=null==X?void 0:X.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.templateId)}));if(i){var a,o;de(i);var r=null!==(a=Fe.Eg.get(null==e||null===(o=e.inboundProtocols)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.type))&&void 0!==a?a:Qe.jo.CUSTOM_APPLICATION_OIDC;e.templateId=r,n=(0,L.Z)(t(r)),null!=i&&i.id&&(n[Qe.jo.ORIGINAL_TEMPLATE_ID_PROPERTY]=null==i?void 0:i.id,e[Qe.jo.ORIGINAL_TEMPLATE_ID_PROPERTY]=null==i?void 0:i.id)}}return ce(n),fe(!1),e},st=(0,N.useMemo)((function(){var e;if(me||fe(!0),!J||!X||!xe)return null;var t,n,i,a=(0,L.Z)(xe);return null!=a&&null!==(e=a.advancedConfigurations)&&void 0!==e&&e.fragment||null!=a&&a.templateId?ct(a):(null==a||null===(t=a.inboundProtocols)||void 0===t?void 0:t.length)>0?(a.templateId=null!==(n=Fe.Eg.get(null==a||null===(i=a.inboundProtocols)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.type))&&void 0!==n?n:Qe.jo.CUSTOM_APPLICATION_OIDC,ct(a)):(fe(!1),a)}),[J,X,xe]);(0,N.useEffect)((function(){var e;Ve&&(null!==(e=Ve.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?$((0,I.V_)({description:Ve.response.data.description,level:C.QU.ERROR,message:B("applications:notifications.fetchApplication.error.message")})):$((0,I.V_)({description:B("applications:notifications.fetchApplication.genericError.description"),level:C.QU.ERROR,message:B("applications:notifications.fetchApplication.genericError.message")})))}),[Ve]),(0,N.useEffect)((function(){if(Y){var e=null==Y?void 0:Y.current;e&&e.offsetWidth<e.scrollWidth&&Se(!0)}}),[Y,me]),(0,N.useEffect)((function(){if("object"===Qo(b.m.location.state)){Oe(!0);var e=b.m.location.state;Te(e.id),Ne(e.name),ke(e.isLocalAuthenticator),(null==e?void 0:e.redirectTo)&&Ue(e.redirectTo)}})),(0,N.useEffect)((function(){ee&&ee.applications&&((0,S.cr)(ee.applications,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))||b.m.push(h.$.getPaths().get("PAGE_NOT_FOUND")))}),[ee]);var ut,dt,pt=function(){return N.createElement(O.Es,{onSubmit:ft,"data-componentId":"".concat(q,"-application-outdated-banner-form")},N.createElement(l.Z,{className:"banner-grid"},N.createElement(c.Z,{dense:!0},!Tt.y.isAppVersionAllowed(null==xe?void 0:xe.applicationVersion,Qe.jo.APP_VERSION_1)&&(null==ze?void 0:ze.grantTypes.includes(Qe.jo.CLIENT_CREDENTIALS_GRANT))&&N.createElement(s.Z,{sx:{display:"list-item",listStyleType:"disc"}},N.createElement(u.Z,null,N.createElement(d.Z,{variant:"body2"},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.fields.versions.version100.useClientIdAsSubClaimOfAppTokens.instruction")},"The ",N.createElement(R.EK,{withBackground:!0},"sub")," attribute of an application access token now returns the",N.createElement(R.EK,{withBackground:!0},"client_id")," generated for the application, instead of the ",N.createElement(R.EK,{withBackground:!0},"userid"),"of the application owner.")),N.createElement(R.eb,{link:K("develop.applications.editApplication.outdatedApplications.versions.version100.useClientIdAsSubClaimOfAppTokens.documentationLink"),showEmptyLink:!1},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.documentationHint")})))),!Tt.y.isAppVersionAllowed(null==xe?void 0:xe.applicationVersion,Qe.jo.APP_VERSION_1)&&(null==ze?void 0:ze.grantTypes.includes(Qe.jo.CLIENT_CREDENTIALS_GRANT))&&N.createElement(s.Z,{sx:{display:"list-item",listStyleType:"disc"}},N.createElement(u.Z,null,N.createElement(d.Z,{variant:"body2"},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.fields.versions.version100.removeUsernameFromIntrospectionRespForAppTokens.instruction")},"The introspection responses for application access tokens no longer return the ",N.createElement(R.EK,{withBackground:!0},"username")," attribute.")),N.createElement(R.eb,{link:K("develop.applications.editApplication.outdatedApplications.versions.version100.removeUsernameFromIntrospectionRespForAppTokens.documentationLink"),showEmptyLink:!1},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.documentationHint")})))),!Tt.y.isAppVersionAllowed(null==xe?void 0:xe.applicationVersion,Qe.jo.APP_VERSION_2)&&ze&&N.createElement(s.Z,{sx:{display:"list-item",listStyleType:"disc"}},N.createElement(u.Z,null,N.createElement(d.Z,{variant:"body2"},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.fields.versions.version200.addAllRequestedClaimsInJWTAccessToken.instruction")},"Irrespective of the ",N.createElement(R.EK,{withBackground:!0},"scopes")," requested, all the ",N.createElement(R.EK,{withBackground:!0}," requested attributes")," will be included in the JWT Access Token.")),N.createElement(R.eb,{link:K("develop.applications.editApplication.outdatedApplications.versions.version200.addAllRequestedClaimsInJWTAccessToken.documentationLink"),showEmptyLink:!1},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.documentationHint")})))),!Tt.y.isAppVersionAllowed(null==xe?void 0:xe.applicationVersion,Qe.jo.APP_VERSION_3)&&ze&&N.createElement(s.Z,{sx:{display:"list-item",listStyleType:"disc"}},N.createElement(u.Z,null,N.createElement(d.Z,{variant:"body2"},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.fields.versions.version300.linkedLocalAccountAttributeHandling.instruction")},"When you enable the use of linked local account attributes instead of federated attributes and mandate that a linked local account must exist, this configuration previously applied only to the",N.createElement(R.EK,{withBackground:!0},"token exchange")," flow. With this update, the same restriction now also applies to",N.createElement(R.EK,{withBackground:!0},"login")," scenarios.")),N.createElement(R.eb,{link:K("develop.applications.editApplication.outdatedApplications.versions.version300.linkedLocalAccountAttributeHandling.documentationLink"),showEmptyLink:!1},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.documentationHint")})))))),N.createElement(d.Z,{variant:"body2",className:"banner-action"},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.alert.action")})),N.createElement(r.Z,{variant:"contained",type:"submit","data-componentId":"".concat(q,"-outdated-app-update-button")},B("common:update")),nt&&mt())},mt=function(){return N.createElement(R.cV,{primaryActionLoading:Je,"data-componentId":"".concat(q,"-application-update-confirmation-modal"),onClose:function(){return it(!1)},type:"negative",open:nt,assertionHint:B("applications:forms.inboundOIDC.sections.outdatedApplications.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){it(!1)},onPrimaryActionClick:vt,closeOnDimmerClick:!1},N.createElement(R.cV.Header,{"data-componentId":"".concat(q,"-application-update-confirmation-modal-header")},B("applications:forms.inboundOIDC.sections.outdatedApplications.confirmationModal.header")),N.createElement(R.cV.Message,{"data-componentId":"".concat(q,"-application-update-confirmation-modal-message"),attached:!0,negative:!0},B("applications:forms.inboundOIDC.sections.outdatedApplications.confirmationModal.message")),N.createElement(R.cV.Content,{"data-componentId":"".concat(q,"-application-update-confirmation-modal-content")},B("applications:forms.inboundOIDC.sections.outdatedApplications.confirmationModal.content")))},ft=function(){He().then((function(e){var t,n,i={applicationVersion:Qe.jo.LATEST_VERSION,id:null===(t=e.data)||void 0===t?void 0:t.id,name:null===(n=e.data)||void 0===n?void 0:n.name};rt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i)),it(!0)}))},vt=function(){et(!0),(0,k.hN)(ot).then((function(){$((0,I.V_)({description:B("applications:notifications.updateApplication.success.description"),level:C.QU.SUCCESS,message:B("applications:notifications.updateApplication.success.message")})),Ye(!1),it(!1),Be(!1)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?$((0,I.V_)({description:e.response.data.description,level:C.QU.ERROR,message:B("applications:notifications.updateApplication.error.message")})):$((0,I.V_)({description:B("applications:notifications.updateApplication.genericError.description"),level:C.QU.ERROR,message:B("applications:notifications.updateApplication.genericError.message")}))})).finally((function(){et(!1),He()}))};return N.createElement(R.O9,{pageTitle:"Edit Application",title:N.createElement(N.Fragment,null,N.createElement("span",null,null==st?void 0:st.name)),contentTopMargin:!0,description:null!==(n=E.t.editApplication.getOverriddenDescription(null==be||null===(w=be.oidc)||void 0===w?void 0:w.clientId,te,null==le?void 0:le.name))&&void 0!==n?n:N.createElement("div",{className:"with-label ellipsis",ref:Y},null!=st&&null!==(dt=st.advancedConfigurations)&&void 0!==dt&&dt.fragment?N.createElement(j.Z,{size:"small"},B("applications:list.labels.fragment")):null!=ue&&ue.name?N.createElement(j.Z,{size:"small",className:""},null==ue?void 0:ue.name):null!=le&&le.name?N.createElement(j.Z,{size:"small"},le.name):null,(0,S.cr)(lt,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_OUTDATED_APP_BANNER"))&&Tt.y.isApplicationOutdated(null==st?void 0:st.applicationVersion,(null==st?void 0:st.clientId)&&!(0,_.Z)(null==st?void 0:st.clientId))&&!(null!=xe&&null!==(F=xe.advancedConfigurations)&&void 0!==F&&F.fragment)&&N.createElement(N.Fragment,null,N.createElement(j.Z,{className:"outdated-app-label",size:"small"},N.createElement(Z.c,{i18nKey:B("applications:forms.inboundOIDC.sections.outdatedApplications.label")}))),Tt.y.isChoreoApplication(st)&&N.createElement(j.Z,{size:"small",className:"choreo-label no-margin-left"},B("extensions:develop.apiResource.managedByChoreoText")),N.createElement(R.GI,{disabled:!Ae,content:null==st?void 0:st.description,trigger:N.createElement("span",null,null==st?void 0:st.description)})),image:null!==(V=E.t.editApplication.getOverriddenImage(null==be||null===(z=be.oidc)||void 0===z?void 0:z.clientId,te))&&void 0!==V?V:null!=st&&st.imageUrl?N.createElement(R.JT,{name:null==st?void 0:st.name,image:null==st?void 0:st.imageUrl,size:"tiny"}):N.createElement(R.Xo,{name:null==st?void 0:st.name,size:"tiny",floated:"left"}),loadingStateOptions:{count:5,imageType:"square"},isLoading:me,backButton:{"data-componentid":"".concat(q,"-page-back-button"),onClick:function(){var e;Ie?Ze===Qe.jo.ROLE_CALLBACK_REDIRECT?b.m.push({pathname:h.$.getPaths().get("ROLE_EDIT").replace(":id",we),state:g.Y.TabIds.CONNECTED_APPS}):(e={targetTab:g.Y.TabIds.CONNECTED_APPS},De?(Ge(),b.m.push({pathname:h.$.getPaths().get("AUTH_EDIT").replace(":id",we),state:e.targetTab})):b.m.push({pathname:h.$.getPaths().get("IDP_EDIT").replace(":id",we),state:e.targetTab})):b.m.push(h.$.getPaths().get("APPLICATIONS"))},text:Ie?B("idp:connectedApps.applicationEdit.back",{idpName:_e}):B("console:develop.pages.applicationsEdit.backButton")},alertBanner:(ut=T()({"application-outdated-alert-expanded-view":qe}),(0,S.cr)(lt,Qe.jo.FEATURE_DICTIONARY.get("APPLICATION_OUTDATED_APP_BANNER"))&&Ke&&N.createElement("div",{className:"banner-wrapper"},N.createElement(i.Z,{className:ut,severity:"warning",action:N.createElement(o.Z,{display:"flex"},N.createElement(r.Z,{className:"banner-view-hide-details","data-componentid":"".concat(q,"-outdated-app-view-details-button"),onClick:function(){return Be(!qe)}},B(qe?"applications:forms.inboundOIDC.sections.outdatedApplications.alert.hideButton":"applications:forms.inboundOIDC.sections.outdatedApplications.alert.viewButton")),N.createElement(r.Z,{"data-componentid":"".concat(q,"-outdated-app-ignore-button"),className:"ignore-once-button",onClick:function(){return Ye(!1)}},N.createElement(D.Z,{link:!0,onClick:function(){return Ye(!1)},size:"small",color:"grey",name:"close","data-componentid":"".concat(q,"-close-btn")})))},N.createElement(a.Z,{className:"alert-title"},N.createElement(Z.c,{components:{strong:N.createElement("strong",null)}},B("applications:forms.inboundOIDC.sections.outdatedApplications.alert.title"))),N.createElement(Z.c,null,B("applications:forms.inboundOIDC.sections.outdatedApplications.alert.content")),qe&&pt()))),titleTextAlign:"left",bottomMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(q,"-page-layout"),truncateContent:!0,action:N.createElement(N.Fragment,null,E.t.editApplication.getActions(null==be||null===(G=be.oidc)||void 0===G?void 0:G.clientId,te,q))},N.createElement(f.Z,{template:ue},N.createElement(m.Z,{template:ue},N.createElement(Fo,{application:st,featureConfig:ee,isLoading:me,setIsLoading:fe,onDelete:function(){b.m.push(h.$.getPaths().get("APPLICATIONS"))},onUpdate:function(){He()},template:le,"data-componentid":q,urlSearchParams:Q,getConfiguredInboundProtocolsList:function(e){ge(e)},getConfiguredInboundProtocolConfigs:function(e){Ee(e)},readOnly:"true"===Q.get(Qe.jo.APP_READ_ONLY_STATE_URL_SEARCH_PARAM_KEY)||(null==st?void 0:st.access)===wt.Ch.READ||!ne}))))};Ko.defaultProps={"data-componentid":"application-edit"};const Yo=Ko},5262:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(2292),a=n(6833),o=n(76271),r=i.AsgardeoSPAClient.getInstance().httpRequest.bind(i.AsgardeoSPAClient.getInstance()).bind(i.AsgardeoSPAClient.getInstance()),l=function(){var e={headers:{Accept:"application/json","Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.GET,url:o.h.getState().config.endpoints.CORSOrigins};return r(e).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to fetch the CORS origins")):Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},36234:(e,t,n)=>{n.d(t,{P:()=>C});var i=n(40838),a=n(78132),o=n(64704),r=n(44194),l=n(47245),c=n(89141),s=n(51835),u=n.n(s),d=n(27975),p=n.n(d),m=n(55900),f=n.n(m),v=n(21555),g=n.n(v),h=n(3621),b=n.n(h),E=n(5062),y=n.n(E),A=n(23833),S={};S.styleTagTransform=y(),S.setAttributes=g(),S.insert=f().bind(null,"head"),S.domAPI=p(),S.insertStyleElement=b();u()(A.Z,S);A.Z&&A.Z.locals&&A.Z.locals;var C=function(e){var t=e.data,n=e.content,s=e.isLoading,u=e["data-componentid"],d=void 0===u?"markdown-guide":u,p=(0,l.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t?void 0:t.appBaseName})),m=(0,r.useMemo)((function(){return n.replace(/\${([^}]+?)}/g,(function(e,n){var i=(0,o.Z)(t,n);return i&&"string"==typeof i?i:e}))}),[n,t]);return r.createElement(c.Z,{className:"markdown-guide","data-componentid":d},r.createElement(c.Z.Row,{columns:1},r.createElement(c.Z.Column,{mobile:16,tablet:16,computer:13},s||!m?r.createElement(a.pO,{inline:"centered",active:!0}):r.createElement(a.UG,{properties:{onHandleInternalUrl:function(e){var t,n,a=e;null!==(t=a)&&void 0!==t&&t.startsWith("/")||(a="/"+a),null!==(n=a)&&void 0!==n&&n.startsWith(p)||(a=p+a),i.m.push({pathname:a})}},source:m}))))}},80854:(e,t,n)=>{n.d(t,{H8:()=>E,dE:()=>b,xR:()=>h});var i,a=n(2292),o=n(85375),r=n(96124),l=n(43939),c=n(6833),s=n(60507);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,f(i.key),i)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var v=p((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));i=v,m(v,"WS_FEDERATION_CONFIG_FETCH_ERROR_CODE","WFC-00001"),m(v,"WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","WFC-00002"),m(v,"WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE","WFC-00003"),m(v,"WS_FEDERATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE","WFC-00004"),m(v,"WS_FEDERATION_CONFIG_REVERT_ERROR_CODE","WFC-00005"),m(v,"ErrorMessages",{WS_FEDERATION_CONFIG_FETCH_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the WS Federation configurations.","Error while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the WS Federation configurations.","Invalid Status Code while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_REVERT_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_REVERT_ERROR_CODE,"An error occurred while reverting the WS Federation configurations.","Error while reverting the WS Federation configurations",null),WS_FEDERATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while reverting the WS Federation configurations.","Invalid Status Code while reverting the WS Federation configurations",null),WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the WS Federation configurations.","Error while updating the WS Federation configurations",null)});var g=a.AsgardeoSPAClient.getInstance().httpRequest.bind(a.AsgardeoSPAClient.getInstance()),h=function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.GET,url:o.D.getServiceResourceEndpoints().passiveStsConfigurations},t=(0,r.Z)(e),n=t.data,i=t.error;return{data:n,error:i,isLoading:!i&&!n,isValidating:t.isValidating,mutate:t.mutate}},b=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.PATCH,url:o.D.getServiceResourceEndpoints().passiveStsConfigurations};return g(t).then((function(e){if(200!==e.status&&201!==e.status)throw new l.u(v.ErrorMessages.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n=v.ErrorMessages.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new l.u(n,e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))},E=function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.DELETE,url:o.D.getServiceResourceEndpoints().passiveStsConfigurations};return g(e).then((function(e){if(204!==e.status)throw new l.u(v.ErrorMessages.WS_FEDERATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve()})).catch((function(e){var t,n=v.ErrorMessages.WS_FEDERATION_CONFIG_REVERT_ERROR_CODE.getErrorMessage();throw new l.u(n,e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))}},60826:(e,t,n)=>{n.d(t,{DQ:()=>l,E7:()=>s,N$:()=>o,Oj:()=>r,gf:()=>c,gy:()=>i,m3:()=>a});var i=function(e){return e.ORG="ORG",e.APP="APP",e}({}),a=function(e){return e.BROWSER_DEFAULT="BROWSER_DEFAULT",e.CDN="CDN",e}({}),o=function(e){return e.COMMON="common",e.LOGIN="login",e.MY_ACCOUNT="myaccount",e.EMAIL_LINK_EXPIRY="email-link-expiry",e.EMAIL_TEMPLATE="email-template",e.SIGN_UP="sign-up",e.EMAIL_OTP="email-otp",e.PUSH_AUTH="push-auth",e.SMS_OTP="sms-otp",e.TOTP="totp",e.PASSWORD_RECOVERY="password-recovery",e.PASSWORD_RESET="password-reset",e.PASSWORD_RESET_SUCCESS="password-reset-success",e.USERNAME_RECOVERY_CLAIM="username-recovery-claim",e.USERNAME_RECOVERY_CHANNEL_SELECTION="username-recovery-channel-selection",e.USERNAME_RECOVERY_SUCCESS="username-recovery-success",e}({}),r=function(e){return e.BASE="base",e.SMS_OTP="sms-otp",e.EMAIL_OTP="email-otp",e.EMAIL_LINK="email-link",e.MULTI="multi",e.EMAIL="email",e.SMS="sms",e}({}),l=function(e){return e.CENTERED="centered",e.RIGHT_ALIGNED="right-aligned",e.LEFT_ALIGNED="left-aligned",e.LEFT_IMAGE="left-image",e.RIGHT_IMAGE="right-image",e.CUSTOM="custom",e}({}),c=function(e){return e.LIGHT="LIGHT",e.DARK="DARK",e}({}),s=function(e){return e.DESIGN="DESIGN",e.CUSTOM_TEXT="CUSTOM_TEXT",e}({})},92546:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(92336),a=n(31549),o=n(23269),r=n(14517);const l=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,l=(0,i.__rest)(e,["className"]);return(0,a.jsx)(o.Z,Object.assign({className:(0,r.Z)("oxygen-paper","OxygenPaper-root",n)},l,{ref:t}))}))},41121:(e,t,n)=>{n.d(t,{ZP:()=>l});var i=n(92336),a=n(31549),o=n(17751),r=n(14517);const l=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,l=(0,i.__rest)(e,["className"]);return(0,a.jsx)(o.ZP,Object.assign({className:(0,r.Z)("oxygen-popover","OxygenPopover-root",n)},l,{ref:t}))}))},56010:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(81611),a=n.n(i),o=n(83948),r=n.n(o)()(a());r.push([e.id,".registration-flow-banner{margin-bottom:16px}.registration-flow-banner .registration-flow-banner-link{cursor:pointer}",""]);const l=r},80801:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(81611),a=n.n(i),o=n(83948),r=n.n(o)()(a());r.push([e.id,".client-attestation-info-alert{margin-bottom:1rem}.fido-enabled-warn-alert{margin-top:1rem}",""]);const l=r},61720:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(81611),a=n.n(i),o=n(83948),r=n.n(o)()(a());r.push([e.id,".application-general-settings .discoverable-groups .radio-section{margin-bottom:1em !important}.application-general-settings .discoverable-groups div:nth-of-type(2){padding-right:.5em !important}.application-general-settings .discoverable-groups div:nth-of-type(3){padding-left:2.6em !important;padding-right:0 !important}.application-general-settings .discoverable-groups .ui.header.heading{margin:0;margin-bottom:1em}.application-general-settings .discoverable-groups .MuiInputBase-root.oxygen-select{height:50px}.application-general-settings .discoverable-groups .oxygen-text-field .MuiInputBase-root{min-height:50px}.application-general-settings .discoverable-groups .oxygen-text-field .MuiInputBase-root .MuiInputBase-input{border:none !important;width:auto !important}",""]);const l=r},81722:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(81611),a=n.n(i),o=n(83948),r=n.n(o)()(a());r.push([e.id,".role-select-autocomplete .MuiFormControl-root .MuiInputBase-root{min-height:50px}",""]);const l=r},51284:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(81611),a=n.n(i),o=n(83948),r=n.n(o)()(a());r.push([e.id,".share-application-form .role-share-all-container{margin-left:3rem}",""]);const l=r},76302:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(81611),a=n.n(i),o=n(83948),r=n.n(o)()(a());r.push([e.id,".share-application-status-response-list{width:100%}.share-application-status-response-list .header{display:flex;flex-direction:column;align-items:left;text-align:left;justify-content:left;color:#000}.share-application-status-response-list .org-handler{font-size:15px;margin-top:5px;color:#000 !important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:230px;display:inline-block;vertical-align:middle;flex-shrink:1;line-height:2}.share-application-status-response-list .org-id{font-size:11px;color:gray}.share-application-status-response-list .org-id-wrapper{position:relative;display:flex;align-items:center;max-width:80%;gap:.5rem}.share-application-status-response-list .ellipsis-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:80%;display:inline-block;vertical-align:middle;flex-shrink:1;line-height:2}.share-application-status-response-list .copy-icon-container{position:absolute;right:0;visibility:hidden;opacity:0;transition:opacity .1s ease,visibility 0s .1s}.share-application-status-response-list .org-id-wrapper:hover .copy-icon-container{visibility:visible;opacity:1;transition:opacity .1s ease,visibility 0s 0s}.share-application-status-response-list .copy-icon{opacity:0;visibility:hidden;transition:opacity .1s ease,visibility 0s .1s;cursor:pointer;font-size:1rem;vertical-align:middle;line-height:1}.share-application-status-response-list .copy-icon.visible{opacity:1;visibility:visible}.share-application-status-response-list .custom-list-layout-override{display:block !important;margin-right:0px !important;width:100% !important}.share-application-status-response-list .infinite-scroll-loader{justify-content:center;align-items:center;height:100px}",""]);const l=r},64197:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(81611),a=n.n(i),o=n(83948),r=n.n(o)()(a());r.push([e.id,".application-branding-link{cursor:pointer}.ignore-once-button{color:#788997}.banner-detail-card{border:0;border-top-left-radius:0;border-top-right-radius:0;background:#fffaf3;padding:5px;padding-left:35px}.banner-detail-content{padding:0}.banner-grid{padding-left:30px}.application-outdated-alert-expanded-view{border-bottom-left-radius:0;border-bottom-right-radius:0}.spaced-list li{margin-bottom:10px}.banner-wrapper{margin-bottom:20px}.banner-view-hide-details{min-width:120px}.banner-action{margin:0 0 1.5em 0 !important}",""]);const l=r},23833:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(81611),a=n.n(i),o=n(83948),r=n.n(o)()(a());r.push([e.id,".markdown-guide{margin-left:0 !important;margin-right:0 !important}",""]);const l=r}}]);