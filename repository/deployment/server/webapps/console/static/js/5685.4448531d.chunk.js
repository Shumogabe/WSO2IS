"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[5685],{45685:(e,n,t)=>{t.r(n),t.d(n,{default:()=>P});var a=t(214),o=t(82963),i=t(24871),r=t(41498),l=t(78672),c=t(41147),s=t(38314),u=t(67127),d=t(52983),f=t(9202),g=t(5295),m=t(74691),p=t(97860),h=t(75917),v=t(58047),b=t(91185),S=t(84786),E=t(90751),z=t(94001);function y(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var a,o,i=[],r=!0,l=!1;try{for(t=t.call(e);!(r=(a=t.next()).done)&&(i.push(a.value),!n||i.length!==n);r=!0);}catch(c){l=!0,o=c}finally{try{r||null==t.return||t.return()}finally{if(l)throw o}}return i}(e,n)||O(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){if(e){if("string"==typeof e)return k(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?k(e,n):void 0}}function k(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var A=[{key:0,text:l.I18n.instance.t("common:name"),value:"name"}],I=function(e){var n,t,l,O,k=e["data-componentid"],I=(0,f.$)().t,P=(0,g.I0)(),R=C((0,d.useState)(null),2),w=R[0],L=R[1],Z=C((0,d.useState)(""),2),_=Z[0],T=Z[1],U=C((0,d.useState)(A[0]),2),j=U[0],Q=U[1],V=C((0,d.useState)(S.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),x=V[0],D=V[1],F=C((0,d.useState)(!0),2),M=F[0],X=F[1],N=C((0,d.useState)(!1),2),B=N[0],W=N[1],$=C((0,d.useState)(void 0),2),q=$[0],G=$[1],H=C((0,d.useState)(void 0),2),K=H[0],J=H[1],Y=C((0,d.useState)(null),2),ee=Y[0],ne=Y[1],te=C((0,d.useState)([]),2),ae=te[0],oe=te[1],ie=C((0,d.useState)(null),2),re=ie[0],le=ie[1],ce=C((0,d.useState)(""),2),se=ce[0],ue=ce[1],de=C((0,d.useState)(""),2),fe=de[0],ge=de[1],me=C((0,d.useState)(1),2),pe=me[0],he=me[1],ve=(0,g.v9)((function(e){return e.organization.organization})),be=S.lD.getInstance(),Se=C((0,r.cC)(),2),Ee=Se[0],ze=Se[1];(0,d.useEffect)((function(){var e,n=!1,t=!1;null==w||null===(e=w.links)||void 0===e||e.forEach((function(e){if("next"===e.rel){var a=e.href.split("after=")[1];ue(a),G(!0),n=!0}if("previous"===e.rel){var o=e.href.split("before=")[1];ge(o),J(!0),t=!0}})),n||(ue(""),G(!1)),t||(ge(""),J(!1))}),[w]);var ye=(0,d.useCallback)((function(){he(1),ze()}),[he,ze]);(0,d.useEffect)((function(){ee&&!(0,u.Z)(ee)&&(0,E.Xu)(ee.id).then((function(e){le(e)})).catch((function(e){null!=e&&e.description?P((0,i.V_)({description:e.description,level:o.QU.ERROR,message:I("console:manage.features.organizations.notifications.fetchOrganization.error.message")})):P((0,i.V_)({description:I("console:manage.features.organizations.notifications.fetchOrganization.genericError.description"),level:o.QU.ERROR,message:I("console:manage.features.organizations.notifications.fetchOrganization.genericError.message")}))}))}),[ee,P,I]);var Ce=(0,d.useMemo)((function(){return!ee||(0,u.Z)(ee)?_:"".concat(_?_+" and ":"","parentId eq ").concat(ee.id)}),[_,ee]),Oe=(0,d.useCallback)((function(e,n,t,a,r){X(!0),(0,E.jX)(n,e,t,a,!1).then((function(e){L(e)})).catch((function(e){null!=e&&e.description?P((0,i.V_)({description:e.description,level:o.QU.ERROR,message:I("console:manage.features.organizations.notifications.getOrganizationList.error.message")})):P((0,i.V_)({description:I("console:manage.features.organizations.notifications.getOrganizationList.genericError.description"),level:o.QU.ERROR,message:I("console:manage.features.organizations.notifications.getOrganizationList.genericError.message")}))})).finally((function(){X(!1)}))}),[E.jX,P,I,L,X]);(0,d.useEffect)((function(){Oe(x,Ce,null,null)}),[x,Oe,Ce]);var ke=(0,d.useCallback)((function(e){ye(),T(e)}),[ye,T]),Ae=(0,d.useCallback)((function(e,n){var t=parseInt(null==n?void 0:n.activePage);t>pe?Oe(x,Ce,se,null):t<pe&&Oe(x,Ce,null,fe),he(t)}),[Oe,pe,Ce,x,se,fe]),Ie=(0,d.useCallback)((function(e,n){D(n.value),ye()}),[D,ye]),Pe=(0,d.useCallback)((function(){T(""),ye()}),[T,ye]),Re=function(e,n){var t=y(ae);t.splice(n+1),oe(t),ne(e),ye(),e||le(null)};return d.createElement(d.Fragment,null,d.createElement(c.Xg,{action:!M&&!(!_&&((0,u.Z)(w)||(null==w||null===(n=w.organizations)||void 0===n?void 0:n.length)<=0))&&b.organizationConfigs.canCreateOrganization()&&d.createElement(a.di,{when:a.TA.ORGANIZATION_WRITE},d.createElement(c.KM,{disabled:M,loading:M,onClick:function(){be.publish("organization-click-new-organization-button"),W(!0)},"data-componentid":"".concat(k,"-list-layout-add-button")},d.createElement(m.Z,{name:"add"}),I("console:manage.features.organizations.list.actions.add"))),pageTitle:"Organizations",title:M?null:re?re.name:I("console:manage.features.organizations.homeList.name"),description:d.createElement("p",null,M?null:re?re.description:null),"data-componentid":"".concat(k,"-page-layout"),titleAs:"h3",componentAbovePageHeader:d.createElement(d.Fragment,null,d.createElement(p.Z,{as:"h1","data-componentid":"".concat(k,"-organization-header")},I("console:manage.pages.organizations.title"),d.createElement(p.Z.Subheader,{"data-componentid":"".concat(k,"-sub-title")},I("console:manage.pages.organizations.subTitle"))),d.createElement(h.Z,{hidden:!0}),ee&&ae.length>0&&d.createElement(v.Z,{className:"margined","data-componentid":"".concat(k,"-breadcrumb")},d.createElement(v.Z.Section,{onClick:function(){Re(null,-1)}},d.createElement("span",{"data-componentid":"".concat(k,"-breadcrumb-home")},ve.name)),null==ae?void 0:ae.map((function(e,n){return d.createElement(d.Fragment,{key:n},d.createElement(v.Z.Divider,{icon:"right chevron"}),d.createElement(v.Z.Section,{active:n===ae.length-1,link:n!==ae.length-1,onClick:n!==ae.length-1?function(){return Re(e,n)}:null},e.name))})))," ")},d.createElement(c.PS,{advancedSearch:d.createElement(S.nC,{onFilter:ke,filterAttributeOptions:[{key:0,text:I("common:name"),value:"name"}],filterAttributePlaceholder:I("console:manage.features.organizations.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:I("console:manage.features.organizations.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:I("console:manage.features.organizations.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:I("console:manage.features.organizations.advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co","data-componentid":"".concat(k,"-list-advanced-search")}),currentListSize:null==w||null===(t=w.organizations)||void 0===t?void 0:t.length,listItemLimit:x,onItemsPerPageDropdownChange:Ie,onPageChange:Ae,onSortStrategyChange:function(e,n){Q((0,s.Z)(A,(function(e){return n.value===e.value})))},showPagination:!0,showTopActionPanel:M||!(!_&&(null==w||null===(l=w.organizations)||void 0===l?void 0:l.length)<=0),sortOptions:A,sortStrategy:j,totalPages:10,totalListSize:null==w||null===(O=w.organizations)||void 0===O?void 0:O.length,paginationOptions:{disableNextButton:!q,disablePreviousButton:!K},isLoading:M,"data-componentid":"".concat(k,"-list-layout"),resetPagination:Ee,activePage:pe},d.createElement(z.Bg,{list:w,onOrganizationDelete:function(){Oe(x,Ce,se,fe)},onEmptyListPlaceholderActionClick:function(){W(!0)},onSearchQueryClear:Pe,searchQuery:_,"data-componentid":"organization-list",onListItemClick:function(e,n){if(!ae.find((function(e){return e.id===n.id}))){Pe(),ne(n),ye();var t=y(ae);t.push(n),oe(t)}},parentOrganization:ee})),B&&d.createElement(z.Xh,{onUpdate:function(){Oe(x,Ce,se,fe)},closeWizard:function(){return W(!1)},parent:ee})))};I.defaultProps={"data-componentid":"organizations"};const P=I}}]);