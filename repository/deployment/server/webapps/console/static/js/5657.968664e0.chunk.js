"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[5657],{61159:(e,t,n)=>{n.d(t,{$Z:()=>l,S8:()=>s,X9:()=>d,i5:()=>c});var r=n(2292),i=n(76271),o=n(6833),a=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),l=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.POST,url:i.h.getState().config.endpoints.entitlementPoliciesApi};return a(t).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to create the policy.")):Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},c=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.PATCH,url:i.h.getState().config.endpoints.entitlementPoliciesApi};return a(t).then((function(t){return 200!==t.status?Promise.reject(new Error("Failed to update policy: "+e.policyId)):Promise.resolve(t.data)})).catch((function(e){return Promise.reject(e)}))},s=function(e){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.DELETE,url:"".concat(i.h.getState().config.endpoints.entitlementPoliciesApi,"/").concat(e)};return a(t).then((function(e){return 200!==e.status&&204!==e.status?Promise.reject(new Error("Failed to delete the policy.")):Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},d=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.POST,url:i.h.getState().config.endpoints.entitlementPolicyPublishApi};return a(t).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to publish the policy.")):Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},82630:(e,t,n)=>{n.d(t,{Z:()=>G});var r=n(22855),i=n(98855),o=n(27331),a=n(73965),l=n(94635),c=n(15513),s=n(29851),d=n(35462),u=n(1187),p=n(77139),m=n(9821),h=n(72237),f=n(22557),g=n.n(f),v=n(47513),y=n(50699),b=n(2446),E=n(44194),w=n(10479),x=function(e){return e.DARK="vs-dark",e.HIGH_CONTRAST="hc-black",e.LIGHT="vc",e}({}),A=function(e){return e.Maximized="maximized",e.Minimized="minimized",e}({}),S=n(51835),T=n.n(S),j=n(27975),P=n.n(j),I=n(55900),C=n.n(I),Z=n(21555),L=n.n(Z),N=n(3621),O=n.n(N),M=n(5062),k=n.n(M),_=n(19457),R={};R.styleTagTransform=k(),R.setAttributes=L(),R.insert=C().bind(null,"head"),R.domAPI=P(),R.insertStyleElement=O();T()(_.Z,R);_.Z&&_.Z.locals&&_.Z.locals;var z=n(96274);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D=(0,E.lazy)((function(){return Promise.resolve().then(n.bind(n,52962))})),W=function(e){var t=e.width,n=void 0===t?16:t,r=e.height,i=void 0===r?16:r;return E.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:i,width:n,xmlns:"http://www.w3.org/2000/svg"},E.createElement("polyline",{points:"15 3 21 3 21 9"}),E.createElement("polyline",{points:"9 21 3 21 3 15"}),E.createElement("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),E.createElement("line",{x1:"3",y1:"21",x2:"10",y2:"14"}))},U=function(e){var t=e.width,n=void 0===t?16:t,r=e.height,i=void 0===r?16:r;return E.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:i,width:n,xmlns:"http://www.w3.org/2000/svg"},E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M18 10h-4v-4"}),E.createElement("path",{d:"M20 4l-6 6"}),E.createElement("path",{d:"M6 14h4v4"}),E.createElement("path",{d:"M10 14l-6 6"}))},$=function(e){var t,n,f=e.className,S=e["data-componentid"],T=e.policyScript,j=e.onScriptChange,P=(0,w.$)().t,I=(0,E.useRef)(null),C=h.W.getUserPreferences(),Z=F((0,E.useState)(null!==(t=null==C||null===(n=C.identityAppsSettings)||void 0===n||null===(n=n.userPreferences)||void 0===n?void 0:n[m.jo.CONDITIONAL_AUTH_EDITOR_THEME_STORAGE_KEY])&&void 0!==t?t:x.DARK),2),L=Z[0],N=Z[1],O=F((0,E.useState)(A.Minimized),2),M=O[0],k=O[1],_=(0,E.useCallback)((function(e){I.current=e}),[I]),R=function(){M!==A.Minimized?k(A.Minimized):k(A.Maximized)},H=E.createElement(D,{loading:null,className:"script-editor",width:"100%",height:"100%",language:"xml",theme:L,value:(0,z._)(T),options:{automaticLayout:!0},onChange:function(e){return j(e||"")},onMount:_,"data-componentid":"".concat(S,"-code-editor")}),$=E.createElement(i.Z,{className:"script-editor-toolbar-container"},E.createElement(d.Z,{variant:"dense"},E.createElement(i.Z,null,E.createElement(p.Z,null,P("authenticationFlow:scriptEditor.panelHeader"))),E.createElement("div",{className:"actions"},M===A.Minimized&&E.createElement(E.Fragment,null,E.createElement("div",{className:"editor-theme-select"},E.createElement(a.Z,{size:"small"},E.createElement(s.Z,{labelId:"demo-select-small-label",id:"demo-select-small",value:L,onChange:function(e){N(e.target.value),function(e){var t,n=h.W.getUserPreferences();if(!(0,y.Z)(n)){var r=(0,v.Z)(n);(0,b.Z)(null==r||null===(t=r.identityAppsSettings)||void 0===t?void 0:t.userPreferences,m.jo.CONDITIONAL_AUTH_EDITOR_THEME_STORAGE_KEY,e),h.W.setUserPreferences(r)}}(e.target.value)}},E.createElement(c.Z,{value:x.LIGHT},P("authenticationFlow:scriptEditor.themes.light.label")),E.createElement(c.Z,{value:x.DARK},P("authenticationFlow:scriptEditor.themes.dark.label")),E.createElement(c.Z,{value:x.HIGH_CONTRAST},P("authenticationFlow:scriptEditor.themes.highContrast.label")))))),E.createElement("div",{className:"editor-fullscreen"},E.createElement(u.Z,{title:M===A.Minimized?P("common:goFullScreen"):P("common:exitFullScreen"),"data-componentid":"editor-fullscreen-toggle-tooltip"},E.createElement(l.Z,{size:"small",onClick:R},M===A.Minimized?E.createElement(W,{height:16,width:16}):E.createElement(U,{height:16,width:16})))))));return E.createElement(E.Suspense,{fallback:E.createElement(o.Z,null)},E.createElement("div",{className:g()("script-editor-panel",f),"data-componentid":S},$,E.createElement(r.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:M===A.Maximized,onClose:R},E.createElement(i.Z,{className:"full-screen-script-editor-container"},$,H)),H))};$.defaultProps={"data-componentid":"policy-editor"};const G=$},96274:(e,t,n)=>{n.d(t,{$:()=>i,_:()=>r});var r=function(e){if(!e||"string"!=typeof e)return console.warn("Invalid XML input for formatting."),e||"";var t=" ".repeat(4);try{var n=e.replace(/(>)(<)(\/*)/g,"$1\n$2$3");if(n.split("\n").some((function(e){return e.startsWith(t)})))return e;var r=0;return n.split("\n").map((function(e){e.match(/<\/\w/)&&(r-=1);var n=t.repeat(Math.max(r,0)),i="".concat(n).concat(e);return e.match(/<\w[^>]*[^/]>.*$/)&&(r+=1),i})).join("\n")}catch(i){return console.error("Error formatting XML:",i),e}},i=function(e){if(!e||"string"!=typeof e)return console.warn("Invalid XML input for unformatting."),e||"";try{return e.replace(/>\s+</g,"><").replace(/\s{2,}/g," ").trim()}catch(t){return console.error("Error unformatting XML:",t),e}}},29851:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(92336),i=n(31549),o=n(69673),a=n(14517),l=n(44194),c=n(52998);const s=(0,l.forwardRef)(((e,t)=>{var{className:n,InputLabelProps:l={disableAnimation:!0,focused:!1,shrink:!1},label:s,name:d,required:u}=e,p=(0,r.__rest)(e,["className","InputLabelProps","label","name","required"]);const m=Object.assign({disableAnimation:!0,focused:!1,required:u,shrink:!1},l);return(0,i.jsxs)(i.Fragment,{children:[s&&(0,i.jsx)(c.Z,Object.assign({id:d,htmlFor:d},m,{className:(0,a.Z)("oxygen-select-static-label",null==l?void 0:l.className)},{children:s})),(0,i.jsx)(o.Z,Object.assign({ref:t,labelId:d,className:(0,a.Z)("oxygen-select","OxygenSelect-root",n)},p))]})}));var d,u,p;d='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-select-static-label {\n  margin-top: -40px;\n  margin-left: -14px;\n}',u=document.getElementsByTagName("head")[0],(p=document.createElement("style")).setAttribute("type","text/css"),p.appendChild(document.createTextNode(d)),u.appendChild(p)},19457:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),i=n.n(r),o=n(83948),a=n.n(o)()(i());a.push([e.id,".script-editor-panel{height:100%;width:calc(100% - 16px)}.script-editor-panel .script-editor{border:1px solid var(--oxygen-palette-divider);height:500px}.script-editor-toolbar-container .oxygen-toolbar{display:flex;justify-content:space-between;align-items:center;align-content:center;flex-wrap:nowrap;flex-direction:row;padding-left:0;padding-right:0}.script-editor-toolbar-container .oxygen-toolbar .actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-content:center;align-items:center;gap:10px}.script-editor-toolbar-container .oxygen-toolbar .actions .editor-theme-select .MuiSelect-select{padding:6px 15px;min-width:150px}.full-screen-script-editor-container{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:95%;height:90%;padding:32px}.full-screen-script-editor-container .script-editor-toolbar-container{background-color:var(--oxygen-palette-common-white);padding-left:15px;padding-right:15px;border-top-right-radius:var(--oxygen-shape-borderRadius);border-top-left-radius:var(--oxygen-shape-borderRadius)}",""]);const l=a}}]);