"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[4358],{23800:(e,t,n)=>{n.d(t,{Z:()=>k});var o=n(55467),a=n(25340),r=n(44194),i=n(14517),s=n(60391),c=n(87883);function l(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function u(e){return parseFloat(e)}var d=n(24731),p=n(49706),h=n(62808),g=n(99769),f=n(90757);function b(e){return(0,f.ZP)("MuiSkeleton",e)}(0,g.Z)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var m=n(31549);const E=["animation","className","component","height","style","variant","width"];let v,y,S,_,w=e=>e;const O=(0,s.F4)(v||(v=w`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),A=(0,s.F4)(y||(y=w`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),T=(0,p.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((({theme:e,ownerState:t})=>{const n=l(e.shape.borderRadius)||"px",o=u(e.shape.borderRadius);return(0,a.Z)({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:(0,d.Fq)(e.palette.text.primary,"light"===e.palette.mode?.11:.13),height:"1.2em"},"text"===t.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${o}${n}/${Math.round(o/.6*10)/10}${n}`,"&:empty:before":{content:'"\\00a0"'}},"circular"===t.variant&&{borderRadius:"50%"},"rounded"===t.variant&&{borderRadius:(e.vars||e).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})}),(({ownerState:e})=>"pulse"===e.animation&&(0,s.iv)(S||(S=w`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),O)),(({ownerState:e,theme:t})=>"wave"===e.animation&&(0,s.iv)(_||(_=w`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),A,(t.vars||t).palette.action.hover))),k=r.forwardRef((function(e,t){const n=(0,h.Z)({props:e,name:"MuiSkeleton"}),{animation:r="pulse",className:s,component:l="span",height:u,style:d,variant:p="text",width:g}=n,f=(0,o.Z)(n,E),v=(0,a.Z)({},n,{animation:r,component:l,variant:p,hasChildren:Boolean(f.children)}),y=(e=>{const{classes:t,variant:n,animation:o,hasChildren:a,width:r,height:i}=e,s={root:["root",n,o,a&&"withChildren",a&&!r&&"fitContent",a&&!i&&"heightAuto"]};return(0,c.Z)(s,b,t)})(v);return(0,m.jsx)(T,(0,a.Z)({as:l,ref:t,className:(0,i.Z)(y.root,s),ownerState:v},f,{style:(0,a.Z)({width:g,height:u},d)}))}))},58951:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(96124),a=n(76271),r=n(6833);const i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,url:"".concat(a.h.getState().config.endpoints.webhooksMetadata)},n=(0,o.Z)(e?t:null,{shouldRetryOnError:!1});return{data:n.data,error:n.error,isLoading:n.isLoading,isValidating:n.isValidating,mutate:n.mutate}}},33241:(e,t,n)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,s(o.key),o)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}n.d(t,{J:()=>c});var c=r((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));i(c,"ACTIVATE","activate"),i(c,"DEACTIVATE","deactivate"),i(c,"ACTIVE_STATUS","ACTIVE"),i(c,"INACTIVE_STATUS","INACTIVE"),i(c,"WEBHOOKS_SESSION_EVENT_SCHEMA","https://schemas.identity.wso2.org/events/session"),i(c,"WEBHOOKS_TOKEN_EVENT_SCHEMA","https://schemas.identity.wso2.org/events/token"),i(c,"DEFAULT_EVENT_PROFILE",{name:"WSO2",uri:"https://schemas.identity.wso2.org"}),i(c,"WEBHOOK_NAME_REGEX",/^[a-zA-Z0-9-_][a-zA-Z0-9-_ ]*[a-zA-Z0-9-_]$/),i(c,"WEBHOOK_SECRET_REGEX",/^[ -~]+$/),i(c,"ERROR_MESSAGES",{CREATE_WEBHOOK_INVALID_STATUS_CODE:"Failed to create webhook. Unexpected response status.",DELETE_WEBHOOK_INVALID_STATUS_CODE:"Failed to delete webhook. Unexpected response status.",FETCH_EVENT_PROFILE_INVALID_STATUS_CODE:"Failed to fetch event profile. Unexpected response status.",FETCH_WEBHOOKS_INVALID_STATUS_CODE:"Failed to fetch webhooks. Unexpected response status.",FETCH_WEBHOOK_INVALID_STATUS_CODE:"Failed to fetch webhook. Unexpected response status.",RETRY_WEBHOOK_INVALID_STATUS_CODE:"Failed to resend requests. Unexpected response status.",UPDATE_WEBHOOK_INVALID_STATUS_CODE:"Failed to update webhook. Unexpected response status.",UPDATE_WEBHOOK_METADATA_INVALID_STATUS_CODE:"Failed to update webhook metadata. Unexpected response status.",UPDATE_WEBHOOK_STATUS_INVALID_STATUS_CODE:"Failed to update webhook status. Unexpected response status."}),i(c,"FEATURE_DICTIONARY",(new Map).set("WEBHOOK_SETTINGS","webhooks.settings").set("SESSION_EVENT_HANDLER","webhook.events.session").set("TOKEN_EVENT_HANDLER","webhook.events.token"))},44358:(e,t,n)=>{n.r(t),n.d(t,{WebhookSettingsForm:()=>W,default:()=>L});var o=n(17199),a=n(78079),r=n(79292),i=n(60486),s=n(40838),c=n(6833),l=n(82406),u=n(79438),d=n(78132),p=n(44194),h=n(10479),g=n(47245),f=n(2292),b=n(76271),m=n(43939),E=n(33241),v=f.AsgardeoSPAClient.getInstance().httpRequest.bind(f.AsgardeoSPAClient.getInstance());const y=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.PATCH,url:b.h.getState().config.endpoints.webhooksMetadata};return v(t).then((function(e){if(200!==e.status)throw new m.u(E.J.ERROR_MESSAGES.UPDATE_WEBHOOK_METADATA_INVALID_STATUS_CODE,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t;throw new m.u(e.message,e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))};var S=n(58951),_=function(e){return e.NO_SHARING="NO_SHARING",e.IMMEDIATE_EXISTING_AND_FUTURE_ORGS="IMMEDIATE_EXISTING_AND_FUTURE_ORGS",e}({}),w=n(67071),O=n(51835),A=n.n(O),T=n(27975),k=n.n(T),N=n(55900),I=n.n(N),R=n(21555),C=n.n(R),D=n(3621),U=n.n(D),x=n(5062),P=n.n(x),Z=n(74894),j={};j.styleTagTransform=P(),j.setAttributes=C(),j.insert=I().bind(null,"head"),j.domAPI=k(),j.insertStyleElement=U();A()(Z.Z,j);Z.Z&&Z.Z.locals&&Z.Z.locals;function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,s=[],c=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(s.push(o.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var H="webhook-settings",M=[{label:"webhooks:pages.settings.organizationPolicy.radioOptions.currentOrgOnly",value:_.NO_SHARING},{label:"webhooks:pages.settings.organizationPolicy.radioOptions.currentOrgAndImmediateChild",value:_.IMMEDIATE_EXISTING_AND_FUTURE_ORGS}],W=function(e){var t,n=e["data-componentid"],f=void 0===n?"webhook-settings-page":n,b=(0,g.I0)(),m=(0,h.$)().t,E=V((0,p.useState)(!1),2),v=E[0],O=E[1],A=(0,S.Z)(),T=A.data,k=A.isLoading,N=A.error,I=(0,w.F)();(0,p.useEffect)((function(){N&&I(N,"fetchWebhooksMetadata")}),[N,I]);var R=function(e){O(!0);var t={organizationPolicy:{policyName:e.organizationPolicy.policyName}};y(t).then((function(){b((0,l.V_)({description:m("webhooks:notifications.updateWebhookSettings.success.description"),level:c.QU.SUCCESS,message:m("webhooks:notifications.updateWebhookSettings.success.message")}))})).catch((function(e){!function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.detail?b((0,l.V_)({description:m("webhooks:notifications.updateWebhookSettings.error.description",{description:e.response.data.description}),level:c.QU.ERROR,message:m("webhooks:notifications.updateWebhookSettings.error.message")})):b((0,l.V_)({description:m("webhooks:notifications.updateWebhookSettings.error.genericDescription"),level:c.QU.ERROR,message:m("webhooks:notifications.updateWebhookSettings.error.message")}))}(e)})).finally((function(){O(!1)}))};return p.createElement("div",{className:"webhook-settings-page"},p.createElement(d.Xg,{title:m("webhooks:pages.settings.heading"),description:p.createElement(p.Fragment,null,m("webhooks:pages.settings.subHeading")),backButton:{"data-componentid":"".concat(f,"-page-back-button"),onClick:function(){s.m.push(i.$.getPaths().get("WEBHOOKS"))},text:m("webhooks:pages.settings.backButton")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0,"data-componentid":"".concat(f,"-page-layout")},p.createElement(d.pJ,{padded:"very"},k?p.createElement(o.Z,{className:"placeholder-box"},p.createElement(a.Z,{variant:"rectangular",height:21}),p.createElement(a.Z,{variant:"rectangular",height:14}),p.createElement(a.Z,{variant:"rectangular",height:7})):p.createElement(u.l0,{id:H,uncontrolledForm:!1,onSubmit:function(e){R(e)},initialValues:{organizationPolicy:{policyName:(null==T||null===(t=T.organizationPolicy)||void 0===t?void 0:t.policyName)||_.NO_SHARING}},"data-componentid":"".concat(f,"-form")},p.createElement(r.Z,{variant:"h6",className:"heading-container"},m("webhooks:pages.settings.organizationPolicy.heading")),M.map((function(e){return p.createElement(u.gN.Radio,{key:e.value,ariaLabel:m(e.label),label:m(e.label),name:"organizationPolicy.policyName",type:"radio",value:e.value,"data-componentid":"".concat(f,"-organization-policy-radio-")+"option-".concat(e.value)})})),p.createElement(u.gN.Button,{form:H,size:"small",buttonType:"primary_btn",ariaLabel:"Update button",name:"update-button","data-testid":"".concat(f,"-submit-button"),disabled:v,loading:v,label:m("common:update")})))))};const L=W},67071:(e,t,n)=>{n.d(t,{F:()=>p,L:()=>d});var o=n(6833),a=n(82406),r=n(10479),i=n(47245);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){var e=(0,i.I0)(),t=(0,r.$)().t;return function(n,r){var i=r||{};e((0,a.V_)({description:t("webhooks:notifications.".concat(n,".success.description"),i),level:o.QU.SUCCESS,message:t("webhooks:notifications.".concat(n,".success.message"))}))}},p=function(){var e=(0,i.I0)(),t=(0,r.$)().t;return function(n,r,i){var s,c=i||{};null!==(s=n.response)&&void 0!==s&&null!==(s=s.data)&&void 0!==s&&s.description?e((0,a.V_)({description:t("webhooks:notifications.".concat(r,".error.description"),l({description:n.response.data.description},c)),level:o.QU.ERROR,message:t("webhooks:notifications.".concat(r,".error.message"))})):e((0,a.V_)({description:t("webhooks:notifications.".concat(r,".error.genericDescription"),c),level:o.QU.ERROR,message:t("webhooks:notifications.".concat(r,".error.message"))}))}}},17199:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(92336),a=n(31549),r=n(31958),i=n(14517);const s=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,s=(0,o.__rest)(e,["className"]);return(0,a.jsx)(r.Z,Object.assign({ref:t,className:(0,i.Z)("oxygen-box","OxygenBox-root",n)},s))}))},78079:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(92336),a=n(31549),r=n(23800),i=n(14517);const s=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,s=(0,o.__rest)(e,["className"]);return(0,a.jsx)(r.Z,Object.assign({ref:t,className:(0,i.Z)("oxygen-skeleton","OxygenSkeleton-root",n)},s))}))},79292:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(92336),a=n(31549),r=n(66466),i=n(14517);const s=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,s=(0,o.__rest)(e,["className"]);return(0,a.jsx)(r.Z,Object.assign({ref:t,className:(0,i.Z)("oxygen-typography","OxygenTypography-root",n)},s))}))},74894:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(81611),a=n.n(o),r=n(83948),i=n.n(r)()(a());i.push([e.id,".webhook-settings-page .heading-container{margin-top:20px;font-weight:normal}.webhook-settings-page .placeholder{border-radius:8px;margin-bottom:8px}.webhook-settings-page .placeholder.label{height:20px;max-width:100px}.webhook-settings-page .placeholder.text-field{height:40px}.webhook-settings-page .placeholder-box>*{margin-bottom:8px}",""]);const s=i}}]);