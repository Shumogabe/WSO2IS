"use strict";(self.webpackChunk_wso2is_myaccount=self.webpackChunk_wso2is_myaccount||[]).push([[898],{2898:(e,t,n)=>{n.r(t),n.d(t,{App:()=>X,default:()=>ee});var r=n(2292),o=n(68109),i=n(93427),a=n(36940),c=n(86105),u=n(60502),l=n(16590),s=n(61444),f=n(49746),m=n(50699),y=n(84025),p=n(44194),g=n(59673),d=n(31126),b=n(82690),h=n(9768),v=n(33881),S=n(27944),O=n(4278),E=n(73496),w=n(16507),A=n(64704),j=n(95223),P=(0,p.createContext)(null);P.displayName="RuntimeConfigContext";const I=P;function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const k=function(e){var t=e.children,n=e.initialRuntimeConfig,r=L((0,p.useState)(null),2),o=r[0],i=r[1];(0,p.useEffect)((function(){var e=window.__WSO2_IS_RUNTIME_CONFIG__||n||{};i(e)}),[n]);var a=function(){return o||{}};return p.createElement(I.Provider,{value:_({getAllRuntimeConfig:a,getRuntimeConfig:function(e){return(0,A.Z)(o,e,null)},setRuntimeConfig:function(e){var t=(0,j.Z)({},o,e);i(t),window.__WSO2_IS_RUNTIME_CONFIG__=t}},a())},t)};var M=n(69221);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B="user-preferences";const G=function(e){var t=e.children,n=e.storageStrategy,r=void 0===n?"localstorage":n,o=e.userId,i=Z((0,p.useState)(null),2),a=i[0],c=i[1];(0,p.useEffect)((function(){var e=function(){switch(r){case"localstorage":return localStorage.getItem(B);case"sessionstorage":return sessionStorage.getItem(B);default:return null}}();if(e){var t=JSON.parse(e);c(t)}}),[r]);var u;return p.createElement(M.Z.Provider,{value:K({getPreferences:function(e,t){var n,r=null!=t?t:o;return null!==(n=(0,A.Z)(a,r,{})[e])&&void 0!==n?n:null},setPreferences:function(e,t){var n=(0,j.Z)({},a,U({},null!=t?t:o,K({},e)));switch(c(n),r){case"localstorage":localStorage.setItem(B,JSON.stringify(n));break;case"sessionstorage":sessionStorage.setItem(B,JSON.stringify(n))}}},(0,A.Z)(a,null!=u?u:o,{}))},t)};const F=function(e){var t=e.children,n=(0,d.v9)((function(e){return e.authenticationInformation.profileInfo.id}));return p.createElement(k,null,p.createElement(G,{userId:n},t))};var J=n(87461),H=n(88403);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var X=function(){var e,t=(0,d.v9)((function(e){return e.authenticationInformation.username})),n=(0,d.v9)((function(e){return e.config})),A=(0,d.v9)((function(e){return e.authenticationInformation.loginInit})),j=(0,d.v9)((function(e){var t;return null==e||null===(t=e.authenticationInformation)||void 0===t?void 0:t.scope})),P=(0,d.v9)((function(e){return e.authenticationInformation.profileInfo.id})),I=Q((0,p.useState)((0,E.ju)()),2),T=I[0],x=I[1],_=H.lD.getInstance(),D=(0,r.useAuthContext)(),L=D.signOut,N=D.trySignInSilently,k=(0,p.useContext)(i.G).themePreference,M=(0,o.tv)().setMode;(0,p.useEffect)((function(){var e,t,n=null!==(e=null==k||null===(t=k.preference)||void 0===t||null===(t=t.theme)||void 0===t?void 0:t.activeTheme.toLowerCase())&&void 0!==e?e:"light";M(n)}),[k]),(0,p.useEffect)((function(){C()}),[]),(0,p.useEffect)((function(){y.locale(s.I18n.instance.language)}),[s.I18n.instance.language]),(0,p.useEffect)((function(){x((0,E.ju)())}),[w.$x.getTenantQualifiedAppBasename()]),(0,p.useEffect)((function(){var e,t;null!=n&&null!==(e=n.ui)&&void 0!==e&&e.features&&A&&((0,c.jY)(null==n||null===(t=n.ui)||void 0===t?void 0:t.features,j)||J.m8.push(w.$x.getPaths().get("UNAUTHORIZED")))}),[A,j,n]),(0,p.useEffect)((function(){var e;if(t||""!==t){var r=null==n||null===(e=n.deployment)||void 0===e?void 0:e.tenant,o=JSON.parse(l.LocalStorageUtils.getValueFromLocalStorage(r)),i={};if(i[t]=(0,u.D0)(),o){if(null===c.EN.lookupKey(o,t)){var a=q(q({},o),{},Y({},t,(0,u.D0)()));l.LocalStorageUtils.setValueInLocalStorage(r,JSON.stringify(a))}}else l.LocalStorageUtils.setValueInLocalStorage(r,JSON.stringify(i))}}),[null==n||null===(e=n.deployment)||void 0===e?void 0:e.tenant,t]),(0,p.useEffect)((function(){P&&_.publish("page-visit-myaccount-landing-page")}),[P]);var C=function(){try{sessionStorage||location.pathname===w.$x.getPaths().get("STORING_DATA_DISABLED")||J.m8.push(w.$x.getPaths().get("STORING_DATA_DISABLED"))}catch(e){location.pathname!==w.$x.getPaths().get("STORING_DATA_DISABLED")&&J.m8.push(w.$x.getPaths().get("STORING_DATA_DISABLED"))}};return(0,m.Z)(null==n?void 0:n.deployment)||(0,m.Z)(null==n?void 0:n.endpoints)?p.createElement(O.xq,null):p.createElement(b.Z,{history:J.m8},p.createElement(F,null,p.createElement("div",{className:"container-fluid"},p.createElement(p.Suspense,{fallback:p.createElement(O.xq,null)},p.createElement(f.C1,null,p.createElement(f.Vb,{onSessionTimeoutAbort:function(e){J.m8.push({pathname:e.pathname,search:e.search})},onSessionLogout:function(){J.m8.push(w.$x.getAppLogoutPath())},onLoginAgain:function(){N().then((function(e){if(!1===e)J.m8.push(w.$x.getAppLogoutPath());else{var t=[a.F$.SESSION_TIMEOUT_WARNING_URL_SEARCH_PARAM_KEY],n=new URL(window.location.href);t.forEach((function(e){n.searchParams.delete(e)}));var r=n.hash;if(r&&r.startsWith("#")){var o=new URLSearchParams(r.substring(1));[].forEach((function(e){o.delete(e)})),r=o.toString()?"#".concat(o.toString()):""}var i="".concat(n.pathname).concat(n.search).concat(r);window.history.replaceState(window.history.state,null,i)}})).catch((function(){J.m8.push(w.$x.getAppLogoutPath())}))},modalOptions:{description:p.createElement(g.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.description"},"When you click on the ",p.createElement(f.EK,null,"Go back")," button, we will try to recover the session if it exists. If you don't have an active session, you will be redirected to the login page"),headingI18nKey:"myAccount:common.modals.sessionTimeoutModal.heading",loginAgainButtonText:p.createElement(g.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.loginAgainButton"},"Login again"),primaryButtonText:p.createElement(g.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.primaryButton"},"Go back"),secondaryButtonText:p.createElement(g.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.secondaryButton"},"Logout"),sessionTimedOutDescription:p.createElement(g.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.sessionTimedOutDescription"},"Please log in again to continue from where you left off."),sessionTimedOutHeadingI18nKey:"myAccount:common.modals.sessionTimeoutModal.sessionTimedOutHeading"},type:f.h5.DEFAULT},p.createElement(p.Fragment,null,p.createElement(f.T6,{heading:p.createElement(g.c,{i18nKey:"common:networkErrorMessage.heading"},"Your session has expired"),description:p.createElement(g.c,{i18nKey:"common:networkErrorMessage.description"},"Please try signing in again."),primaryActionText:p.createElement(g.c,{i18nKey:"common:networkErrorMessage.primaryActionText"},"Sign In"),primaryAction:L}),p.createElement(f.dC,{heading:p.createElement(g.c,{i18nKey:"common:chunkLoadErrorMessage.heading"},"Something went wrong"),description:p.createElement(g.c,{i18nKey:"common:chunkLoadErrorMessage.description"},"An error occurred when serving the requested application. Please try reloading the app."),primaryActionText:p.createElement(g.c,{i18nKey:"common:chunkLoadErrorMessage.primaryActionText"},"Reload the App")}),p.createElement(h.Z,null,p.createElement(v.Z,{exact:!0,from:"/",to:w.$x.getAppHomePath()}),n?(0,H.Oo)(T,n).map((function(e,t){return e.redirectTo?p.createElement(v.Z,{to:e.redirectTo,path:e.path}):e.protected?p.createElement(O.i1,{component:e.component,path:e.path,key:t,route:e,exact:e.exact}):p.createElement(S.Z,{path:e.path,render:function(t){return p.createElement(e.component,t)},key:t,exact:e.exact})})):null))))))))};const ee=X}}]);